# 2022-01-20

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|03:28|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@shinyu`<br>Vivliostyle.js v2.13 と Vivliostyle CLI v4.6 がリリースされたので、簡単に新機能等をブログにまとめようと思います。<br>一度、ビデオ会議で打ち合わせできませんか？　ご都合をお知らせください。|
|03:28|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: <br>Now that Vivliostyle.js v2.13 and Vivliostyle CLI v4.6 have been released, I'll easily blog about new features and more.<br>Can't you have a meeting at the video conference once? Please let us know your convenience.|
|04:39|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|はい、何時でもOKです|
|04:39|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Yes, it's always OK|
|05:15|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|では、善は急げで今からやりましょう。<br><br>ビデオ通話に参加するには次のリンクをクリックしてください。<https://meet.google.com/gdk-krja-kij>|
|05:15|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Then, let's do good in a hurry from now on.<br><br>Click the following link to join a video call. <https://meet.google.com/gdk-krja-kij>|
|15:30|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@shinyu`<br>ブログでアップデート開設を書く件、アウトラインを考えてみました。<br>ご意見ください。<br><br>*標題：VivliostyleでJavaScriptが使えるようになりました*<br><br>    ◦ *はじめに*<br>        ▪︎ 2022年1月19日、Vivliostyle.js はv2.13 を、 Vivliostyle CLI はv4.6 をリリース。詳細は下記を参照<br>            • <https://github.com/vivliostyle/vivliostyle.js/blob/master/CHANGELOG.md><br>        ▪︎ その中でも目玉と言えるのは、両プロダクトでJavaScriptが使えるようになったこと<br>        ▪︎ 従来はおもにセキュリティへの懸念から、HTMLにJavaScriptのコードが含まれていたら、すべて削除していた<br>        ▪︎ しかし、これは用途を狭めてしまう。そこで、オプションによりJavaScriptの利用を可能にすることにした<br>    ◦ *JavaScriptのサポートによるメリット①*<br>        ▪︎ JavaScriptを使うタイプのWebフォントを使えるようになった<br>            • そもそもWebフォントをロードする方法は以下の3種類<br>                ◦ 1. @font-face でフォントをロードする方法<br>                ◦ 2. @importかlink要素で外部スタイルシートをロードする方法（DynaSmart、Google Fonts）<br>                ◦ 3. JavaScriptによる方法（DynaSmart、Adobe Fonts、TypeSquare、FONT PLUS、 REALTYPE）<br>            • 従来、Vivliostyleは1と2には対応していたが、3には対応していなかった<br>                ◦ 3はJavaScriptによりダイナミックサブセットを作る方式<br>                ◦ 文字セットが大きい日本語や中国語のWebフォントを使うためには、最も実用的であり、且つ現に普及している方式といえる<br>            • 今回のアップデートは、この3に対応するもの<br>            • 各社Webフォントのテストサンプル<br>                ◦ <https://github.com/vivliostyle/vivliostyle.js/issues/735#issuecomment-1006275491><br>            • JavaScriptを使うタイプのWebフォントのうち、ドメイン登録が必要なサービスをCLIで使う方法<br>                ◦ FONT PLUS、DynaSmartは、利用に当たってドメイン登録が必要<br>                ◦ 他方、CLIは従来fileプロトコルでHTMLドキュメントをロードしてきた<br>                ◦ fileプロトコルなのでドメイン登録はできない<br>                ◦ したがって、仮にJavaScriptが利用できるようになったとしても、CLIはドメイン登録が必要なWebフォントサービスは使うことができないことになる<br>                ◦ しかし、今回のアップデートにより、CLIでhttpプロトコルでロードするオプションを追加<br>                ◦ <https://github.com/vivliostyle/vivliostyle-cli/pull/234><br>                ◦ 具体的には、以下の方法で利用可能になる<br>                ◦ Webフォントサービスにドメインとして <http://localhost:13000> を登録<br>                ◦ 実行時に`--http` を指定<br>                ◦ `<https://vivliostyle.org/>`を入力<br>    ◦ *JavaScriptのサポートによるメリット②*<br>        ▪︎ 各種JavaScriptライブラリが利用できるようになった<br>            • たとえば楽譜<br>                ◦ Test VexTab Tutorial (<http://vexflow.com/vextab/tutorial.html>)<br>                ◦ <https://vivliostyle.vercel.app/#src=https://raw.githack.com/0xfe/vextab/master/doc/tutorial.html><br>            • たとえばチャート<br>                ◦ Charts.css <https://chartscss.org><br>                ◦ <https://vivliostyle.vercel.app/#src=https://raw.githack.com/zopyx/print-css-rocks/master/lessons/lesson-chart-js/index.html><br>    ◦ *おわりに*<br>        ▪︎ JavaScriptへの対応について、より詳細は以下のIssueを参照してほしい<br>            • Support Web fonts loaded via JavaScript #735 <br>            • Allow JavaScript in HTML documents #733 <br>            • Layout problem with Web fonts #829 <br><blockquote>open source, web browser based CSS typesetting engine project</blockquote>|
|15:30|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: <br>I thought about the outline of writing an update on my blog.<br>Please give us your opinion.<br><br>* Title: JavaScript is now available in Vivliostyle *<br><br>    ◦ * Introduction *<br>        ▪︎ On January 19, 2022, Vivliostyle.js released v2.13 and Vivliostyle CLI released v4.6. See below for details<br>            • <https://github.com/vivliostyle/vivliostyle.js/blob/master/CHANGELOG.md><br>        ▪︎ Among them, the highlight is that JavaScript can be used in both products.<br>        ▪︎ In the past, mainly due to security concerns, if HTML contained JavaScript code, it was deleted altogether.<br>        ▪︎ However, this narrows the usage. Therefore, we decided to enable the use of JavaScript as an option.<br>            • •<br>    ◦ * Benefits of JavaScript support ① *<br>        ▪︎ You can now use JavaScript-based web fonts<br>            • There are three ways to load web fonts in the first place<br>                ◦ 1. How to load a font with @ font-face<br>                ◦ 2. How to load an external stylesheet with @import or link element (DynaSmart, Google Fonts)<br>                ◦ 3. JavaScript method (DynaSmart, Adobe Fonts, TypeSquare, FONT PLUS, REALTYPE)<br>            • Previously, Vivliostyle supported 1 and 2, but not 3<br>                ◦ 3 creates a dynamic subset with JavaScript<br>                ◦ It can be said that it is the most practical and popular method for using Japanese and Chinese with a large character set in web fonts.<br>            • This update corresponds to this 3<br>            • Test samples of web fonts from various companies<br>                ◦ <https://github.com/vivliostyle/vivliostyle.js/issues/735#issuecomment-1006275491><br>            • How to use a service that requires domain registration with CLI among web fonts that use JavaScript<br>                ◦ FONT PLUS and DynaSmart require domain registration to use<br>                ◦ Therefore, care must be taken when using these services with the CLI.<br>                ◦ CLI has traditionally loaded HTML documents using the file protocol.<br>                ◦ Therefore, even if JavaScript became available, web fonts that required domain registration could not be used.<br>                ◦ However, with this update, we have added an option to load using the http protocol.<br>                ◦ <https://github.com/vivliostyle/vivliostyle-cli/pull/234><br>                ◦ Specifically, it can be used by the following methods.<br>                ◦ Register &lt;http: // localhost: 13000&gt; as a domain<br>                ◦ Specify --http<br>                ◦ Enter <https://vivliostyle.org/><br>    ◦ * Benefits of JavaScript support ② *<br>        ▪︎ Various JavaScript libraries are now available<br>            • For example, sheet music<br>                ◦ Test VexTab Tutorial (<http://vexflow.com/vextab/tutorial.html>)<br>                ◦ <https://vivliostyle.vercel.app/#src=https://raw.githack.com/0xfe/vextab/master/doc/tutorial.html><br>            • For example charts<br>                ◦ Charts.css <https://chartscss.org><br>                ◦ <https://vivliostyle.vercel.app/#src=https://raw.githack.com/zopyx/print-css-rocks/master/lessons/lesson-chart-js/index.html><br>    ◦ * Conclusion *<br>        ▪︎ Please refer to the following Issue for more details on JavaScript support.<br>            • Support Web fonts loaded via JavaScript # 735<br>            • Allow JavaScript in HTML documents # 733<br>            • Layout problem with Web fonts # 829<br>|
