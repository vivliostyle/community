# 2023-10-01

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|13:33|![](https://avatars.slack-edge.com/2023-10-01/5997542696960_3bddfddce83a14a46731_72.jpg)|Sho Nitta|はじめまして。<br>PlaywrightとVivlostyleでWEB小説テーマを作れないかと遊んでおります。<br>”「”で始まる行のインデントを-1emしたいのですが、テーマのCSSでタグやクラスを指定しても反映されません。<br>ブラウザのインスペクタで確認するとこの部分<br>```viv-ts-open.viv-ts-auto &gt; viv-ts-inner, viv-ts-open.viv-ts-trim &gt; viv-ts-inner {<br>    margin-inline-start: -0.5em;<br>}```<br>ソースをみてみるとここに記述されてるようですが<br><https://github.com/vivliostyle/vivliostyle.js/blob/3e6957c21cfbc92363124c9f364c9ba277058f06/packages/core/src/vivliostyle/assets.ts#L1513><br>ここのスタイルはハードコーディングされてテーマではいじれないのでしょうか。<br><blockquote><pre>viv-ts-open.viv-ts-auto > viv-ts-inner,</pre></blockquote>|
|13:47|![](https://avatars.slack-edge.com/2022-07-04/3777085476512_a8d3b37eee1f9c9519dc_72.png)|hidaruma|どのような指定をしたのかのサンプルを上げることはできるでしょうか。<br><br>`margin-inline-start`はそのブロック全体の行開始位置を指定するもの（olやulで行頭の記号分段落全体がインデントされるような箇所）に影響しますが、そのような挙動を期待している、ということでよいでしょうか。<br><br>• 鍵括弧の箇所だけ行頭を詰めたい場合、通常は行頭の場合のみに作用する`text-indent`を指定します。<br>```p.talk {/*全体は1em下げて行頭だけ0.5em上げたい*/<br>margin-inline-start:1em;<br>text-indent: -0.5em;<br>}```|
|14:25|![](https://avatars.slack-edge.com/2023-10-01/5997542696960_3bddfddce83a14a46731_72.jpg)|Sho Nitta|メッセージありがとうございます。<br>”「”で始まる行ブロック全体のインデントです<br><br>MarkdownからVivliostyleで出力するとこのようなHTML（抜粋）が得られます。<br>テーマで<br>```viv-ts-open.viv-ts-auto > viv-ts-inner, viv-ts-open.viv-ts-trim > viv-ts-inner {<br>    margin-inline-start: -1em;<br>}```<br>としても-0.5emから変わらず<br><br>Previewからインスペクタで直接スタイル変更した、添付の画像のようにならないかと考えてます<br>https://vivliostyle.slack.com/files/U05UNG49L4A/F05UNL7QV3L/test.html<br>https://vivliostyle.slack.com/files/U05UNG49L4A/F05UNLU6142/____________________________2023-10-01_232344.png|
|15:49|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|`@Sho Nitta` Vivliostyle Viewerでの出力を、ブラウザのインスペクタで見たとき、<br>```viv-ts-open.viv-ts-auto &gt; viv-ts-inner, viv-ts-open.viv-ts-trim &gt; viv-ts-inner {<br>    margin-inline-start: -0.5em;<br>}```<br>のようなスタイルがあるのは、Vivliostyle.jsでCSS Text Level 4のtext-spacing-trimプロパティの機能を実現する処理のためです。これはVivliostyle.jsの内部使用のものであり、ユーザーが触れることはできません。<br><br>"「" ではじまる行での "「" の配置をどうするかは、text-spacing-trimプロパティやhanging-punctuationプロパティで指定することができます。CSS Text Level 4の <https://drafts.csswg.org/css-text-4/#japanese-start-edges|8.5.3. Japanese Paragraph-start Conventions in CSS><br>を参照してください。|
|16:05|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|text-spacing-trimプロパティは、初期値の space-first の場合、折り返し行頭の "「" は半角幅に詰めるけれど、段落先頭の "「" は全角幅のままにします。したがって text-indent: 1em での段落先頭字下げを合わせると見た目で1.5emの字下げに見えます。text-spacing-trim: trim-auto にすれば段落先頭の "「" も半角幅になります。hanging-punctuation: first を指定すると、段落先頭の "「" が突き出すことになります。つまり text-indent: 1em での段落先頭字下げを合わせると、字下げなしで、全角幅の "「" からはじまっているようになります。|
|17:24|![](https://avatars.slack-edge.com/2023-10-01/5997542696960_3bddfddce83a14a46731_72.jpg)|Sho Nitta|`@shinyu` 詳細な回答ありがとうございます。<br>CSS Text Level4の仕様とtext-spacing-trimプロパティやhanging-punctuationプロパティを調べてしばらく試してみます。<br>CSSは1や2が何となく分かる程度で、理解が追いついておりませんが。どこをどうすればいいのかも解らなかったので助かりました、ありがとうございました。|
