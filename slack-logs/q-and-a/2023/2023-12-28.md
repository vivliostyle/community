# 2023-12-28

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|03:19|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|残念ながら現在その機能はvfmにありません。日本語を書くときは１つの段落の中では改行を入力しないで書く必要があります。<br><br>VFMへの機能要望としてissueにしました:<br><br><https://github.com/vivliostyle/vfm/issues/187><br><blockquote>*Goals*<br><br>現在のvfmでは、 `--hard-line-breaks` オプション（設定の `hardLineBreaks` プロパティ）が指定されないかぎり、テキスト内の改行文字はそのまま出力されます。その改行文字は、ブラウザの標準のwhite-space処理によりスペース(U+0020)に変換されます。この改行がスペースに変換される仕様は欧文にはよいですが、日本語や中国語のように単語間や文間にスペースを入れないで書く言語では、不便です。vfmで、テキストを整形出力しているところの処理を改良して、改行の前後の文字が全角文字ならば改行を削除するようにするのがよいかと思います。<br><br>現状のvfmでは：<br><br><pre>$ vfm<br>日本語の文章を書くときに、<br>適当に改行を入れながら<br>書けるようにしたい。<br><!doctype html><br><html><br>  <head><br>    <meta charset="utf-8"><br>    <meta name="viewport" content="width=device-width, initial-scale=1"><br>  </head><br>  <body><br>    <p><br>      日本語の文章を書くときに、<br>      適当に改行を入れながら<br>      書けるようにしたい。<br>    </p><br>  </body><br></html></pre><br><br>この結果、ブラウザでの出力では、<br><br>> 日本語の文章を書くときに、 適当に改行を入れながら 書けるようにしたい。<br><br>のように余計なスペースが入ることになる。<br><br>vfmを改良して、<br><br><pre>    <p><br>      日本語の文章を書くときに、適当に改行を入れながらようにしたい。<br>    </p></pre><br><br>のように前後が全角文字なら改行を削除するようにするとこの問題が解消する。<br><br>*Prior Art*<br><br>• 日本語のTeXでの扱いでは、改行の直前の文字が全角文字であれば改行はスペースに変換しないで削除するようになっている<br><br>*Discussion*<br><br>改行文字の前後がどのような条件の場合に改行を削除するか、仕様を決める必要がある。<br><br>CSS Textでのwhite-spaceの処理で同様の議論がされている。次のissueで提案されている方法を採用したい：<br><br>• <https://github.com/w3c/csswg-drafts/issues/5086|w3c/csswg-drafts#5086></blockquote>|
