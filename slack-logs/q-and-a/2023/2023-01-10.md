# 2023-01-10

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|09:17|![](https://secure.gravatar.com/avatar/662ab9183267eb3d4baefb7cd9454419.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|MH35|`#general` からの誘導です<br>Windowsでビルドしようとすると、ERR_UNSUPPORTED_ESM_URL_SCHEMEというエラーが出てビルドができません。これはどういう理由なのでしょうか？<br><br>環境<br>Windows 11<br>Node.jsのインストールディレクトリ D:\nodejs<br>ドキュメントディレクトリ D:\Users\username\Documents\docbase\docdir<br>コンフィグディレクトリ ドキュメントディレクトリ内のvivliostyle.config.js<br>プロジェクト作成方法 npm create bookにより作成<br>テーマ @vivliostyle/theme-bunkoをコピーしbook-themeにリネームしたうえでドキュメントディレクトリに配置。vivliostyle.config.jsのthemeにはbook-theme/theme_print.cssを指定<br><br>エラーログ<br>```&gt; vworld@0.0.0 build<br><blockquote>vivliostyle build</blockquote>✖ Error: An error occurred on loading a config file: D:/Users/username/Documents/docbase/docdir/vivliostyle.config.js<br>Error [ERR_UNSUPPORTED_ESM_URL_SCHEME]: Only file and data URLs are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'<br>    at new NodeError (node:internal/errors:371:5)<br>    at defaultResolve (node:internal/modules/esm/resolve:1016:11)<br>    at ESMLoader.resolve (node:internal/modules/esm/loader:422:30)<br>    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:222:40)<br>    at ESMLoader.import (node:internal/modules/esm/loader:276:22)<br>    at importModuleDynamically (node:internal/modules/esm/translators:111:35)<br>    at importModuleDynamicallyCallback (node:internal/process/esm_loader:35:14)<br>    at load (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/config.js:153:17)<br>    at collectVivliostyleConfig (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/config.js:188:39)<br>    at getFullConfig (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/build.js:12:30)<br><br>If you think this is a bug, please report at <https://github.com/vivliostyle/vivliostyle-cli/issues>```|
|09:17|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇺🇸: Derived from `#general`<br>When I try to build on Windows, I get an error ERR_UNSUPPORTED_ESM_URL_SCHEME and can't build. What is the reason for this?<br><br>environment<br>Windows 11<br>Node.js installation directory D:\nodejs<br>Document Directory D:\Users\username\Documents\docbase\docdir<br>config directory vivliostyle.config.js in the document directory<br>How to create a project Created by npm create book<br>Copy the theme @vivliostyle/theme-bunko, rename it to book-theme and place it in the document directory. Specify book-theme/theme_print.css for the theme of vivliostyle.config.js<br><br>error log<br>```&gt; vworld@0.0.0 build<br><blockquote>vivlio style build</blockquote>✖ Error: An error occurred on loading a config file: D:/Users/username/Documents/docbase/docdir/vivliostyle.config.js<br>Error [ERR_UNSUPPORTED_ESM_URL_SCHEME]: Only file and data URLs are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'<br>    at new NodeError (node:internal/errors:371:5)<br>    at defaultResolve (node:internal/modules/esm/resolve:1016:11)<br>    at ESMLoader.resolve (node:internal/modules/esm/loader:422:30)<br>    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:222:40)<br>    at ESMLoader.import (node:internal/modules/esm/loader:276:22)<br>    at importModuleDynamically (node:internal/modules/esm/translators:111:35)<br>    at importModuleDynamicallyCallback (node:internal/process/esm_loader:35:14)<br>    at load (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/config.js:153:17)<br>    at collectVivliostyleConfig (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/config.js:188:39)<br>    at getFullConfig (file:///D:/Users/username/Documents/docbase/docdir/node_modules/@vivliostyle/cli/dist/build.js:12:30)<br><br>If you think this is a bug, please report at <https://github.com/vivliostyle/vivliostyle-cli/issues>```|
|13:41|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Yusuke S.` `@macneko` `@Satoshi Kojima`<br><br>返事が遅れてすみません。遅ればせながら状況を把握しました。<br><br>ご指摘の<https://docs.vivliostyle.org/#/|Vivliostyle Docs>だけでなく、<https://vivliostyle.org/ja/faq/|FAQ>、<https://vivliostyle.org/ja/make-books-with-create-book/|Create Book で同人誌を作ろう！> など、ドキュメンテーション全般が古くなっています。この数年、開発が進んだのにかまけて、ドキュメンテーションのアップデートを怠っていました。<br><br>ただし、これを適切にアップデートさせるのは、一日や二日では無理なことも確かです。また、私一人でできることでもありません。<br><br>しっかりした計画と役割分担が必要です。これについて `#documentation` で話し合いたいと思います。<br><br>もしよければ、そちらでの議論に参加していただけるとうれしいです。<br><blockquote>Vivliostyle — open source, web browser based CSS typesetting engine project</blockquote>|
|13:41|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇺🇸: `@Yusuke S.` `@macneko` `@Satoshi Kojima`<br><br>sorry for the late reply. Belatedly, I grasped the situation.<br><br>Not only <https://docs.vivliostyle.org/#/|Vivliostyle Docs> you pointed out, but also <https://vivliostyle.org/ja/faq/|FAQ>, <https://vivliostyle.org/ja/make-books-with-create-book/|Create Book で同人誌を作ろう！>, etc., the documentation in general is outdated. Over the past few years, despite the progress in development, we have neglected to update the documentation.<br><br>However, getting this updated properly is not something that can be done in a day or two. Nor can I do it alone.<br><br>Good planning and division of roles are required. I would like to discuss this at `#documentation`.<br><br>If you don't mind, I would appreciate it if you could join the discussion over there.|
|14:03|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|まだ具体的な原因まではわかっていませんが、おそらくCLI v6のリリース以降に発生したバグです。すみませんが、修正されるまではv5を使用してもらえないでしょうか？ 以下の手順でバージョンを戻せます<br>1. package.jsonの `@vivliostyle/cli` のバージョンを `5` 等に変更<br>2. `npm install` を実行|
|14:03|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇺🇸: I don't know the specific cause yet, but it's probably a bug that occurred after the release of CLI v6. I'm sorry, but could you please use v5 until it's fixed? You can revert the version by following the steps below<br>1. Change the version of `@vivliostyle/cli` in package.json to `5` etc.<br>2. Run `npm install`|
