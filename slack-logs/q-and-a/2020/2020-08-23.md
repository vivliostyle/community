# 2020-08-23

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|03:48|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|å‹äººãŒ Windows ç’°å¢ƒã§ Vivliostyle ã‚’ä½¿ãŠã†ã¨ã—ã¦ã„ã‚‹ã®ã§ã™ãŒ Ghostscript ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ `--press-ready` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ `Error: 'gs' command missing. Install Ghostscript on your machine.` ã«ãªã‚‹ã¨ã®ã“ã¨ã§ã—ãŸã€‚å‰ã«æœ¬ Slack ã§ã‚‚åŒã˜ã‚ˆã†ãªè©±é¡ŒãŒã‚ã£ãŸã‚ˆã†ãªã®ã§  `ghostscript` ã§æ¤œç´¢ã—ã¦ã¿ã¾ã—ãŸãŒ Windows ã«ã¤ã„ã¦ã¯è§£æ±ºã«è‡³ã£ã¦ã„ãªã„ã‚ˆã†ã§ã—ãŸã€‚<br><br>Vivliostyle ã®ã€Œä½¿ã£ã¦ã¿ã‚‹ | Vivliostyleã€ <https://vivliostyle.org/ja/getting-started/> ã«ã¯è©³ç´°ã‚’ <https://github.com/vibranthq/press-ready/blob/master/README.md> ã¸å§”ã­ã¦ã„ã¾ã™ãŒã€ãã¡ã‚‰ã«ã¯ Ghostscript ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã¤ã„ã¦ Windows ã¯è§£èª¬ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨åŒæ§˜ã« macOS (brew) ã¨ Ubuntu (apt-get) ã®ã¿ã§ã™ã€‚<br><br>ä»¥ä¸Šã‚’è¸ã¾ãˆã¦è³ªå•ãªã®ã§ã™ãŒã€ã©ãªãŸã‹ Windows ç’°å¢ƒã§ `--press-ready` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã® Vivliostyle ã«ã‚ˆã‚‹ PDF å‡ºåŠ›ã«æˆåŠŸã—ãŸæ–¹ã¯ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿ<br><blockquote>Vivliostyle â€” open source, web browser based CSS typesetting engine project</blockquote><br><blockquote><pre>&lt;h1 align="center"&gt;<br>  ğŸš€ press-ready<br>  &lt;br/&gt;<br>  &lt;img alt="screencast" src="https://github.com/vibranthq/press-ready/blob/master/.github/screencast.gif?raw=true"&gt;<br>&lt;/h1&gt;<br><br><blockquote>Make your PDF compliant with press-ready PDF/X-1a.</blockquote>![npm: version](<https://badgen.net/npm/v/press-ready>)<br>![npm: total downloads](<https://badgen.net/npm/dt/press-ready>)<br>[![Build Status](<https://travis-ci.com/vibranthq/press-ready.svg?branch=master>)](<https://travis-ci.com/vibranthq/press-ready>)<br>[![Codacy Badge](<https://app.codacy.com/project/badge/Grade/2c6709d994ab4526af91d11f9ef77193>)](<https://www.codacy.com/gh/vibranthq/press-ready?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=vibranthq/press-ready&amp;utm_campaign=Badge_Grade>)<br>[![Total alerts](<https://img.shields.io/lgtm/alerts/g/vibranthq/press-ready.svg?logo=lgtm&amp;logoWidth=18>)](<https://lgtm.com/projects/g/vibranthq/press-ready/alerts/>)<br><br>[ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª](README.ja.md)<br><br>## Table of Contents<br><br>- [Install](#install)<br>- [Usage](#usage)<br>- [Tips](#tips)<br>- [Advanced Usage](#advanced-usage)<br>- [Contribution](#contribution)<br><br>## Install<br><br>### via Docker ğŸ³ (Recommended)<br><br>Pull `vibranthq/press-ready` image from [Docker Hub](<https://hub.docker.com/r/vibranthq/press-ready/>).<br></pre>bash<br>docker pull vibranthq/press-ready<br><pre><br>then assign an alias for `press-ready`:<br></pre>bash<br>alias press-ready="docker run --rm -it -v \$PWD:/workdir vibranthq/press-ready"<br><pre><br>### via npm ğŸ“¦<br></pre>bash<br>npm install -g press-ready # npm<br>yarn global add press-ready # yarn<br><pre><br>and install system dependencies to run `press-ready`.<br><br>#### macOS<br></pre>bash<br>brew install poppler ghostscript<br><pre><br>#### Ubuntu<br></pre>bash<br>apt-get install poppler-utils ghostscript<br><pre><br>## Usage<br><br>Run `press-ready` with `-i, --input`. If `-o, --output` is missing, `output.pdf` going to be used for default output path.<br></pre><br>press-ready build -i &lt;input.pdf&gt; -o &lt;output.pdf&gt;<br><pre><br>Run with `--help` for the help.<br></pre>bash<br>â¯ press-ready --help<br>press-ready &lt;command&gt;<br><br>Commands:<br>  press-ready build         build PDF<br>  press-ready lint &lt;input&gt;  lint PDF<br><br>Options:<br>  --version  Show version number                                       [boolean]<br>  --help     Show help                                                 [boolean]<br><pre><br>### Options<br><br>#### Color Mode<br><br>Press-ready will use **CMYK** by default. Give `--gray-scale` option to let them use **Grayscale** instead.<br></pre>bash<br>pres-ready build \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --gray-scale<br><pre><br>#### Boundary Boxes<br><br>Option `--boundary-boxes` will build TrimBox, CropBox and BleedBox on a generated PDF.<br></pre>bash<br>press-ready build \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --boundary-boxes<br><pre><br>#### Outlined Fonts<br><br>You might not want to use this option since press-ready automatically guess whether embedded fonts should be outlined.<br>However, you can still control this behavior by passing `--enforce-outline` or `--no-enforce-outline`.<br></pre>bash<br>press-ready bulid \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --enforce-outline<br><pre><br>#### Color Profile<br><br>Currently, there is only support for **Japan 2001 Coated**. If you have any suggestions, please consider submitting an issue.<br><br>## Tips<br><br>### Lint PDF<br></pre>bash<br>press-ready lint ./input.pdf<br><pre><br>`press-ready lint` command produces lint result on specified PDF.<br></pre><br>==&gt; Linting metadata for './cli/test/fixture/review.pdf'<br>==&gt; Title Re:VIEWãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ<br>==&gt; Page No. 8<br>==&gt; PDF version 1.5<br>==&gt; TrimBox 48.19,66.61,467.72,661.89<br>==&gt; BleedBox 39.68,58.11,476.22,670.39<br>==&gt; Listing fonts<br>name                                      type         embedded  subset<br>ORFHCM+NimbusSanL-Regu                    Type 1C      yes       yes<br>JCEWND+NimbusSanL-Bold                    Type 1C      yes       yes<br>ASNLWJ+NotoSansCJKjp-Bold-Identity-H      CID Type 0C  yes       yes<br>HPDDST+LMRoman9-Regular                   Type 1C      yes       yes<br>RJMBNU+NotoSerifCJKjp-Regular-Identity-H  CID Type 0C  yes       yes<br>==&gt; Every font is properly embedded or no fonts embedded<br><pre><br>### Pull resource from AWS S3<br><br><blockquote>! This feature is not yet available in press-ready v2.<br>If you need this feature, use press-ready v1 (`vibranthq/pdfx`) image instead.</blockquote>Just run with S3 URL: `docker run -t vibranthq/press-ready &lt;input s3url&gt; &lt;output s3url&gt;`.<br><br>For fetching and uploading AWS S3 resources, you need to set env var `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.<br></pre>bash<br>docker run --rm -it \<br>  -e AWS_ACCESS_KEY_ID=&lt;aws_key_id&gt; \<br>  -e AWS_SECRET_ACCESS_KEY=&lt;aws_secret&gt; \<br>  vibranthq/pdfx <s3://bucket/input.pdf> <s3://bucket/output.pdf><br><pre><br>## Advanced Usage<br><br>### Heroku<br><br>To run `press-ready` on Heroku, make sure you add [heroku-buildpack-xpdf](<https://github.com/matt-note/heroku-xpdf-buildpack>).<br><br>## Contribution<br><br>PRs are welcome. Make sure to do `make test` before filing pull requests.<br><br>### Development Build<br></pre>bash<br>make build<br>make test<br><pre><br>## Blogs<br><br>- [press-ready - PDF ã‚’ PDF/X-1a ã«å¤‰æ› MOONGIFT](<https://www.moongift.jp/2019/05/press-ready-pdf%E3%82%92pdfx-1a%E3%81%AB%E5%A4%89%E6%8F%9B/>)<br><br>## Contributors âœ¨<br><br>Thanks goes to these wonderful people ([emoji key](<https://allcontributors.org/docs/en/emoji-key>)):<br><br>&lt;!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section --&gt;<br>&lt;!-- prettier-ignore-start --&gt;<br>&lt;!-- markdownlint-disable --&gt;<br>&lt;table&gt;<br>  &lt;tr&gt;<br>    &lt;td align="center"&gt;&lt;a href="https://uechi.io"&gt;&lt;img src="https://avatars0.githubusercontent.com/u/431808?v=4" width="100px;" alt="Yasuaki Uechi"/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Yasuaki Uechi&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href="https://github.com/vibranthq/press-ready/commits?author=uetchy" title="Code"&gt;ğŸ’»&lt;/a&gt; &lt;a href="https://github.com/vibranthq/press-ready/commits?author=uetchy" title="Documentation"&gt;ğŸ“–&lt;/a&gt;&lt;/td&gt;<br>    &lt;td align="center"&gt;&lt;a href="http://kmuto.jp/"&gt;&lt;img src="https://avatars2.githubusercontent.com/u/183523?v=4" width="100px;" alt="Kenshi Muto"/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Kenshi Muto&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href="https://github.com/vibranthq/press-ready/commits?author=kmuto" title="Code"&gt;ğŸ’»&lt;/a&gt;&lt;/td&gt;<br>  &lt;/tr&gt;<br>&lt;/table&gt;<br><br>&lt;!-- markdownlint-enable --&gt;<br>&lt;!-- prettier-ignore-end --&gt;<br><br>&lt;!-- ALL-CONTRIBUTORS-LIST:END --&gt;<br><br>This project follows the [all-contributors](<https://github.com/all-contributors/all-contributors>) specification. Contributions of any kind welcome!<br></pre></blockquote>|
|03:48|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: My friend wants to use Vivliostyle in a Windows environment, but even if Ghostscript is installed, if I add the `--press-ready` option, it becomes `Error:'gs' command missing. Install Ghostscript on your machine.`. It was that. There seems to have been a similar topic in this Slack before, so I searched with `ghostscript`, but it seems that it has not been solved for Windows.<br><br>Vivliostyle's "Try It | Vivliostyle" <https://vivliostyle.org/en/getting-started/> for details <https://github.com/vibranthq/press-ready/blob/master/README. md>, but there is no description of Windows about Ghostscript setup there. Only macOS (brew) and Ubuntu (apt-get) as well as error messages.<br><br>Based on the above, the question is, is there anyone who succeeded in PDF output by Vivliostyle with the `--press-ready` option in the Windows environment?|
|03:51|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|è£œè¶³ã€‚å°‘ãªãã¨ã‚‚ç¾æ™‚ç‚¹ã®ã€Œä½¿ã£ã¦ã¿ã‚‹ã€ã¨ press-ready ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ Windows ç’°å¢ƒä¸Šã® Ghostscript ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ãŒãªã„ãŸã‚ã€<br>â€¢ ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ãªã‚‰è§£èª¬ã‚’è¿½è¨˜ (Vivliostyle å´ã®è³‡æ–™ã§è£œè¶³ã§ã‚‚å¯)<br>â€¢ ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã€ã¾ãŸã¯å°†æ¥å¯¾å¿œãªã‚‰ãã®æ—¨<br>ã‚’è¨˜è¼‰ã—ãŸã»ã†ãŒã‚ˆã„ã¨æ€ã„ã¾ã™|
|03:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Supplement. At least at this point in the "Getting Started" and press-ready documentation there is no Ghostscript setup on Windows environment,<br>â€¢ Add commentary if supported (may be supplemented by Vivliostyle side material)<br>â€¢ Not supported or future support<br>I think it is better to describe|
|04:16|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|ãƒ‘ã‚¹è¨­å®šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚PowerShell ä¸Šã§ `gs --version` ã‚’å®Ÿè¡Œã—ã¦ã‚‚ã‚³ãƒãƒ³ãƒ‰ãŒãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãã†ãªã®ã§ã€‚ã“ã‚Œã‚’è¸ã¾ãˆãƒ‘ã‚¹é€šã—ã‚’è©¦ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã€å‚è€ƒã€‚<br><br>Ghostscript/Windows - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br>ã‚’å‚è€ƒ|
|04:16|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: It may be a path setting. When I run `gs --version` on PowerShell, I get an error that there is no command. Based on this, I decided to try Pass Through. Below, reference.<br><br>Ghostscript/Windows-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br>Refer to|
|10:02|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Windowsã§ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚press-readyã¯ `gs` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€Windowsç‰ˆghostscriptã®CLIã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«åã¯ `gswin64c.exe` ï¼ˆ64bitç‰ˆã®å ´åˆï¼‰ãªã®ã§PATHã‚’é€šã—ãŸã†ãˆã§ã€`gs.exe` ã«åå‰ã‚’å¤‰ãˆã¦è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚<br><br>ã“ã‚Œã§ `vivliostyle build --press-ready` ã‹ã‚‰ ghostscript ãŒå‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã™ãŒã€ghostscript ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ã™ã€‚issueç™»éŒ²ã—ã¾ã—ãŸã€‚<br><br><https://github.com/vivliostyle/vivliostyle-cli/issues/72><br><blockquote>Testing the `--press-ready` option on WIndows,<br><br>First, I tested `vivliostyle build --press-ready` without ghostscript installed,<br><br><pre>$ vivliostyle build --press-ready<br>âœ” manuscript.md å¾è¼©ã¯çŒ«ã§ã‚ã‚‹ã€‚<br>ï¿½ Running press-ready<br>Error: 'gs' command missing. Install Ghostscript on your machine.<br>macOS:<br>$ brew install ghostscript<br><br>Ubuntu:<br>$ apt-get install ghostscript<br></pre><br><br>No instruction for Windows unfortunately, but we can download and install ghostscript from <https://www.ghostscript.com/download/gsdnld.html|https://www.ghostscript.com/download/gsdnld.html>.<br><br>I installed "Ghostscript 9.52 for Windows (64 bit)" with "GNU Affero General Public License".<br><br>Ghostscript binary files are installed in `C:\Program Files\gs\gs9.52\bin`, and the CLI executable is `C:\Program Files\gs\gs9.52\bin\gswin64c.exe`.<br><br>I added `C:\Program Files\gs\gs9.52\bin` to the PATH and copied `gswin64c.exe` to `gs.exe` so that the `gs` command can be found.<br><br>Tested `vivliostyle build --press-ready` with ghostscript installed:<br><br><pre>$ vivliostyle build --press-ready<br>âœ” manuscript.md å¾è¼©ã¯çŒ«ã§ã‚ã‚‹ã€‚<br>ï¿½ Running press-ready<br>==&gt; Listing fonts in 'C:/Users/Shinyu/AppData/Local/Temp/vivliostyle-cli-c94e5df0-e51d-11ea-9283-f9584edc76a7.pdf'<br>name         type          embedded  subset <br>Meiryo-Bold  CID TrueType  yes       no<br>Meiryo       CID TrueType  yes       no<br>Verdana      CID TrueType  yes       no<br>==&gt; Every font is properly embedded<br>==&gt; Generating PDF<br>Input            C:/Users/Shinyu/AppData/Local/Temp/vivliostyle-cli-c94e5df0-e51d-11ea-9283-f9584edc76a7.pdf<br>Output           D:/viv/test-create-book/testmybook/testmybook.pdf<br>Color Mode       CMYK<br>Enforce outline  no<br>Boundary boxes   no<br>==&gt; GPL Ghostscript 9.52: Unrecoverable error, exit code 1<br>GPL Ghostscript 9.52 (2020-03-19)<br>Copyright (C) 2020 Artifex Software, Inc.  All rights reserved.<br>This software is supplied under the GNU AGPLv3 and comes with NO WARRANTY:<br>see the file COPYING for details.<br>Error: /ioerror in --file--<br>Operand stack:<br>   --nostringval--   --nostringval--   (C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc)   (r)<br>Execution stack:<br>   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1990   1   3   %oparray_pop   1989   1   3   %oparray_pop   1977   1   3   %oparray_pop   1833   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--<br>Dictionary stack:<br>   --dict:752/1123(ro)(G)--   --dict:0/20(G)--   --dict:76/200(L)--<br>Current allocation mode is local<br>Current file position is 1025<br>==&gt; Listing fonts in 'D:/viv/test-create-book/testmybook/testmybook.pdf'<br>==&gt; No fonts found<br>==&gt; Every font is properly embedded<br>ï¿½ Built successfully.<br><br>testmybook.pdf has been created.<br></pre><br><br>Still not working. This error message seems to be a hint of the problem:<br><br><blockquote><pre>==&gt; GPL Ghostscript 9.52: Unrecoverable error, exit code 1<br>...<br>Error: /ioerror in --file--<br>Operand stack:<br>   --nostringval--   --nostringval--   (C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc)   (r)<br></pre></blockquote>Directory separators (`/` or `\` in Windows) are missing in the path of the .icc file, `C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc`. It should be `C:/Users/Shinyu/AppData/Local/Temp/â€¦` or `C:\Users\Shinyu\AppData\Local\Temp\â€¦`. Maybe, the backslashes are lost when passing the path name to ghostscript.</blockquote>|
|10:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Tested on Windows. press-ready is designed to execute the command `gs`, but since the execution file name of the CLI for Windows version ghostscript is `gswin64c.exe` (in the case of 64bit version), after passing through PATH, I renamed it to `gs.exe` and tried it.<br><br>Now ghostscript is called from `vivliostyle build --press-ready`, but ghostscript gives an error. I have registered an issue.<br><br><https://github.com/vivliostyle/vivliostyle-cli/issues/72>|
|10:02|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|`@shinyu` ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã„ã¾ã¡ã‚‡ã†ã©å‹äººã‹ã‚‰ãã®è©±ã‚’èãã€ãã‚‚ã‚‚ã `gs` ã§ã¯ãªã„ã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã“ã†ã¨ã—ã¦ã„ã¾ã—ãŸ|
|10:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§:  Thank you very much. I was just hearing that from a friend and trying to write a comment that it wasn't `gs` in the first place.|
|10:04|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|ã‚ã¨ Ghostscript ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã¯ãƒ‘ã‚¹ã‚’é€šã—ã¦ãã‚Œãªã„ã®ã§ã€ã“ã‚Œã¯ Vivliostyle å´ã®ã€Œä½¿ã£ã¦ã¿ã‚ˆã†ã€ã§è£œè¶³ã—ãŸã»ã†ãŒã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“|
|10:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Also, since the Ghostscript installer does not pass the path, it may be better to supplement this with "Let's try" on Vivliostyle side|
|10:05|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|æ‘ä¸Šã•ã‚“ã‚‚æ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒå‹äººã‚‚ä»¥ä¸‹ã‚’å‚è€ƒã«æ‰‹å‹•ã§ãƒ‘ã‚¹ã‚’é€šã—ãŸãã†ã§ã™<br><br>Ghostscript/Windows - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br><br>Ghostscript/ä½¿ã„æ–¹ - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2F%E4%BD%BF%E3%81%84%E6%96%B9#se3b8ef2>|
|10:05|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Mr. Murakami is also written, but a friend seems to have manually passed the pass referring to the following<br><br>Ghostscript/Windows-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br><br>Ghostscript/how to use-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2F%E4%BD%BF%E3%81%84%E6%96%B9#se3b8ef2>|
|10:11|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|ä»¥ä¸‹ã‚’èª­ã‚€ã¨ã‚³ãƒãƒ³ãƒ‰ãŒ `gs` æ±ºã‚æ‰“ã¡ã®ã‚ˆã†ã§ã™ã®ã§ press-ready å´ã®å¯¾å¿œãŒå¿…è¦ãªæ°—ãŒã—ã¾ã™<br><br>press-ready/ghostScript.ts at master Â· vibranthq/press-ready<br><https://github.com/vibranthq/press-ready/blob/master/src/ghostScript.ts><br><blockquote><pre>import fs from 'fs'<br>import path from 'path'<br>import execa from 'execa'<br>import { tmpdir } from 'os'<br>import { join } from 'path'<br>import Mustache from 'mustache'<br>import { v4 as uuid } from 'uuid'<br>import shell from 'shelljs'<br>const debug = require('debug')('press-ready')<br><br>export interface GhostscriptOption {<br>  inputPath: string<br>  outputPath: string<br>  pdfxDefTemplatePath?: string<br>  sourceIccProfilePath?: string<br>  grayScale?: boolean<br>  enforceOutline?: boolean<br>  boundaryBoxes?: boolean<br>  title?: string<br>}<br><br>const ASSETS_DIR = path.resolve(__dirname, '..', 'assets')<br><br>export function isGhostscriptAvailable() {<br>  return shell.which('gs')<br>}<br><br>export async function ghostScript({<br>  inputPath,<br>  outputPath,<br>  pdfxDefTemplatePath = path.join(ASSETS_DIR, 'PDFX_def.ps.mustache'),<br>  sourceIccProfilePath = path.join(ASSETS_DIR, 'JapanColor2001Coated.icc'),<br>  grayScale = false,<br>  enforceOutline = false,<br>  boundaryBoxes = false,<br>  title = 'Auto-generated PDF (press-ready)',<br>}: GhostscriptOption) {<br>  const workingDir = tmpdir()<br>  const id = uuid()<br><br>  // ICC profile<br>  const iccProfilePath = join(workingDir, `press-ready-${id}.icc`)<br>  fs.copyFileSync(sourceIccProfilePath, iccProfilePath)<br><br>  // PDFXDef<br>  const pdfxDefPath = join(workingDir, `press-ready-${id}.ps`)<br>  const pdfxDefTemplateString = fs.readFileSync(pdfxDefTemplatePath, 'utf-8')<br>  const pdfxDef = Mustache.render(pdfxDefTemplateString, {<br>    title,<br>    iccProfilePath,<br>  })<br>  fs.writeFileSync(pdfxDefPath, pdfxDef, 'utf-8')<br><br>  // configure gs command<br>  const gsCommand = 'gs'<br>  const gsOptions = [<br>    '-dPDFX',<br>    '-dBATCH',<br>    '-dNOPAUSE',<br>    '-dNOOUTERSAVE',<br>    '-sDEVICE=pdfwrite',<br>    '-dPDFSTOPONERROR',<br>    '-dShowAnnots=false',<br>    '-dPDFSETTINGS=/prepress',<br>    '-dPrinted',<br>    '-r600',<br>    '-dGrayImageResolution=600',<br>    '-dMonoImageResolution=600',<br>    '-dColorImageResolution=600',<br>    `-sOutputFile=${outputPath}`,<br>  ]<br>  if (boundaryBoxes) {<br>    gsOptions.push('-dUseCropBox', '-dUseTrimBox', '-dUseBleedBox')<br>  }<br>  if (enforceOutline) {<br>    gsOptions.push('-dNoOutputFonts')<br>  }<br>  if (grayScale) {<br>    gsOptions.push(<br>      '-sProcessColorModel=DeviceGray',<br>      '-sColorConversionStrategy=Gray',<br>      '-sColorConversionStrategyForImages=Gray'<br>    )<br>  } else {<br>    gsOptions.push(<br>      '-sProcessColorModel=DeviceCMYK',<br>      '-sColorConversionStrategy=CMYK',<br>      '-sColorConversionStrategyForImages=CMYK',<br>      '-dOverrideICC',<br>      `-sOutputICCProfile=${iccProfilePath}`<br>    )<br>  }<br><br>  const args = [...gsOptions, pdfxDefPath, inputPath]<br>  const command: [string, string[]] = [gsCommand, args]<br><br>  debug(gsCommand, args.join(' '))<br><br>  try {<br>    // generate pdf with ghostscript<br>    const { stdout, stderr } = await execa(...command)<br><br>    return {<br>      command,<br>      rawOutput: stdout,<br>      rawError: stderr,<br>    }<br>  } catch (err) {<br>    return {<br>      command,<br>      rawOutput: err.stdout,<br>      rawError: err.stderr,<br>    }<br>  } finally {<br>    fs.unlinkSync(iccProfilePath)<br>    fs.unlinkSync(pdfxDefPath)<br>  }<br>}<br></pre></blockquote>|
|10:11|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: If you read the following, the command seems to be `gs` deterministic, so I think that press-ready side correspondence is necessary<br><br>press-ready/ghostScript.ts at master Â· vibranthq/press-ready<br><https://github.com/vibranthq/press-ready/blob/master/src/ghostScript.ts>|
|10:30|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|ã¯ã„ã€ `gs` æ±ºã‚æ‰“ã¡ãªã®ã¨ã€Windowsã®pathã®ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ãŒæ¶ˆãˆã‚‹ã®ãŒå•é¡Œã§ã™ã€‚ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã®å•é¡Œã¯ vivliostyle-cli ã® <https://github.com/vivliostyle/vivliostyle-cli/pull/69> ã¨åŒæ§˜ãªã®ã§åŒã˜ä¿®æ­£ã‚’ press-ready ã®ã»ã†ã«é©ç”¨ã™ã‚Œã°è§£æ±ºã—ã¾ã™ã€‚<br><blockquote>On Windows, with Node.js `path` module, `path.join()`, `path.relative()`, etc. functions return path strings containing backslashes as directory separator.<br><br>Path string with backslashes cannot be used where URL path is required (e.g. `href` in `manifest.json`), and cannot be used with <https://www.npmjs.com/package/globby|globby>. So this problem causes <https://github.com/vivliostyle/vivliostyle-cli/issues/68|errors on Windows>.<br><br>Using <https://www.npmjs.com/package/upath|`upath`> instead of normal `path` solves the problem.<br><br>Fixes <https://github.com/vivliostyle/vivliostyle-cli/issues/68|#68></blockquote>|
|10:30|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Yes, the problem is that the `gs` is hard and the backslash in the Windows path disappears. The backslash issue is similar to &lt;vivsstyle-cli's <https://github.com/vivliostyle/vivliostyle-cli/pull/69> so applying the same fix to press-ready will solve it.|
|11:35|![](https://secure.gravatar.com/avatar/10d95659b0a9eda4e94cfc0f927e32dd.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png)|mattari|ã‚ã‹ã‚Šã‚„ã™ã„èª¬æ˜ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br><br>æ”¹ã‚ã¦è¦‹ç›´ã—ãŸã¨ã“ã‚è§£æ±ºã—ã¾ã—ãŸã€‚<br>@font-faceã®font-familyã«sans-serif;ã¨æ›¸ã„ã¦ã‚ã£ãŸã®ãŒã€åŠ¹ã‹ãªããªã£ãŸåŸå› ã ã£ãŸã‚ˆã†ã§ã™ã€‚ã€‚ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚<br><br><http://honttoni.blog74.fc2.com/blog-entry-306.html?sp><br><blockquote>ä»Šå›ã¯ã€CSS ã® @font-face ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ ã“ã‚Œã¯...</blockquote>|
|11:35|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Thank you for the easy explanation.<br><br>After reviewing it again, it was resolved.<br>It seems that the fact that sans-serif; was written in the font-family of @font-face was the reason why it stopped working. .. .. Thank you very much.<br><br><http://honttoni.blog74.fc2.com/blog-entry-306.html?sp>|
