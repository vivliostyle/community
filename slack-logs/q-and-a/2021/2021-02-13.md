# 2021-02-13

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|04:39|||This message was deleted.|
|04:39|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: • Created a book with create book.<br>• I want to edit the appearance of the book, so <https://vivliostyle.org/ja/faq/#%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E3% 82% AB% E3% 82% B9% E3% 82% BF% E3% 83% 9E% E3% 82% A4% E3% 82% BA% E3% 81% 99% E3% 82% 8B% E3% 81% AB% E3% 81% AF | FAQ How to customize the theme? >, And decided to manage it in the first level with the "my-theme" directory.<br>Here's a question.<br>I edited SCSS first and misunderstood that "(default name) theme.css" would be generated at build time, but the style will not be reflected unless I edit "theme.css" directly. I found out that.<br>Then, what is the purpose of "SCSS" that is divided according to the purpose and can be used conveniently?<br>Also, would you please tell me if there is a link that shows you how to use it properly?<br>Thank you.|
|05:44|![](https://secure.gravatar.com/avatar/efc42bfa256a41ecab309898f63f2f12.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png)|takahiro|• create bookで本の素を生成した。<br>• 本の体裁を編集したいので、FAQ テーマをカスタマイズするには？を参照し、『node_modules/@vivliostyle/theme-techbook/』から持ってきたディレクトリを参照文のとおり第一階層にディレクト名『my-theme』で管理することにした。<br>ここで質問です。<br><br>最初『SCSS』を編集していき、ビルド時に『（デフォルト名）theme.css』が生成されるのだろうと勘違いしておりましたが、直接『theme.css』を編集していかないとスタイルは反映されないということがわかりました。<br>では、用途によって分かれおり、便利に使えそうな『SCSS』を使ってスタイル付けをしていきたいと考えていますが方法がわかりません。<br><br>また、コピーしてきた『my-theme』内の『package.json』に以下の記述がありますが、<br>これはビルド時に『SCSS』からよしなにスタイル定義のファイルを生成したり管理するためのレシピのように思われますが、このコードを機能させるにはどうしたらいいのでしょうか？<br>```  "scripts": {<br>    "build": "run-p build:scss",<br>    "build:scss": "node-sass scss/app.scss theme.css -r --source-map true --output-style expanded",<br>    "dev": "run-p preview watch:scss",<br>    "preview": "vivliostyle-theme-scripts preview theme.css --layout example/techbook.md",<br>    "watch:scss": "node-sass scss/app.scss theme.css -w -r -q --source-map true --output-style expanded"<br>  },```<br>お手数であれば、的確な使い方がわかるWEBページへのリンクをご教示ください。<br>すぐに読みに参ります。<br><br>よろしくお願いします。<br><blockquote>Vivliostyle — open source, web browser based CSS typesetting engine project</blockquote>|
|07:02|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Vivliostyle Themes をカスタマイズしやすいものにすることは、今後の課題であり、残念ながら今のところあまり便利にはなっていません。<br><br>関連するissue:<br><https://github.com/vivliostyle/themes/issues/9><br><https://github.com/vivliostyle/vivliostyle-cli/issues/76><br><blockquote>[vivliostyle/vivliostyle-cli] #76 CLIにSCSSのトランスパイル機能を含める</blockquote>|
|07:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Making Vivliostyle Themes easy to customize is an issue for the future, and unfortunately it hasn't been very useful so far.<br><br>Related issue:<br><https://github.com/vivliostyle/themes/issues/9><br><https://github.com/vivliostyle/vivliostyle-cli/issues/76>|
|07:05|![](https://secure.gravatar.com/avatar/b9d723a1439affc92fcd589446f73d3b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png)|yuku|補足として、SCSS から CSS を生成するだけでしたら、takahiro さんのおっしゃる通り `package.json` 内のスクリプトを以下のように実行することで可能です。<br>```npm run build<pre>もしくは、以下のようにすることで、SCSS を監視して変更するたびに CSS を更新することもできます。</pre>npm run watch:scss```|
|07:05|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: As a side note, if you just want to generate CSS from SCSS, you can do it by running the script in `package.json` as takahiro says:<br>`` `npm run build```<br>Alternatively, you can monitor the SCSS and update the CSS every time you make changes by doing the following:<br>`` `npm run watch: scss```|
|08:54|![](https://secure.gravatar.com/avatar/efc42bfa256a41ecab309898f63f2f12.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png)|takahiro|yukuさん、ありがとうございます。<br>試しましたがビルドしませんでした。<br>```VFM_syntax $ npm run watch:scss<br>npm ERR! missing script: watch:scss<br><br>npm ERR! A complete log of this run can be found in:<br>npm ERR!   /Users/quad9/.npm/_logs/2021-02-13T08_43_20_645Z-debug.log<pre>もしやと思い以下を試しました。<br>『my-theme/package.json』に記述されている以下を第一階層の『package.json』に該当する部分と置き換えました。</pre>"build": "run-p build:scss",<pre>しかし、結果はエラーになりました。</pre>VFM_syntax $ npm run build<br><br><blockquote>vfm-syntax@0.0.0 build /Users/quad9/dev/Vivliostyle/VFM_syntax<br>run-p build:scss</blockquote>sh: run-p: command not found<br>npm ERR! code ELIFECYCLE<br>npm ERR! syscall spawn<br>npm ERR! file sh<br>npm ERR! errno ENOENT<br>npm ERR! vfm-syntax@0.0.0 build: `run-p build:scss`<br>npm ERR! spawn ENOENT<br>npm ERR! <br>npm ERR! Failed at the vfm-syntax@0.0.0 build script.<br>npm ERR! This is probably not a problem with npm. There is likely additional logging output above.<br><br>npm ERR! A complete log of this run can be found in:<br>npm ERR!     /Users/quad9/.npm/_logs/2021-02-13T08_30_58_984Z-debug.log<pre>それから、<br>書式を元に戻し、以下を追加しました。</pre>"watch:scss": "node-sass scss/app.scss theme.css -w -r -q --source-map true --output-style expanded"<pre>これも結果はだめでした。</pre>VFM_syntax $ npm run watch:scss<br><br><blockquote>vfm-syntax@0.0.0 watch:scss /Users/quad9/dev/Vivliostyle/VFM_syntax<br>node-sass scss/app.scss theme.css -w -r -q --source-map true --output-style expanded</blockquote>sh: node-sass: command not found<br>npm ERR! code ELIFECYCLE<br>npm ERR! syscall spawn<br>npm ERR! file sh<br>npm ERR! errno ENOENT<br>npm ERR! vfm-syntax@0.0.0 watch:scss: `node-sass scss/app.scss theme.css -w -r -q --source-map true --output-style expanded`<br>npm ERR! spawn ENOENT<br>npm ERR! <br>npm ERR! Failed at the vfm-syntax@0.0.0 watch:scss script.<br>npm ERR! This is probably not a problem with npm. There is likely additional logging output above.<br><br>npm ERR! A complete log of this run can be found in:<br>npm ERR!     /Users/quad9/.npm/_logs/2021-02-13T08_32_34_438Z-debug.log```|
|09:22|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|次のことを試してみてください:<br>• vivliostyle.config.js の `theme: 'my-theme'` を  `theme: 'my-theme/theme.css'` に直す<br>• package.json の `"scripts": {` ... のところを次のものに変える:<br>```  "scripts": {<br>    "build:pdf": "vivliostyle build",<br>    "build:css": "sass my-theme/scss/app.scss my-theme/theme.css",<br>    "build": "run-s build:css build:pdf",<br>    "preview": "vivliostyle preview",<br>    "watch:css": "sass --watch my-theme/scss/app.scss my-theme/theme.css",<br>    "watch": "run-p watch:css preview"<br>  },<pre>• `"dependencies": {`  の下に次のものを加える:</pre>    "npm-run-all": "^4.1.5",<br>    "sass": "^1.32.7",```<br>• `npm install` を実行する<br>これで、Sassなど必要なものがインストールされて、 `npm run build` で SCSS→CSS変換とCSS組版・PDF生成が行われます。また、 `npm run watch` でSCSS→CSS変換付きでPreviewができます。|
|09:22|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Try the following:<br>• Change `theme:'my-theme'` to` theme:'my-theme / theme.css'` in vivliostyle.config.js<br>• Change `" scripts ": {` ... in package.json to:<br>`` `" scripts ": {<br>    "build: pdf": "vivliostyle build",<br>    "build: css": "sass my-theme / scss / app.scss my-theme / theme.css",<br>    "build": "run-s build: css build: pdf",<br>    "preview": "vivliostyle preview",<br>    "watch: css": "sass --watch my-theme / scss / app.scss my-theme / theme.css",<br>    "watch": "run-p watch: css preview"<br>  }, ```<br>• `" dependencies ": Add the following under {`:<br>`` `" npm-run-all ":" ^ 4.1.5 ",<br>    "sass": "^ 1.32.7", `` `<br>• Run `npm install`<br>Now, the necessary things such as Sass are installed, and SCSS → CSS conversion and CSS typesetting / PDF generation are performed with `npm run build`. You can also preview with SCSS → CSS conversion with `npm run watch`.|
|12:51|![](https://secure.gravatar.com/avatar/efc42bfa256a41ecab309898f63f2f12.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png)|takahiro|村上さん<br>検証が遅くなりすいませんでした。<br>適宜変更して解決いたしました。<br>ありがとうございました。|
|12:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Murakami<br>Sorry for the late verification.<br>I changed it as appropriate and solved it.<br>Thank you very much.|
