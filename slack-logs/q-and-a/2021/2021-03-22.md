# 2021-03-22

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|07:31|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|macOS ã«ã¦ `~/Download/ã‚/` ã¨ã„ã†ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’å«ã‚€ãƒ‘ã‚¹ä¸Šã« create-book ã§ `sample` ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ `npm run preview` ã™ã‚‹ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯èµ·å‹•ã•ã‚Œã¾ã™ãŒ JavaScript ã¯ `Uncaught URIError: URI malformed` ã§ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã—ãŸã€‚`~/Download/a/` ã®ã‚ˆã†ã« ASCII ã®ã¿ãªã‚‰æ­£å¸¸å‹•ä½œã—ã¾ã™ã€‚<br><br>FAQ ã‚„ vivliostyle.js ã® issue ã«ãã‚Œã‚‰ã—ã„ã‚‚ã®ã¯ãªã„ã‚ˆã†ã§ã™ãŒæ—¢å‡ºã§ã—ã‚‡ã†ã‹ï¼Ÿã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã“ãç•°ãªã‚Šã¾ã™ãŒä»¥ä¸‹ã¨é–¢é€£ã—ã¦ç¾çŠ¶ã® Vivliostyle ã¨ã—ã¦é ASCII ã®ãƒ‘ã‚¹ã¯é¿ã‘ãŸã»ã†ãŒã‚ˆã„ãªã‚‰ã° FAQ ã«è¨˜è¼‰ã—ã¦ãŠãã¨ã‚ˆã•ãã†ã§ã™ã€‚<br><br>Non-ASCII directory/file is not available. Error: Validation of pubManifest failed. Â· Issue #155 Â· vivliostyle/vivliostyle-cli<br><https://github.com/vivliostyle/vivliostyle-cli/issues/155><br><blockquote>@vivliostyle/cli 3.1.2<br><br>Windows10ä¸Šã§ä»¥ä¸‹ã®`vivliostyle.config.js`ã‚’ä½œæˆã—ã¾ã—ãŸã€‚<br><br><pre>module.exports = {<br>  title: 'test',<br>  entry: ['ãƒ†ã‚¹ãƒˆ.html']<br>};<br></pre><br><br>åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`ãƒ†ã‚¹ãƒˆ.html`ã‚’ä½œæˆã—ãŸä¸Šã§`vivliostyle build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚<br><br><pre>Ã— Error: Validation of pubManifest failed. Please check the schema: C:/vivliostyletest/publication.json<br>    at generateManifest (C:\vivliostyletest\node_modules\@vivliostyle\cli\dist\builder.js:74:15)<br>    at Object.compile (C:\vivliostyletest\node_modules\@vivliostyle\cli\dist\builder.js:163:9)<br>    at build (C:\vivliostyletest\node_modules\@vivliostyle\cli\dist\commands\build.js:56:25)<br>    at processTicksAndRejections (node:internal/process/task_queues:94:5)<br></pre><br><br><https://github.com/vivliostyle/vivliostyle-cli/blob/1f1e48f19d20d53ebe555a5f47f28861959466ac/src/builder.ts#L103|vivliostyle-cli/src/builder.ts><br><br>Line 103 in &lt;/vivliostyle/vivliostyle-cli/commit/1f1e48f19d20d53ebe555a5f47f28861959466ac|1f1e48f&gt;<br><br>  <br>ã‚’ç¢ºèªã—ã€ajv.validateã«æ¸¡ã•ã‚Œã¦ã„ã‚‹publicationã®ä¸­èº«ã‚’å‡ºåŠ›ã—ã¦ã¿ãŸã¨ã“ã‚ã€ä»¥ä¸‹ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚<br><br><pre>{<br>  '@context': [ '<https://schema.org>', '<https://www.w3.org/ns/pub-context>' ],<br>  type: 'Book',<br>  conformsTo: '<https://github.com/vivliostyle/vivliostyle-cli>',<br>  author: '',<br>  dateModified: '2021-03-13T08:45:18.817Z',<br>  name: 'test',<br>  readingOrder: [ { url: 'ãƒ†ã‚¹ãƒˆ.html', title: 'test' } ],<br>  resources: [],<br>  links: []<br>}<br></pre><br><br>validationæ™‚ã«encodeURIã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ‘ã‚¹ãŒæ¸¡ã•ã‚Œã¦ã„ãªã„ã‹ã‚‰ã®ã‚ˆã†ã«è¦‹ãˆãŸã®ã§ã€<br><br><https://github.com/vivliostyle/vivliostyle-cli/blob/1f1e48f19d20d53ebe555a5f47f28861959466ac/src/builder.ts#L49|vivliostyle-cli/src/builder.ts><br><br>Line 49 in &lt;/vivliostyle/vivliostyle-cli/commit/1f1e48f19d20d53ebe555a5f47f28861959466ac|1f1e48f&gt;<br><br>  <br>ã‚’url: encodeURI(entry.path)  <br>ã¨å¤‰æ›´ã—ãŸã¨ã“ã‚ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ã¾ã—ãŸã€‚<br><br>ã¾ãŸã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒNon-ASCIIã®å ´åˆã‚‚åŒæ§˜ã®ç¾è±¡ãŒç™ºç”Ÿã—ã€åŒã˜å‡¦ç½®ã§ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ã¾ã—ãŸã€‚<br><br><pre>module.exports = {<br>  title: 'test',<br>  entry: ['./ãƒ†ã‚¹ãƒˆ/test.html']<br>};<br></pre></blockquote>|
|07:31|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|ğŸ‡¬ğŸ‡§: On macOS, create a project called `sample` with create-book on the path containing the multibyte character` ~ / Download / A / `and` npm run preview` will start the preview, but JavaScript will start` Uncaught URIError An error occurred with: URI malformed`. Only ASCII, such as `~ / Download / a /`, works fine.<br><br>There seems to be no such thing in the FAQ or vivliostyle.js issue, but is it already mentioned? The content of the error is different, but if you should avoid non-ASCII paths as the current Vivliostyle in relation to the following, it seems better to mention it in the FAQ.<br><br>Non-ASCII directory / file is not available. Error: Validation of pubManifest failed. Â· Issue # 155 Â· vivliostyle / vivliostyle-cli<br><https://github.com/vivliostyle/vivliostyle-cli/issues/155>|
|08:31|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|create-book ã§ theme ã« slide ã‚’é¸ã³ã€ãã‚Œã‚’ FAQ ã®ã€Œãƒ†ãƒ¼ãƒã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã«ã¯ï¼Ÿã€ã«å¾“ã£ã¦ CSS ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªçŠ¶æ…‹ã«ã—ã¾ã—ãŸã€‚ãã—ã¦è‰²ã€…ã¨ã„ã˜ã£ã¦ã„ã‚‹ã®ã§ã™ãŒ<br>1. CSS ä¿å­˜æ™‚ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ã•ã›ã‚‹æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br>2. `vivliostyle.config.js` ä¿å­˜æ™‚ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å†èµ·å‹•ã•ã›ãšåæ˜ ã•ã›ã‚‹æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br>3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ (Vivliostyle Viewerï¼Ÿ) ã§ Chromium ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‹ã‚‰è¦ç´ ã‚’æ¢ã™ã¨ã‚¹ã‚¿ã‚¤ãƒ«ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ãŒã€ã“ã®æƒ…å ±ã‚’å…ƒã« CSS ãƒ•ã‚¡ã‚¤ãƒ«ä¸Šã®å®šç¾©ã‚’æ¢ã™ã‚ˆã„æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br>1 ã¯ Markdown ä¿å­˜æ™‚ã¨åŒæ§˜ã®æŒ™å‹•ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚ç¾åœ¨ã¯ CSS ã‚’ä¿å­˜ã—ãŸå¾Œã«æ‰‹å‹•ã§ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™ã€‚2 ã¯è¨­è¨ˆçš„ã«è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ã¯é›£ã—ã„ã¨ã—ã¦ã‚‚æ‰‹å‹•ãƒªãƒ­ãƒ¼ãƒ‰ã§åæ˜ ã•ã‚Œã‚‹ã¨ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚<br><br>3 ã¯ã‚¯ãƒ©ã‚¹åãŒå¤±ã‚ã‚Œã‚‹ã‚ˆã†ãªã®ã§ CSS å´ã¸æ„å›³çš„ã«ãŠã‹ã—ãªè‰²ã‚’æŒ‡å®šã™ã‚‹ãªã©ã—ã¦ã€æ‰‹æ¢ã‚Šã§å¯¾å¿œç®‡æ‰€ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚HTML è¦ç´ ã« `data-original-define="body &gt; section &gt; h2"` ã®ã‚ˆã†ãªæ„Ÿã˜ã§ CSS ã®å…ƒå®šç¾©ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã¨ã‹ã™ã‚‹ã¨ã‚ã‚ŠãŒãŸã„ã§ã™ã­ (ãã†ã„ã†è¦æœ›ã‚’ Core ã® issue ã«æŒ™ã’ã‚‹ã»ã†ãŒã‚ˆã„ï¼Ÿ)ã€‚|
|08:31|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|ğŸ‡¬ğŸ‡§: In create-book, I chose slide as the theme and made it customizable by following the FAQ "How to customize the theme?". And I'm playing around with it<br>1. Is there a way to automatically reload the preview when saving CSS?<br>2. Is there a way to reflect the preview without restarting when saving `vivliostyle.config.js`?<br>3. Looking for an element in Chromium's developer tools in the preview (Vivliostyle Viewer?) Seems to inline the style. Is there a good way to use this information to find the definition in the CSS file?<br>1 expects the same behavior as when saving Markdown. I'm currently saving the CSS and then reloading it manually. 2 is difficult to reload automatically by design, but I would appreciate it if it is reflected by manual reloading.<br><br>3 seems to lose the class name, so I'm trying to find a corresponding part by intentionally specifying a strange color on the CSS side. It would be nice if the original definition of CSS was output to the HTML element like `data-original-define =" body &amp; gt; section &amp; gt; h2 "` (It is better to list such a request in the Core issue). ?).|
|09:51|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|1.ã«ã¤ã„ã¦ã¯ <https://github.com/vivliostyle/vivliostyle-cli/pull/149> ã§ä¿®æ­£ã—ãŸã¤ã‚‚ã‚Šã ã£ãŸã®ãŒä¸å®Œå…¨ã§ãƒã‚°ãŒã‚ã£ãŸã®ã«æ°—ã¥ãã¾ã—ãŸã€‚ä¿®æ­£pull reqã—ã¾ã™ã€‚<br><br>ã“ã®ãƒã‚°ã‚’å›é¿ã™ã‚‹ã«ã¯vivliostyle.config.js ã« `workspaceDir` ã®è¨­å®šã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ã™ã€‚<br><br>2.ã«ã¤ã„ã¦ã¯ã€configã‚’æ›´æ–°ã™ã‚‹ãŸã³ã« vivliostyle preview ã‚’å†èµ·å‹•ã™ã‚‹ã—ã‹ãªã„ã§ã™ã­ã€‚<br><br>3.ã¯è¦æœ›issueã‚’coreã®ã»ã†ã«ã©ã†ã<br><blockquote>Fixes the following problems:<br><br>â€¢ On Windows, `process.cwd()` returns Windows path containing backslashes  <br>    and it causes problem when matching with `startsWith()` to other paths  <br>    that are normalized using forward slashes.<br>â€¢ When config file is not used, `workspaceDir` and `entryContextDir` are  <br>    set to the directory containing the input file. In this condition,  <br>    file changes inside that directory (`p.startsWith(config.workspaceDir)`)  <br>    are ignored, but file changes in the current directory are watched.  <br>    This is contrary to the expected behavior.<br>â€¢ XHTML, EPUB (.epub or .opf), pub-manifest (.json) input are ignored.</blockquote>|
|09:51|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|ğŸ‡¬ğŸ‡§: Regarding 1., I noticed that there was a bug that I intended to fix at <https://github.com/vivliostyle/vivliostyle-cli/pull/149>. Fix pull req.<br><br>To work around this bug, put the `workspaceDir` setting in vivliostyle.config.js.<br><br>Regarding 2., I have no choice but to restart vivliostyle preview every time I update the config.<br><br>3. Please send the requested issue to the core|
|10:15|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|1.ã®ä¿®æ­£ã«ã¤ã„ã¦ã¯pull reqã«ã—ã¾ã—ãŸã®ã§ç¢ºèªãŠé¡˜ã„ã—ã¾ã™ `@akabeko` `@spring-raining` :<br><https://github.com/vivliostyle/vivliostyle-cli/pull/159><br><br>2.ã®ä¿®æ­£ã‚‚ã»ã—ã„ã¨ã“ã‚ã§ã™ã‚ˆã­ã€‚ã©ãªãŸã‹ãŠé¡˜ã„ã—ãŸã„ã§ã™ã€‚<br><blockquote>This is a follow-up fix of <https://github.com/vivliostyle/vivliostyle-cli/pull/149|#149>.</blockquote>|
|10:15|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|ğŸ‡¬ğŸ‡§: Please confirm the correction of 1. as it is a pull req.<br><https://github.com/vivliostyle/vivliostyle-cli/pull/159><br><br>I would also like to see the correction in 2. I would like to ask someone.|
|13:10|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|3 ã«ã¤ã„ã¦ issue ã‚’æ›¸ã“ã†ã¨ã—ã¦æ°—ã¥ã„ãŸã®ã§ã™ãŒã€ä¾‹ãˆã° slide theme ã ã¨ CSS ã‚¯ãƒ©ã‚¹åãŒç™»å ´ã—ãªã„ã®ã§å€‹ã€…ã‚’ãã¡ã‚“ã¨è¦‹ã¦ã‚†ã‘ã°å¯¾å¿œä»˜ã‘ã§ãã¾ã™ã­ã€‚ã¨ã„ã†ã‚ã‘ã§ issue ã¯å‡ºã•ãªã„ã§ãŠãã¾ã™ã€‚|
|13:10|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|ğŸ‡¬ğŸ‡§: I noticed when I tried to write an issue about 3, but for example, in the slide theme, the CSS class name does not appear, so if you look at each one properly, you can associate it. That's why I don't issue an issue.|
