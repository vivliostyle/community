# 2021-04-18

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|21:10|![](https://avatars.slack-edge.com/2021-03-07/1843534807857_00f7c5a10c2fdc7b710d_72.jpg)|takahiro|*質問です。*<br><br><blockquote>環境<br>MacOS 11.2.3<br>node v14.2.0</blockquote>`Vivliostyle CLI` をインストールし `vivliostyle` コマンドを使い、HTMLファイル`index.html`を `Vivliostyle Viewer` で表示させたいです。結果が`Viola print previewer`で表示されますが、これは正常な挙動でしょうか？<br><br>これに関連しまして、`Vivliostyle.js` `Vivliostyle CLI` `Vivliostyle VFM` など新しいバージョンがリリースされた時にどのように対処すればいいのか、また、解説されているサイトがありましたらリンクを教えてください。<br><br>現状の私の環境とバージョンアップを試してみた経緯です。<br><br>```$ vivliostyle -v<br>cli: 3.0.3<br>core: 2.4.2<pre>どうすればいいか分からなかったのですが、npmコマンドでアップデートが出来るか試しました。<br></pre>$ npm update vivliostyle<br>$ vivliostyle -v<br>cli: 3.0.3<br>core: 2.4.2<pre>アップグレードを試すとnpm自体をアップデートするように示唆されたので実行しました。<br></pre>$ npm upgrade vivliostyle<br>   ╭────────────────────────────────────────────────────────────────╮<br>   │                                                                │<br>   │      New major version of npm available! 6.14.8 → 7.10.0       │<br>   │   Changelog: <https://github.com/npm/cli/releases/tag/v7.10.0>   │<br>   │               Run npm install -g npm to update!                │<br>   │                                                                │<br>   ╰────────────────────────────────────────────────────────────────╯<pre>$ npm install -g npm<br>$ npm -v<br>7.10.0改めてアップグレードとアップデートを試しましたが結果が得られませんでした。<br></pre>$ npm upgrade vivliostyle<br>removed 369 packages, and audited 1 package in 4s<br>found 0 vulnerabilities<br>$ vivliostyle -v<br>cli: 3.0.3<br>core: 2.4.2```<br>```$ npm update vivliostyle<br>up to date, audited 1 package in 231ms<br>found 0 vulnerabilities<br>$ vivliostyle -v<br>cli: 3.0.3<br>core: 2.4.2```<br>以上、よろしくお願いします。|
|21:15|![](https://avatars.slack-edge.com/2021-03-07/1843534807857_00f7c5a10c2fdc7b710d_72.jpg)|takahiro|*質問）*<br><br>『CSSページ組版入門』P1・P98〜を参照しました。<br>CSSでは、 `@mediaルール` `@importルール` `@pageルール` によってスクリーンと印刷用にデザインを振り分けることが出来ると知りました。<br><br>そこで、Indesignで組版をする時の要領で、ページにレイアウトグリッドを設定して文章を流し込むという作業をCSS組版で置き換えてみました。（<https://github.com/vivlio-kumihan/vivlio-kumihan|コード置き場>）<br><br><blockquote>*__仕様__*</blockquote>版：　B5<br>本文：　14Q<br>行送り：　24H<br>行文字数：40字<br>行数：　36行<br><br>``` css<br>@page {<br>    size: 182mm 257mm;　&lt;=JISB5にすると縦が1mm少なかったので数値で指定した。<br>    marks: crop cross;<br>    bleed: 3mm;<br>    margin: 21mm 21mm 20mm 21mm;<br>}<br><br>body {<br>    margin: 0mm 0mm;<br>    padding: 0mm 0mm;<br>    color:black;<br>    background-color:rgba(0, 0, 0, 0.1);<br>}<br><br>p {<br>    margin: 0em;<br>    font-family: YuMin_36pKn-Medium;<br>    font-size: 3.5mm;<br>    line-height: 6mm;<br>    text-align:justify;<br>}```<br>Vivliostyleで表示させたものをPDFにしたものと、それにIndesignで作ったもの（文字色：赤）を重ね合わせた画像を添付します。<br><br>文章が入るグレー表示させている領域に文章の36行が、Indesignでやったときのようにきっちり治りません。一行分行送りがおかしいです。対処方法はありませんでしょうか？　よろしくお願いします。<br>https://vivliostyle.slack.com/files/U01512BUC6T/F01UV4LEF8C/vivliostyle_______________.jpg<br>https://vivliostyle.slack.com/files/U01512BUC6T/F01U86DS25D/vivliostyle___indesign______________________________.jpg|
|21:25|![](https://avatars.slack-edge.com/2021-03-07/1843534807857_00f7c5a10c2fdc7b710d_72.jpg)|takahiro|*質問）*<br><br>五月雨式で申し訳ありません。<br>先程の質問の続きです。<br><br>『CSSページ組版入門』P101〜でヘッダーとノンブルの作成方法を学びました。<br><br>これを参照し、先程質問したページの仕様については、行数を二行減らし34行で設定で改変を試みました。<br><br>今度もやはり設定したマージンの枠内（Indesign風にいうとドキュメントグリッド内）にしっかり収まったかと一瞬思ったのですが、やはり一行分多く入ってしまうようです。<br><br>Indesignの文字組みを赤色に着色しレイアウトに重ねたものを添付します。<br><br>現状のCSS組版では、行送りに関しては数値指定できないものとして、紙面設計する際に留意するしかないという認識でよろしいでしょうか？<br>https://vivliostyle.slack.com/files/U01512BUC6T/F01UNVAKNFL/vivliostyle________________header_______________________________________________________.jpg|
