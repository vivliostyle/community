# 2021-05-15

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|02:04|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|vivliosrtyle-cli に関する質問です。<br><br>create-book で作成したプロジェクトをコピーして `package.json` と `publication.json` を書き換えたのですが `vivliostyle preview` を実行すると `publication.json` の `name` がコピー元のものに書き換わってしまいます。`node_moduels` などを削除してから `npm i` しても同様です。<br><br>`publication.json` に関する設定はどこかにキャッシュされているのでしょうか？もしそうだとしたらそれを削除する方法はありますか？|
|02:04|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: I have a question about vivliosrtyle-cli.<br><br>I copied the project created by create-book and rewrote `package.json` and` publication.json`, but when I run `vivliostyle preview`,` name` of `publication.json` becomes the copy source. It will be rewritten. The same is true if you remove `node_moduels` etc. and then` npm i`.<br><br>Is the setting related to `publication.json` cached somewhere? If so, is there a way to remove it?|
|02:05|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|`name` だけでなく `author` もですね。これも手動編集したのにプレビュー起動時にコピー元へ戻されてしまいます。|
|02:05|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: Not only `name` but also` author`. Even though I edited this manually, it is restored to the copy source when the preview is started.|
|02:08|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|すみません、質問しておいてなんですが `vivliostyle.config.js` を書き換えるのを忘れていました。というわけで自己解決です。|
|02:08|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: I'm sorry, I asked you a question, but I forgot to rewrite `vivliostyle.config.js`. That's why it's self-solving.|
|02:21|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|buildやpreview時には毎回configの情報を元に `publication.json` を生成しているのでそれは意図した動作です。解決できてよかったです :+1:|
|02:21|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: It is the intended behavior because it generates `publication.json` based on the config information every time build or preview. I'm glad I was able to solve it: + 1:|
|02:47|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|そういえば `publication.json` は自動生成されるのですよね。であれば Git のコミット対象から外しておいたほうがよいのでしょうか。`vivliostyle.config.js` や Markdown の `title` を変更しなくても `dateModified` が常に更新されて差分となるので。|
|02:47|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: By the way, `publication.json` is automatically generated, isn't it? If so, is it better to exclude it from Git's commit target? Because `dateModified` is constantly updated and diffed without changing` vivliostyle.config.js` or Markdown's `title`.|
|02:58|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|ソフトウェア開発ではそれがセオリーですが、今の所デフォルトではgitignoreには `publication.json` を含めていない想定です。これは、`.md` からconvertできるはずの `.html` をgitignoreに含めていないのと同じ理由で、原稿生成環境のスナップショットの意味合いもあります (もちろんignoreしてしまってもかまいません)|
|02:58|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: That's the theory in software development, but for now it's assumed that gitignore doesn't include `publication.json` by default. This also has implications for a snapshot of the manuscript generation environment for the same reason that gitignore doesn't include `.html`, which should be convertible from` .md` (you can of course ignore it).|
|02:59|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|ありがとうございます。そういう事情があったのですね。確かにスナップショットとして生成物を保存するのは重要ですね。|
|02:59|![](https://avatars.slack-edge.com/2021-03-01/1807880975282_5c8ad89e782096649baa_72.png)|Kiara : Language Translation Bot|🇬🇧: Thank you very much. There was such a situation. Certainly it's important to save the product as a snapshot.|
