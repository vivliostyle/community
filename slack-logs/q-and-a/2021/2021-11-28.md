# 2021-11-28

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|09:44|![](https://avatars.slack-edge.com/2021-11-28/2760484838823_4e3ce5c4a1c8bdf8d04e_72.png)|Gen|ã¯ã˜ã‚ã¾ã—ã¦ã€C99ã«å‘ã‘ã¦Vivliostyleã§PDFä½œæˆã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚<br>åˆæ­©çš„ãªè³ªå•ã§æç¸®ã§ã™ãŒã€`vivliostyle build` ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€ä¸‹è¨˜ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¾ã—ãŸã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šã‚Šã«å–ã‚‹ã¨ã€HTMLâ†’PDFã®æ®µéšã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†èª­ã‚ã‚‹ã®ã§ã€å…ƒã«ãªã‚‹Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦HTMLã‚’ä¿®æ­£ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€`"line":702`ã¯ã©ã®éƒ¨åˆ†ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªå¯èƒ½ã§ã—ã‚‡ã†ã‹ã€‚<br>è¤‡æ•°ã‚ã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆè¨ˆã—ãŸéš›ã®è¡Œã‚’è¦‹ã«è¡Œã‘ã°ã„ã„ã‹ã¨è€ƒãˆã€ä¸­é–“ç”Ÿæˆã•ã‚ŒãŸHTMLã‚’é ­ã‹ã‚‰è¡Œæ•°ã‚’è¶³ã—ã¦ã„ã£ãŸã¨ã“ã‚ã€è©²å½“éƒ¨åˆ†ã¯headã‚¿ã‚°å†…ã ã£ãŸã®ã§ã€å¯èƒ½æ€§ã¯ä½ãã†ã ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚<br>```â—¡ Building PDFTrying to parse invalid object: {"line":702,"column":1797,"offset":25288371})<br>Invalid object ref: 85 0 R<br>âœ– Error: Failed to parse PDF document (line:702 col:1797 offset=25288371): Failed to parse invalid PDF object<br>    at PDFInvalidObjectParsingError.PDFParsingError [as constructor] (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/errors.js:229:24)<br>    at new PDFInvalidObjectParsingError (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/errors.js:262:24)<br>    at PDFParser.tryToParseInvalidIndirectObject (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/parser/PDFParser.js:181:19)<br>    at PDFParser.&lt;anonymous&gt; (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/parser/PDFParser.js:209:30)<br>    at step (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:141:27)<br>    at Object.throw (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:122:57)<br>    at rejected (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:113:69)```|
|09:44|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡¬ğŸ‡§: Nice to meet you, I'm trying to create a PDF in Vivliostyle for C99.<br>Excuse me for the rudimentary question, but when I ran `vivliostyle build`, I got the following error message: If you take it according to the message, it can be read as an error at the stage of HTML â†’ PDF, so I am trying to edit the original Markdown file and correct the HTML, but which part is `" line ": 702`? Is it possible to confirm that it points to?<br>I thought that I should go to see the line when summing multiple HTML files, and when I added the number of lines from the beginning of the intermediately generated HTML, the corresponding part was in the head tag, so the possibility is low. I decided so.<br>`` `â—¡ Building PDFTrying to parse invalid object: {"line ": 702," column ": 1797," offset ": 25288371})<br>Invalid object ref: 85 0 R<br>âœ– Error: Failed to parse PDF document (line: 702 col: 1797 offset = 25288371): Failed to parse invalid PDF object<br>    at PDFInvalidObjectParsingError.PDFParsingError [as constructor] (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/errors.js:229:24)<br>    at new PDFInvalidObjectParsingError (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/errors.js:262:24)<br>    at PDFParser.tryToParseInvalidIndirectObject (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/parser/PDFParser.js:181:19)<br>    at PDFParser. &amp; lt; anonymous &amp; gt; (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/cjs/core/parser/PDFParser.js:209:30)<br>    at step (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:141:27)<br>    at Object.throw (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:122:57)<br>    at rejected (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/pdf-lib/node_modules/tslib/tslib.js:113:69) `` `|
|10:17|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|ã“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã¨ã€PDFã®å¾Œå‡¦ç†ï¼ˆChromiumã§å‡ºåŠ›ã•ã‚ŒãŸPDFã«ãƒ¡ã‚¿æƒ…å ±ã‚’åŠ ãˆã‚‹ãªã©ï¼‰ã®ãŸã‚ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª pdf-lib ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã„ã¾ã™ã€‚`"line":702` ã¯PDFãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã®å•é¡Œç®‡æ‰€ã§ã—ã‚‡ã†ã€‚<br>`vivliostyle preview` ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã—ã¦ãã“ã‹ã‚‰å°åˆ·â†’PDFä¿å­˜ã—ãŸå ´åˆã¯æ­£å¸¸ã«PDFãŒã§ãã¾ã™ã‹ï¼Ÿ|
|10:17|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡¬ğŸ‡§: If you see this error message, there is an error in the library pdf-lib used for PDF post-processing (such as adding meta information to the PDF output by Chromium). `" line ": 702` is probably the problem in the PDF file.<br>If I use `vivliostyle preview` to preview and print from there â†’ save as PDF, can PDF be created normally?|
|10:55|![](https://avatars.slack-edge.com/2021-11-28/2760484838823_4e3ce5c4a1c8bdf8d04e_72.png)|Gen|`@shinyu` å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚WSL2ã§`vivliostyle preview` ãŒå‹•ã„ã¦ãã‚Œãªã„ã®ã§ã€ç¢ºèªã§ããªã„çŠ¶æ³ã§ã™ã€‚ã“ã¡ã‚‰ã¯Puppeteerã®ã‚¨ãƒ©ãƒ¼ãªã®ã§ã€ã“ã¡ã‚‰ã§ä¼ºã†ã®ã¯ã‚¹ãƒ¬é•ã„ã‹ãªã¨æ€ã£ã¦ãŠã‚Šã¾ã™ã€‚ï¼ˆå‚è€ƒã¾ã§ã«ã‚¨ãƒ©ãƒ¼ã‚’æ·»ä»˜ã—ã¾ã™ï¼‰<br><br>ãªãŠã€äººåŠ›ã§å•é¡Œç®‡æ‰€ç‰¹å®šï¼ˆç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ10MBä»¥ä¸Šã§å¤§ãã™ããŸã‚ˆã†ã§ã™ï¼‰ã¯ã§ãã¾ã—ãŸ<br>```âœ– Error: Failed to launch the browser process!<br>[6564:6564:1128/195335.957282:FATAL:<http://gtk_compat.cc|gtk_compat.cc>(45)] Check failed: !check || library. <br>#0 0x55f656c47f49 base::debug::CollectStackTrace()<br>#1 0x55f656bb1933 base::debug::StackTrace::StackTrace()<br>#2 0x55f656bc5500 logging::LogMessage::~LogMessage()<br>#3 0x55f656bc604e logging::LogMessage::~LogMessage()<br>#4 0x55f659c7cc6c gtk::(anonymous namespace)::LoadGtkImpl()<br>#5 0x55f659c7c90b gtk::LoadGtk()<br>#6 0x55f659c778ac gtk::GtkUi::GtkUi()<br>#7 0x55f659c7771b BuildGtkUi()<br>#8 0x55f659b73268 ChromeBrowserMainExtraPartsViewsLinux::ToolkitInitialized()<br>#9 0x55f6567d0f59 ChromeBrowserMainParts::ToolkitInitialized()<br>#10 0x55f6548a8133 content::BrowserMainLoop::InitializeToolkit()<br>#11 0x55f6548a8acd content::BrowserMainRunnerImpl::Initialize()<br>#12 0x55f6548a4bdb content::BrowserMain()<br>#13 0x55f65676246a content::ContentMainRunnerImpl::RunBrowser()<br>#14 0x55f656761fdd content::ContentMainRunnerImpl::Run()<br>#15 0x55f65675f7cb content::RunContentProcess()<br>#16 0x55f6567600cd content::ContentMain()<br>#17 0x55f6535d2b11 ChromeMain<br>#18 0x7ff3a838a0b3 __libc_start_main<br>#19 0x55f6535d292a _start<br><br>[1128/195336.069255:ERROR:<http://file_io_posix.cc|file_io_posix.cc>(144)] open /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq: No such file or directory (2)<br>[1128/195336.069325:ERROR:<http://file_io_posix.cc|file_io_posix.cc>(144)] open /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq: No such file or directory (2)<br>Received signal 6<br>#0 0x55f656c47f49 base::debug::CollectStackTrace()<br>#1 0x55f656bb1933 base::debug::StackTrace::StackTrace()<br>#2 0x55f656c47a21 base::debug::(anonymous namespace)::StackDumpSignalHandler()<br>#3 0x7ff3a945d3c0 (/usr/lib/x86_64-linux-gnu/libpthread-2.31.so+0x153bf)<br>#4 0x7ff3a83a918b gsignal<br>#5 0x7ff3a8388859 abort<br>#6 0x55f656c46cb5 base::debug::BreakDebugger()<br>#7 0x55f656bc5927 logging::LogMessage::~LogMessage()<br>#8 0x55f656bc604e logging::LogMessage::~LogMessage()<br>#9 0x55f659c7cc6c gtk::(anonymous namespace)::LoadGtkImpl()<br>#10 0x55f659c7c90b gtk::LoadGtk()<br>#11 0x55f659c778ac gtk::GtkUi::GtkUi()<br>#12 0x55f659c7771b BuildGtkUi()<br>#13 0x55f659b73268 ChromeBrowserMainExtraPartsViewsLinux::ToolkitInitialized()<br>#14 0x55f6567d0f59 ChromeBrowserMainParts::ToolkitInitialized()<br>#15 0x55f6548a8133 content::BrowserMainLoop::InitializeToolkit()<br>#16 0x55f6548a8acd content::BrowserMainRunnerImpl::Initialize()<br>#17 0x55f6548a4bdb content::BrowserMain()<br>#18 0x55f65676246a content::ContentMainRunnerImpl::RunBrowser()<br>#19 0x55f656761fdd content::ContentMainRunnerImpl::Run()<br>#20 0x55f65675f7cb content::RunContentProcess()<br>#21 0x55f6567600cd content::ContentMain()<br>#22 0x55f6535d2b11 ChromeMain<br>#23 0x7ff3a838a0b3 __libc_start_main<br>#24 0x55f6535d292a _start<br>  r8: 0000000000000000  r9: 00007ffe14c796f0 r10: 0000000000000008 r11: 0000000000000246<br> r12: 00003db8002b9540 r13: 00007ffe14c79950 r14: 00003db8002b9550 r15: aaaaaaaaaaaaaaaa<br>  di: 0000000000000002  si: 00007ffe14c796f0  bp: 00007ffe14c79940  bx: 00007ff3a71c8500<br>  dx: 0000000000000000  ax: 0000000000000000  cx: 00007ff3a83a918b  sp: 00007ffe14c796f0<br>  ip: 00007ff3a83a918b efl: 0000000000000246 cgf: 002b000000000033 erf: 0000000000000000<br> trp: 0000000000000000 msk: 0000000000000000 cr2: 0000000000000000<br>[end of stack trace]<br><br><br>TROUBLESHOOTING: <https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md><br><br>    at onClose (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:197:20)<br>    at ChildProcess.&lt;anonymous&gt; (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:188:79)<br>    at ChildProcess.emit (node:events:402:35)<br>    at Process.ChildProcess._handle.onexit (node:internal/child_process:290:12)```|
|10:55|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡¬ğŸ‡§:  thank you for your answer. The `vivliostyle preview` doesn't work on WSL2, so I can't confirm it. This is a Puppeteer error, so I think it's a mistake to ask here. (An error is attached for reference)<br><br>In addition, I was able to identify the problematic part manually (it seems that the image file size was 10 MB or more and it was too large).<br>`` `âœ–ï¸ Error: Failed to launch the browser process!<br>[6564: 6564: 1128/195335.957282: FATAL: <http://gtk_compat.cc|gtk_compat.cc> (45)] Check failed:! check || library.<br># 0 0x55f656c47f49 base :: debug :: CollectStackTrace ()<br># 1 0x55f656bb1933 base :: debug :: StackTrace :: StackTrace ()<br># 2 0x55f656bc5500 logging :: LogMessage :: ~ LogMessage ()<br># 3 0x55f656bc604e logging :: LogMessage :: ~ LogMessage ()<br># 4 0x55f659c7cc6c gtk :: (anonymous namespace) :: LoadGtkImpl ()<br># 5 0x55f659c7c90b gtk :: LoadGtk ()<br># 6 0x55f659c778ac gtk :: GtkUi :: GtkUi ()<br># 7 0x55f659c7771b BuildGtkUi ()<br># 8 0x55f659b73268 ChromeBrowserMainExtraPartsViewsLinux :: ToolkitInitialized ()<br># 9 0x55f6567d0f59 ChromeBrowserMainParts :: ToolkitInitialized ()<br># 10 0x55f6548a8133 content :: BrowserMainLoop :: InitializeToolkit ()<br># 11 0x55f6548a8acd content :: BrowserMainRunnerImpl :: Initialize ()<br># 12 0x55f6548a4bdb content :: BrowserMain ()<br># 13 0x55f65676246a content :: ContentMainRunnerImpl :: RunBrowser ()<br># 14 0x55f656761fdd content :: ContentMainRunnerImpl :: Run ()<br># 15 0x55f65675f7cb content :: RunContentProcess ()<br># 16 0x55f6567600cd content :: ContentMain ()<br># 17 0x55f6535d2b11 ChromeMain<br># 18 0x7ff3a838a0b3 __libc_start_main<br># 19 0x55f6535d292a _start<br><br>[1128/195336.069255: ERROR: <http://file_io_posix.cc|file_io_posix.cc> (144)] open /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq: No such file or directory (2)<br>[1128/195336.069325: ERROR: <http://file_io_posix.cc|file_io_posix.cc> (144)] open /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq: No such file or directory (2)<br>Received signal 6<br># 0 0x55f656c47f49 base :: debug :: CollectStackTrace ()<br># 1 0x55f656bb1933 base :: debug :: StackTrace :: StackTrace ()<br># 2 0x55f656c47a21 base :: debug :: (anonymous namespace) :: StackDumpSignalHandler ()<br># 3 0x7ff3a945d3c0 (/usr/lib/x86_64-linux-gnu/libpthread-2.31.so+0x153bf)<br># 4 0x7ff3a83a918b gsignal<br># 5 0x7ff3a8388859 abort<br># 6 0x55f656c46cb5 base :: debug :: BreakDebugger ()<br># 7 0x55f656bc5927 logging :: LogMessage :: ~ LogMessage ()<br># 8 0x55f656bc604e logging :: LogMessage :: ~ LogMessage ()<br># 9 0x55f659c7cc6c gtk :: (anonymous namespace) :: LoadGtkImpl ()<br># 10 0x55f659c7c90b gtk :: LoadGtk ()<br># 11 0x55f659c778ac gtk :: GtkUi :: GtkUi ()<br># 12 0x55f659c7771b BuildGtkUi ()<br># 13 0x55f659b73268 ChromeBrowserMainExtraPartsViewsLinux :: ToolkitInitialized ()<br># 14 0x55f6567d0f59 ChromeBrowserMainParts :: ToolkitInitialized ()<br># 15 0x55f6548a8133 content :: BrowserMainLoop :: InitializeToolkit ()<br># 16 0x55f6548a8acd content :: BrowserMainRunnerImpl :: Initialize ()<br># 17 0x55f6548a4bdb content :: BrowserMain ()<br># 18 0x55f65676246a content :: ContentMainRunnerImpl :: RunBrowser ()<br># 19 0x55f656761fdd content :: ContentMainRunnerImpl :: Run ()<br># 20 0x55f65675f7cb content :: RunContentProcess ()<br># 21 0x55f6567600cd content :: ContentMain ()<br># 22 0x55f6535d2b11 ChromeMain<br># 23 0x7ff3a838a0b3 __libc_start_main<br># 24 0x55f6535d292a _start<br>  r8: 0000000000000000 r9: 00007ffe14c796f0 r10: 0000000000000008 r11: 0000000000000246<br> r12: 00003db8002b9540 r13: 00007ffe14c79950 r14: 00003db8002b9550 r15: aaaaaaaaaaaaaaaa<br>  di: 0000000000000002 si: 00007ffe14c796f0 bp: 00007ffe14c79940 bx: 00007ff3a71c8500<br>  dx: 0000000000000000 ax: 0000000000000000 cx: 00007ff3a83a918b sp: 00007ffe14c796f0<br>  ip: 00007ff3a83a918b efl: 0000000000000246 cgf: 002b000000000033 erf: 0000000000000000<br> trp: 0000000000000000 msk: 0000000000000000 cr2: 0000000000000000<br>[end of stack trace]<br><br><br>TROUBLESHOOTING: <https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md><br>|
|10:55|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|    at onClose (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js: 197: 20)<br>    at ChildProcess. &amp; lt; anonymous &amp; gt; (/usr/local/lib/node_modules/@vivliostyle/cli/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:188:79)<br>    at ChildProcess.emit (node: events: 402:35)<br>    at Process.ChildProcess._handle.onexit (node: internal / child_process: 290: 12) `` ``|
|11:58|![](https://avatars.slack-edge.com/2021-11-28/2760484838823_4e3ce5c4a1c8bdf8d04e_72.png)|Gen|WSL2ã§GUIã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã¨ã“ã‚ã€previewå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚å…ƒã®ç”»åƒã‚’å†åº¦å‚ç…§ã—ã¦è©¦ã—ãŸã¨ã“ã‚ã€Previewâ†’DLå¯èƒ½ã§ã—ãŸã€‚<br>ã¾ãŸã€Buildã®æ–¹ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãç›´ã—ãŸã ã‘ã§æˆåŠŸã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸâ€¦ãŠé¨’ãŒã›ã—ã¾ã—ãŸ<br>`@shinyu`|
|11:58|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡¬ğŸ‡§: When I made the GUI application available on WSL2, it became possible to preview. When I referred to the original image again and tried it, Preview â†’ DL was possible.<br>Also, Build is now successful just by repositioning the files ...<br>|
