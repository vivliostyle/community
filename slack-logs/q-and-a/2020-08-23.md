# 2020-08-23

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|03:48|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|友人が Windows 環境で Vivliostyle を使おうとしているのですが Ghostscript をインストールしても `--press-ready` オプションを付けると `Error: 'gs' command missing. Install Ghostscript on your machine.` になるとのことでした。前に本 Slack でも同じような話題があったようなので  `ghostscript` で検索してみましたが Windows については解決に至っていないようでした。<br><br>Vivliostyle の「使ってみる | Vivliostyle」 <https://vivliostyle.org/ja/getting-started/> には詳細を <https://github.com/vibranthq/press-ready/blob/master/README.md> へ委ねていますが、そちらには Ghostscript セットアップについて Windows は解説されていません。エラー メッセージと同様に macOS (brew) と Ubuntu (apt-get) のみです。<br><br>以上を踏まえて質問なのですが、どなたか Windows 環境で `--press-ready` オプション付きの Vivliostyle による PDF 出力に成功した方はいらっしゃいますでしょうか？<br><blockquote>Vivliostyle — open source, web browser based CSS typesetting engine project</blockquote><br><blockquote><pre>&lt;h1 align="center"&gt;<br>  🚀 press-ready<br>  &lt;br/&gt;<br>  &lt;img alt="screencast" src="https://github.com/vibranthq/press-ready/blob/master/.github/screencast.gif?raw=true"&gt;<br>&lt;/h1&gt;<br><br><blockquote>Make your PDF compliant with press-ready PDF/X-1a.</blockquote>![npm: version](<https://badgen.net/npm/v/press-ready>)<br>![npm: total downloads](<https://badgen.net/npm/dt/press-ready>)<br>[![Build Status](<https://travis-ci.com/vibranthq/press-ready.svg?branch=master>)](<https://travis-ci.com/vibranthq/press-ready>)<br>[![Codacy Badge](<https://app.codacy.com/project/badge/Grade/2c6709d994ab4526af91d11f9ef77193>)](<https://www.codacy.com/gh/vibranthq/press-ready?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=vibranthq/press-ready&amp;utm_campaign=Badge_Grade>)<br>[![Total alerts](<https://img.shields.io/lgtm/alerts/g/vibranthq/press-ready.svg?logo=lgtm&amp;logoWidth=18>)](<https://lgtm.com/projects/g/vibranthq/press-ready/alerts/>)<br><br>[🇯🇵 日本語](README.ja.md)<br><br>## Table of Contents<br><br>- [Install](#install)<br>- [Usage](#usage)<br>- [Tips](#tips)<br>- [Advanced Usage](#advanced-usage)<br>- [Contribution](#contribution)<br><br>## Install<br><br>### via Docker 🐳 (Recommended)<br><br>Pull `vibranthq/press-ready` image from [Docker Hub](<https://hub.docker.com/r/vibranthq/press-ready/>).<br></pre>bash<br>docker pull vibranthq/press-ready<br><pre><br>then assign an alias for `press-ready`:<br></pre>bash<br>alias press-ready="docker run --rm -it -v \$PWD:/workdir vibranthq/press-ready"<br><pre><br>### via npm 📦<br></pre>bash<br>npm install -g press-ready # npm<br>yarn global add press-ready # yarn<br><pre><br>and install system dependencies to run `press-ready`.<br><br>#### macOS<br></pre>bash<br>brew install poppler ghostscript<br><pre><br>#### Ubuntu<br></pre>bash<br>apt-get install poppler-utils ghostscript<br><pre><br>## Usage<br><br>Run `press-ready` with `-i, --input`. If `-o, --output` is missing, `output.pdf` going to be used for default output path.<br></pre><br>press-ready build -i &lt;input.pdf&gt; -o &lt;output.pdf&gt;<br><pre><br>Run with `--help` for the help.<br></pre>bash<br>❯ press-ready --help<br>press-ready &lt;command&gt;<br><br>Commands:<br>  press-ready build         build PDF<br>  press-ready lint &lt;input&gt;  lint PDF<br><br>Options:<br>  --version  Show version number                                       [boolean]<br>  --help     Show help                                                 [boolean]<br><pre><br>### Options<br><br>#### Color Mode<br><br>Press-ready will use **CMYK** by default. Give `--gray-scale` option to let them use **Grayscale** instead.<br></pre>bash<br>pres-ready build \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --gray-scale<br><pre><br>#### Boundary Boxes<br><br>Option `--boundary-boxes` will build TrimBox, CropBox and BleedBox on a generated PDF.<br></pre>bash<br>press-ready build \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --boundary-boxes<br><pre><br>#### Outlined Fonts<br><br>You might not want to use this option since press-ready automatically guess whether embedded fonts should be outlined.<br>However, you can still control this behavior by passing `--enforce-outline` or `--no-enforce-outline`.<br></pre>bash<br>press-ready bulid \<br>  --input ./input.pdf \<br>  --output ./output.pdf \<br>  --enforce-outline<br><pre><br>#### Color Profile<br><br>Currently, there is only support for **Japan 2001 Coated**. If you have any suggestions, please consider submitting an issue.<br><br>## Tips<br><br>### Lint PDF<br></pre>bash<br>press-ready lint ./input.pdf<br><pre><br>`press-ready lint` command produces lint result on specified PDF.<br></pre><br>==&gt; Linting metadata for './cli/test/fixture/review.pdf'<br>==&gt; Title Re:VIEWテンプレート<br>==&gt; Page No. 8<br>==&gt; PDF version 1.5<br>==&gt; TrimBox 48.19,66.61,467.72,661.89<br>==&gt; BleedBox 39.68,58.11,476.22,670.39<br>==&gt; Listing fonts<br>name                                      type         embedded  subset<br>ORFHCM+NimbusSanL-Regu                    Type 1C      yes       yes<br>JCEWND+NimbusSanL-Bold                    Type 1C      yes       yes<br>ASNLWJ+NotoSansCJKjp-Bold-Identity-H      CID Type 0C  yes       yes<br>HPDDST+LMRoman9-Regular                   Type 1C      yes       yes<br>RJMBNU+NotoSerifCJKjp-Regular-Identity-H  CID Type 0C  yes       yes<br>==&gt; Every font is properly embedded or no fonts embedded<br><pre><br>### Pull resource from AWS S3<br><br><blockquote>! This feature is not yet available in press-ready v2.<br>If you need this feature, use press-ready v1 (`vibranthq/pdfx`) image instead.</blockquote>Just run with S3 URL: `docker run -t vibranthq/press-ready &lt;input s3url&gt; &lt;output s3url&gt;`.<br><br>For fetching and uploading AWS S3 resources, you need to set env var `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.<br></pre>bash<br>docker run --rm -it \<br>  -e AWS_ACCESS_KEY_ID=&lt;aws_key_id&gt; \<br>  -e AWS_SECRET_ACCESS_KEY=&lt;aws_secret&gt; \<br>  vibranthq/pdfx <s3://bucket/input.pdf> <s3://bucket/output.pdf><br><pre><br>## Advanced Usage<br><br>### Heroku<br><br>To run `press-ready` on Heroku, make sure you add [heroku-buildpack-xpdf](<https://github.com/matt-note/heroku-xpdf-buildpack>).<br><br>## Contribution<br><br>PRs are welcome. Make sure to do `make test` before filing pull requests.<br><br>### Development Build<br></pre>bash<br>make build<br>make test<br><pre><br>## Blogs<br><br>- [press-ready - PDF を PDF/X-1a に変換 MOONGIFT](<https://www.moongift.jp/2019/05/press-ready-pdf%E3%82%92pdfx-1a%E3%81%AB%E5%A4%89%E6%8F%9B/>)<br><br>## Contributors ✨<br><br>Thanks goes to these wonderful people ([emoji key](<https://allcontributors.org/docs/en/emoji-key>)):<br><br>&lt;!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section --&gt;<br>&lt;!-- prettier-ignore-start --&gt;<br>&lt;!-- markdownlint-disable --&gt;<br>&lt;table&gt;<br>  &lt;tr&gt;<br>    &lt;td align="center"&gt;&lt;a href="https://uechi.io"&gt;&lt;img src="https://avatars0.githubusercontent.com/u/431808?v=4" width="100px;" alt="Yasuaki Uechi"/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Yasuaki Uechi&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href="https://github.com/vibranthq/press-ready/commits?author=uetchy" title="Code"&gt;💻&lt;/a&gt; &lt;a href="https://github.com/vibranthq/press-ready/commits?author=uetchy" title="Documentation"&gt;📖&lt;/a&gt;&lt;/td&gt;<br>    &lt;td align="center"&gt;&lt;a href="http://kmuto.jp/"&gt;&lt;img src="https://avatars2.githubusercontent.com/u/183523?v=4" width="100px;" alt="Kenshi Muto"/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Kenshi Muto&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href="https://github.com/vibranthq/press-ready/commits?author=kmuto" title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;<br>  &lt;/tr&gt;<br>&lt;/table&gt;<br><br>&lt;!-- markdownlint-enable --&gt;<br>&lt;!-- prettier-ignore-end --&gt;<br><br>&lt;!-- ALL-CONTRIBUTORS-LIST:END --&gt;<br><br>This project follows the [all-contributors](<https://github.com/all-contributors/all-contributors>) specification. Contributions of any kind welcome!<br></pre></blockquote>|
|03:48|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: My friend wants to use Vivliostyle in a Windows environment, but even if Ghostscript is installed, if I add the `--press-ready` option, it becomes `Error:'gs' command missing. Install Ghostscript on your machine.`. It was that. There seems to have been a similar topic in this Slack before, so I searched with `ghostscript`, but it seems that it has not been solved for Windows.<br><br>Vivliostyle's "Try It | Vivliostyle" <https://vivliostyle.org/en/getting-started/> for details <https://github.com/vibranthq/press-ready/blob/master/README. md>, but there is no description of Windows about Ghostscript setup there. Only macOS (brew) and Ubuntu (apt-get) as well as error messages.<br><br>Based on the above, the question is, is there anyone who succeeded in PDF output by Vivliostyle with the `--press-ready` option in the Windows environment?|
|03:51|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|補足。少なくとも現時点の「使ってみる」と press-ready ドキュメントには Windows 環境上の Ghostscript セットアップ方法がないため、<br>• サポートしているのなら解説を追記 (Vivliostyle 側の資料で補足でも可)<br>• サポートしていない、または将来対応ならその旨<br>を記載したほうがよいと思います|
|03:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Supplement. At least at this point in the "Getting Started" and press-ready documentation there is no Ghostscript setup on Windows environment,<br>• Add commentary if supported (may be supplemented by Vivliostyle side material)<br>• Not supported or future support<br>I think it is better to describe|
|04:16|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|パス設定かもしれません。PowerShell 上で `gs --version` を実行してもコマンドがないというエラーになるそうなので。これを踏まえパス通しを試してもらうことにしました。以下、参考。<br><br>Ghostscript/Windows - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br>を参考|
|04:16|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: It may be a path setting. When I run `gs --version` on PowerShell, I get an error that there is no command. Based on this, I decided to try Pass Through. Below, reference.<br><br>Ghostscript/Windows-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br>Refer to|
|10:02|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Windowsでテストしました。press-readyは `gs` というコマンドを実行するようになっているのですが、Windows版ghostscriptのCLIの実行ファイル名は `gswin64c.exe` （64bit版の場合）なのでPATHを通したうえで、`gs.exe` に名前を変えて試してみました。<br><br>これで `vivliostyle build --press-ready` から ghostscript が呼ばれるようになったのですが、ghostscript でエラーが起きます。issue登録しました。<br><br><https://github.com/vivliostyle/vivliostyle-cli/issues/72><br><blockquote>Testing the `--press-ready` option on WIndows,<br><br>First, I tested `vivliostyle build --press-ready` without ghostscript installed,<br><br><pre>$ vivliostyle build --press-ready<br>✔ manuscript.md 吾輩は猫である。<br>� Running press-ready<br>Error: 'gs' command missing. Install Ghostscript on your machine.<br>macOS:<br>$ brew install ghostscript<br><br>Ubuntu:<br>$ apt-get install ghostscript<br></pre><br><br>No instruction for Windows unfortunately, but we can download and install ghostscript from <https://www.ghostscript.com/download/gsdnld.html|https://www.ghostscript.com/download/gsdnld.html>.<br><br>I installed "Ghostscript 9.52 for Windows (64 bit)" with "GNU Affero General Public License".<br><br>Ghostscript binary files are installed in `C:\Program Files\gs\gs9.52\bin`, and the CLI executable is `C:\Program Files\gs\gs9.52\bin\gswin64c.exe`.<br><br>I added `C:\Program Files\gs\gs9.52\bin` to the PATH and copied `gswin64c.exe` to `gs.exe` so that the `gs` command can be found.<br><br>Tested `vivliostyle build --press-ready` with ghostscript installed:<br><br><pre>$ vivliostyle build --press-ready<br>✔ manuscript.md 吾輩は猫である。<br>� Running press-ready<br>==&gt; Listing fonts in 'C:/Users/Shinyu/AppData/Local/Temp/vivliostyle-cli-c94e5df0-e51d-11ea-9283-f9584edc76a7.pdf'<br>name         type          embedded  subset <br>Meiryo-Bold  CID TrueType  yes       no<br>Meiryo       CID TrueType  yes       no<br>Verdana      CID TrueType  yes       no<br>==&gt; Every font is properly embedded<br>==&gt; Generating PDF<br>Input            C:/Users/Shinyu/AppData/Local/Temp/vivliostyle-cli-c94e5df0-e51d-11ea-9283-f9584edc76a7.pdf<br>Output           D:/viv/test-create-book/testmybook/testmybook.pdf<br>Color Mode       CMYK<br>Enforce outline  no<br>Boundary boxes   no<br>==&gt; GPL Ghostscript 9.52: Unrecoverable error, exit code 1<br>GPL Ghostscript 9.52 (2020-03-19)<br>Copyright (C) 2020 Artifex Software, Inc.  All rights reserved.<br>This software is supplied under the GNU AGPLv3 and comes with NO WARRANTY:<br>see the file COPYING for details.<br>Error: /ioerror in --file--<br>Operand stack:<br>   --nostringval--   --nostringval--   (C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc)   (r)<br>Execution stack:<br>   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1990   1   3   %oparray_pop   1989   1   3   %oparray_pop   1977   1   3   %oparray_pop   1833   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--<br>Dictionary stack:<br>   --dict:752/1123(ro)(G)--   --dict:0/20(G)--   --dict:76/200(L)--<br>Current allocation mode is local<br>Current file position is 1025<br>==&gt; Listing fonts in 'D:/viv/test-create-book/testmybook/testmybook.pdf'<br>==&gt; No fonts found<br>==&gt; Every font is properly embedded<br>� Built successfully.<br><br>testmybook.pdf has been created.<br></pre><br><br>Still not working. This error message seems to be a hint of the problem:<br><br><blockquote><pre>==&gt; GPL Ghostscript 9.52: Unrecoverable error, exit code 1<br>...<br>Error: /ioerror in --file--<br>Operand stack:<br>   --nostringval--   --nostringval--   (C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc)   (r)<br></pre></blockquote>Directory separators (`/` or `\` in Windows) are missing in the path of the .icc file, `C:UsersShinyuAppDataLocalTemppress-ready-87f5a2ba-876d-412b-8dfb-97b01a7221cd.icc`. It should be `C:/Users/Shinyu/AppData/Local/Temp/…` or `C:\Users\Shinyu\AppData\Local\Temp\…`. Maybe, the backslashes are lost when passing the path name to ghostscript.</blockquote>|
|10:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Tested on Windows. press-ready is designed to execute the command `gs`, but since the execution file name of the CLI for Windows version ghostscript is `gswin64c.exe` (in the case of 64bit version), after passing through PATH, I renamed it to `gs.exe` and tried it.<br><br>Now ghostscript is called from `vivliostyle build --press-ready`, but ghostscript gives an error. I have registered an issue.<br><br><https://github.com/vivliostyle/vivliostyle-cli/issues/72>|
|10:02|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|`@shinyu` ありがとうございます。いまちょうど友人からその話を聞き、そももそ `gs` ではないというコメントを書こうとしていました|
|10:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧:  Thank you very much. I was just hearing that from a friend and trying to write a comment that it wasn't `gs` in the first place.|
|10:04|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|あと Ghostscript インストーラーはパスを通してくれないので、これは Vivliostyle 側の「使ってみよう」で補足したほうがよいかもしれません|
|10:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Also, since the Ghostscript installer does not pass the path, it may be better to supplement this with "Let's try" on Vivliostyle side|
|10:05|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|村上さんも書かれていますが友人も以下を参考に手動でパスを通したそうです<br><br>Ghostscript/Windows - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br><br>Ghostscript/使い方 - TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2F%E4%BD%BF%E3%81%84%E6%96%B9#se3b8ef2>|
|10:05|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Mr. Murakami is also written, but a friend seems to have manually passed the pass referring to the following<br><br>Ghostscript/Windows-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2FWindows#w1241f25><br><br>Ghostscript/how to use-TeX Wiki<br><https://texwiki.texjp.org/?Ghostscript%2F%E4%BD%BF%E3%81%84%E6%96%B9#se3b8ef2>|
|10:11|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|以下を読むとコマンドが `gs` 決め打ちのようですので press-ready 側の対応が必要な気がします<br><br>press-ready/ghostScript.ts at master · vibranthq/press-ready<br><https://github.com/vibranthq/press-ready/blob/master/src/ghostScript.ts><br><blockquote><pre>import fs from 'fs'<br>import path from 'path'<br>import execa from 'execa'<br>import { tmpdir } from 'os'<br>import { join } from 'path'<br>import Mustache from 'mustache'<br>import { v4 as uuid } from 'uuid'<br>import shell from 'shelljs'<br>const debug = require('debug')('press-ready')<br><br>export interface GhostscriptOption {<br>  inputPath: string<br>  outputPath: string<br>  pdfxDefTemplatePath?: string<br>  sourceIccProfilePath?: string<br>  grayScale?: boolean<br>  enforceOutline?: boolean<br>  boundaryBoxes?: boolean<br>  title?: string<br>}<br><br>const ASSETS_DIR = path.resolve(__dirname, '..', 'assets')<br><br>export function isGhostscriptAvailable() {<br>  return shell.which('gs')<br>}<br><br>export async function ghostScript({<br>  inputPath,<br>  outputPath,<br>  pdfxDefTemplatePath = path.join(ASSETS_DIR, 'PDFX_def.ps.mustache'),<br>  sourceIccProfilePath = path.join(ASSETS_DIR, 'JapanColor2001Coated.icc'),<br>  grayScale = false,<br>  enforceOutline = false,<br>  boundaryBoxes = false,<br>  title = 'Auto-generated PDF (press-ready)',<br>}: GhostscriptOption) {<br>  const workingDir = tmpdir()<br>  const id = uuid()<br><br>  // ICC profile<br>  const iccProfilePath = join(workingDir, `press-ready-${id}.icc`)<br>  fs.copyFileSync(sourceIccProfilePath, iccProfilePath)<br><br>  // PDFXDef<br>  const pdfxDefPath = join(workingDir, `press-ready-${id}.ps`)<br>  const pdfxDefTemplateString = fs.readFileSync(pdfxDefTemplatePath, 'utf-8')<br>  const pdfxDef = Mustache.render(pdfxDefTemplateString, {<br>    title,<br>    iccProfilePath,<br>  })<br>  fs.writeFileSync(pdfxDefPath, pdfxDef, 'utf-8')<br><br>  // configure gs command<br>  const gsCommand = 'gs'<br>  const gsOptions = [<br>    '-dPDFX',<br>    '-dBATCH',<br>    '-dNOPAUSE',<br>    '-dNOOUTERSAVE',<br>    '-sDEVICE=pdfwrite',<br>    '-dPDFSTOPONERROR',<br>    '-dShowAnnots=false',<br>    '-dPDFSETTINGS=/prepress',<br>    '-dPrinted',<br>    '-r600',<br>    '-dGrayImageResolution=600',<br>    '-dMonoImageResolution=600',<br>    '-dColorImageResolution=600',<br>    `-sOutputFile=${outputPath}`,<br>  ]<br>  if (boundaryBoxes) {<br>    gsOptions.push('-dUseCropBox', '-dUseTrimBox', '-dUseBleedBox')<br>  }<br>  if (enforceOutline) {<br>    gsOptions.push('-dNoOutputFonts')<br>  }<br>  if (grayScale) {<br>    gsOptions.push(<br>      '-sProcessColorModel=DeviceGray',<br>      '-sColorConversionStrategy=Gray',<br>      '-sColorConversionStrategyForImages=Gray'<br>    )<br>  } else {<br>    gsOptions.push(<br>      '-sProcessColorModel=DeviceCMYK',<br>      '-sColorConversionStrategy=CMYK',<br>      '-sColorConversionStrategyForImages=CMYK',<br>      '-dOverrideICC',<br>      `-sOutputICCProfile=${iccProfilePath}`<br>    )<br>  }<br><br>  const args = [...gsOptions, pdfxDefPath, inputPath]<br>  const command: [string, string[]] = [gsCommand, args]<br><br>  debug(gsCommand, args.join(' '))<br><br>  try {<br>    // generate pdf with ghostscript<br>    const { stdout, stderr } = await execa(...command)<br><br>    return {<br>      command,<br>      rawOutput: stdout,<br>      rawError: stderr,<br>    }<br>  } catch (err) {<br>    return {<br>      command,<br>      rawOutput: err.stdout,<br>      rawError: err.stderr,<br>    }<br>  } finally {<br>    fs.unlinkSync(iccProfilePath)<br>    fs.unlinkSync(pdfxDefPath)<br>  }<br>}<br></pre></blockquote>|
|10:11|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: If you read the following, the command seems to be `gs` deterministic, so I think that press-ready side correspondence is necessary<br><br>press-ready/ghostScript.ts at master · vibranthq/press-ready<br><https://github.com/vibranthq/press-ready/blob/master/src/ghostScript.ts>|
|10:30|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|はい、 `gs` 決め打ちなのと、Windowsのpathのバックスラッシュが消えるのが問題です。バックスラッシュの問題は vivliostyle-cli の <https://github.com/vivliostyle/vivliostyle-cli/pull/69> と同様なので同じ修正を press-ready のほうに適用すれば解決します。<br><blockquote>On Windows, with Node.js `path` module, `path.join()`, `path.relative()`, etc. functions return path strings containing backslashes as directory separator.<br><br>Path string with backslashes cannot be used where URL path is required (e.g. `href` in `manifest.json`), and cannot be used with <https://www.npmjs.com/package/globby|globby>. So this problem causes <https://github.com/vivliostyle/vivliostyle-cli/issues/68|errors on Windows>.<br><br>Using <https://www.npmjs.com/package/upath|`upath`> instead of normal `path` solves the problem.<br><br>Fixes <https://github.com/vivliostyle/vivliostyle-cli/issues/68|#68></blockquote>|
|10:30|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Yes, the problem is that the `gs` is hard and the backslash in the Windows path disappears. The backslash issue is similar to &lt;vivsstyle-cli's <https://github.com/vivliostyle/vivliostyle-cli/pull/69> so applying the same fix to press-ready will solve it.|
|11:35|![](https://secure.gravatar.com/avatar/10d95659b0a9eda4e94cfc0f927e32dd.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png)|mattari|わかりやすい説明ありがとうございます。<br><br>改めて見直したところ解決しました。<br>@font-faceのfont-familyにsans-serif;と書いてあったのが、効かなくなった原因だったようです。。。ありがとうございました。<br><br><http://honttoni.blog74.fc2.com/blog-entry-306.html?sp><br><blockquote>今回は、CSS の @font-face を使ってみましょう。 これは...</blockquote>|
|11:35|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: Thank you for the easy explanation.<br><br>After reviewing it again, it was resolved.<br>It seems that the fact that sans-serif; was written in the font-family of @font-face was the reason why it stopped working. .. .. Thank you very much.<br><br><http://honttoni.blog74.fc2.com/blog-entry-306.html?sp>|
