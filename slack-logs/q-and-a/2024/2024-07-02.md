# 2024-07-02

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|01:56|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|nodeアプリケーションのcp.execでvivliostyle previewを実行した時に、ソースファイルのwatchを実行して再描画を行なってくれません。<br>stdioはpipe、inheritも試しましたが、子プロセスから起動したVivliostyle Previewはファイルの変更を検出できないように見えます。何か方法は考えられますか？|
|03:51|![](https://avatars.slack-edge.com/2023-11-11/6180804843906_ec36242e3b721d6c30e9_72.png)|Koutaro Mukai|似たことを考えていて気になったので私も下記の内容で試しましたが、`manuscript.md` を変更すると正しくプレビューが更新されました。<br>ファイルの監視はOS依存の機能だと思いますが、Windowsでは子プロセスから変更を検知できないわけではないようです。<br>```> cmd /c ver<br>Microsoft Windows [Version 10.0.22631.3737]<br><br>> node --version<br>v20.13.1<br><br>>vivliostyle --version<br>cli: 8.11.0<br>core: 2.29.0<br><br>> cat .\child_process_vivliostyle.js<br>const cp = require("node:child_process");<br>cp.exec("vivliostyle preview manuscript.md");<br><br>> cat .\manuscript.md<br># テスト```|
|05:02|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|試験ありがとうございます。Macで追試してみたら動作しました。<br><br>VS CodeのExtensionから実行すると読み込んでくれないのですよ。おそらくVS Code側の問題かと思います。ありがとうございました。|
|08:33|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|nodeアプリケーションのcp.excec、cp.spawnでvivliostyleを起動した時に、プロセスをkillしてもChromeが残ってしまうのですが、Chromeごと終了する方法はありますか？<br><br>```const cp = require("node:child_process");<br>const process = cp.exec("vivliostyle preview test.html");<br><br>setTimeout(() => {<br>  process.kill();<br>  console.log("Process terminated after 3 seconds");<br>}, 3000);```<br>上記のコードを実行すると、vivliostyleのプロセスはkillされるのですが、Chromeは残ったままになってしまいます。|
