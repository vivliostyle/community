# 2025-04-09

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|13:51|![](https://avatars.slack-edge.com/2021-10-13/2622534946576_8857e3ee0c8c264d2cbf_72.png)|Zaslon|初歩的な質問ですみません。索引を作成していて、cssで詰まってしまいました。<br>下記のような構造を持つインデックスを作成しています。<br>```&lt;li class="item"&gt;&lt;a href="../json2book/book.html#word3801"&gt;～できる&lt;/a&gt;&lt;a href="../json2book/book.html#word4520"&gt;&lt;/a&gt;&lt;/li&gt;<br>&lt;li class="item"&gt;&lt;a href="../json2book/book.html#word5660"&gt;～できること&lt;/a&gt;&lt;/li&gt;<br>&lt;li class="item"&gt;&lt;a href="../json2book/book.html#word3734"&gt;～でも…でもない&lt;/a&gt;&lt;/li&gt;```<br>この状態で、a::afterにtarget-counterで番号を取得すると、1枚目の添付画像の様になります。<br>しかし、この状態でa:first_child::afterにcontent: leader(dotted) target-counter(attr(href), page);を適用すると、2枚目の画像の様に2つ目以降のページ番号が次の行に押し出されてしまいます。leader()関数の幅の制御方法がわからず解決の糸口が見つからないのですが、もしご存じでしたらご教示願います。<br>https://vivliostyle.slack.com/files/UAE8V83GA/F08MJKA9V3L/image.png<br>https://vivliostyle.slack.com/files/UAE8V83GA/F08MJ4R624U/image.png|
|14:57|![](https://avatars.slack-edge.com/2022-07-04/3777085476512_a8d3b37eee1f9c9519dc_72.png)|hidaruma|問題と思われる「,」の箇所ってtarget-counters()に指定したものですか？ カンマをZERO WIDTH JOINERで囲えるならもしかしたらそれで分割を防げるかもしれません。あと可能性としてはtext-align-last の指定場所あたりか？|
|15:02|![](https://avatars.slack-edge.com/2023-11-11/6180804843906_ec36242e3b721d6c30e9_72.png)|Koutaro Mukai|根本的な解決方法ではないのですが、以前索引を作成した際に同様の問題に遭遇し、`leader()`関数の長さを制御する方法はないと判断して、<https://sqkhor.medium.com/css-dot-leaders-in-table-of-content-db26614665df|こちら>で紹介されているテクニックを参考にCSSを作成しました。参考になれば幸いです。 <https://github.com/u1f992/vivliostyle-util-index-transformer/blob/main/example/css/style.css><br><blockquote>Dot leaders are a row of dots that connect chapter titles to their corresponding page numbers, commonly found in table of content and index…</blockquote><br><blockquote><pre>@page {<br>    size: A5;<br>}<br><br>/****************************************************************************************************<br> * 索引<br> * <br> * 長いドットを改行させて消す。<br> * 参考：<https://sqkhor.medium.com/css-dot-leaders-in-table-of-content-db26614665df><br> * <br> * Vivliostyleのleader関数ではleader関数が含まれるcontentだけで幅を埋めるような挙動になり、<br> * 複数のページ番号を含めるのが難しい。<br> * <br> *  * .entry-term::after {<br> *     content: leader(dotted) ' '; <--これができない<br> * }<br> * .entry-pages-page::before {<br> *     content: target-counter(attr(href url), page);<br> * }<br> * <br> * <li class="entry"><br> *   <span class="entry-term">Term</span><br> *   <span class="entry-pages"><br> *     <a href="#aaa" class="entry-pages-page"></a><span class="entry-pages-separator"></span><br> *     <a href="#bbb"class="entry-pages-page"></a><br> *   </span><br> * </li><br> *  */<br>/* li要素のdisplayをflexにするとマーカーが消える */<br>.index-entry-inner {<br>    display: flex;<br>}<br><br>.index-entry-term {<br>    white-space: nowrap;<br>}<br><br>.index-entry-dots {<br>    padding-left: 0.5em;<br>    padding-right: 0.5em;<br><br>    height: 1em;<br>    overflow: hidden;<br>    word-wrap: break-word;<br>}<br><br>.index-entry-dots::after {<br>    content: '............................................................................................................................................................................................................................................';<br>}<br><br>.index-entry-pages {<br>    white-space: nowrap;<br>}<br><br>.index-entry-pages-page::before {<br>    content: target-counter(attr(href url), page);<br>}<br><br>.index-entry-pages-separator::after {<br>    content: ", ";<br>}<br><br>/*<br> * /索引<br> ****************************************************************************************************/</pre></blockquote>|
