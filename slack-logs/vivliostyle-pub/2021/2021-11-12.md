# 2021-11-12

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|07:20|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Ayumu Takai` `@takanakahiko`<br><br>現在のVivliostyle PubにおけるVFMについて教えてください。<br>現在のVFMでは、Hard new line はオプションになっていると思います。<br><br><https://vivliostyle.github.io/vfm/#/vfm#hard-new-line><br><br>Vivliostyle Pubでこのオプションは使えないのでしょうか？<br><br>使えない場合、任意のテキストで強制改行する方法があればお教えください。|
|07:20|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  <br><br>Please tell us about VFM in the current Vivliostyle Pub.<br>I think Hard new line is an option in the current VFM.<br><br><https://vivliostyle.github.io/vfm/#/vfm#hard-new-line><br><br>Is this option not available in Vivliostyle Pub?<br><br>If you can't use it, please let me know if there is a way to force a line break with arbitrary text.|
|08:02|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|VFM としては HTML 埋め込みをサポートしてるので `&lt;br&gt;` で強制改行できます。<br><br>いま日曜の登壇用に作成してるスライドも VFM で書いているのですが、強制改行に `&lt;br&gt;` を利用しています。|
|08:02|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: VFM supports HTML embedding, so you can force a line break with `&amp; lt; br &amp; gt;`.<br><br>I'm also writing the slides I'm making for the stage on Sunday in VFM, but I'm using `&amp; lt; br &amp; gt;` for forced line breaks.|
|08:10|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|それが、Vivliostyle Pubでは改行されないのです。<br>Issueにした方がよかったかな。<br>https://vivliostyle.slack.com/files/UJS3RCS86/F02MTHFS3B2/____________________________2021-11-12_17.07.29.png|
|08:10|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: That's not the line break in Vivliostyle Pub.<br>Should I have made it an Issue?|
|08:12|![](https://avatars.slack-edge.com/2019-05-15/624511073651_25909952cd7a069ceed2_72.png)|akabeko|変換結果の HTML に `&lt;br&gt;` が出力されていないとしたら Pub 側で安全のためにエスケープしてるとかですかね。|
|08:12|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: If `&amp; lt; br &amp; gt;` is not output in the converted HTML, it may be escaped on the Pub side for safety.|
|08:27|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|Issue登録しました。<br><https://github.com/vivliostyle/vivliostyle-pub/issues/121><br><blockquote>エディタで`&lt;br&gt;`を入力しても、プレビュー画面に反映されないようです  <br><https://user-images.githubusercontent.com/31482860/141435074-b645c002-0e90-4335-a890-0a55dd943c0b.png|スクリーンショット 2021-11-12 17 07 29>  <br>。</blockquote>|
|08:27|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Issue registered.<br><https://github.com/vivliostyle/vivliostyle-pub/issues/121>|
|09:45|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|私のほうで試すと問題なく改行できました。<br><https://github.com/vivliostyle/vivliostyle-pub/issues/121#issuecomment-966963041><br><blockquote>HTML出力を見ると  <br><https://github.com/ogwata-book/mybook/blob/main/chapter-3/section-2.html|https://github.com/ogwata-book/mybook/blob/main/chapter-3/section-2.html>  <br>`&lt;br&gt;` は出力されているし、  <br>Vivliostyle ViewerでこのHTMLを表示しても改行はされています。<br><br><https://vivliostyle.vercel.app/#src=https://github.com/ogwata-book/mybook/blob/main/chapter-3/section-2.html&amp;style=https://github.com/ogwata-book/mybook/blob/main/css/style.css|https://vivliostyle.vercel.app/#src=https://github.com/ogwata-book/mybook/blob/main/chapter-3/section-2.html&amp;style=https://github.com/ogwata-book/mybook/blob/main/css/style.css><br><br>私の方で、Vivliostyle Pubを試すと、`&lt;br&gt;` タグ、または行末のスペース２つで問題なく改行できました。  <br><https://user-images.githubusercontent.com/3324737/141446121-e4cd76c5-5f5f-4488-9d22-eb600f2d8eaf.png|Screen Shot 2021-11-12 at 18 42 51></blockquote>|
|09:45|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: When I tried it, I was able to break the line without any problem.<br><https://github.com/vivliostyle/vivliostyle-pub/issues/121#issuecomment-966963041>|
|13:54|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Ayumu Takai` `@takanakahiko`<br><br>こんばんは！　ちょっと困ってます。<br><br><https://github.com/vivliostyle/vivliostyle-pub/issues/121><br><br>14日のイベントではVivliostyle PubでWebフォントを使う発表をしようと思い、準備をすすめてきました。<br>ところが、上記トラブルにより、現在使えるリポジトリの全てでVivliostyle Pubが使えない状態に陥ってしまいました。<br><br>なにか解決の糸口がないでしょうか？<br><blockquote>エディタで`&lt;br&gt;`を入力しても、プレビュー画面に反映されないようです  <br><https://user-images.githubusercontent.com/31482860/141435074-b645c002-0e90-4335-a890-0a55dd943c0b.png|スクリーンショット 2021-11-12 17 07 29>  <br>。</blockquote>|
|13:54|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  <br><br>good evening! I'm a little in trouble.<br><br><https://github.com/vivliostyle/vivliostyle-pub/issues/121><br><br>At the event on the 14th, I decided to announce the use of web fonts at Vivliostyle Pub, and I have been preparing for it.<br>However, due to the above trouble, Vivliostyle Pub cannot be used in all currently available repositories.<br><br>Is there any clue to the solution?|
|14:16|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|私も<https://vivliostyle-pub-develop.vercel.app/> にあるバージョンで試して、普通にbrタグで改行できてますし、プレビューの更新、GitHubへのコミットもできています。|
|14:17|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I've also tried it with the version at <https://vivliostyle-pub-develop.vercel.app/>, and I can break lines with the br tag normally, update the preview, and commit to GitHub.|
|14:33|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|`@ogwata` 確認ですが、開発者ツールでキャッシュストレージの内容はどうなっているでしょうか。<br><br>私の環境ではchapter-1.mdを編集すると、キャッシュストレージに/vpubfs/chapter-1.htmlというエントリが作成され、プレビューで確認すると改行した状態が確認できます。(日本語を含んでいるとプレビューで文字化けするのでchapter-1.mdの内容を英字のみにしています)<br><br>vivliostyle viewerで404になっている場合、必要なファイルがキャッシュストレージに無いか、URLが間違っているのでは無いかと思います。<br>https://vivliostyle.slack.com/files/U01D90BR491/F02M57Q3XPD/____________________________2021-11-12_23.29.34.png|
|14:33|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  As a confirmation, what is the contents of cache storage in the developer tools?<br><br>In my environment, when I edit chapter-1.md, an entry called /vpubfs/chapter-1.html is created in the cache storage, and if I check it in the preview, I can see the line breaks. (If Japanese is included, the characters will be garbled in the preview, so the content of chapter-1.md is only English characters.)<br><br>If it is 404 in the vivliostyle viewer, it may be that the required file is not in the cache storage or the URL is incorrect.|
|14:35|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|ありがとうございます。<br>dev toolsでキャッシュを削除して確認してみますね。|
|14:35|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Thank you very much.<br>Let's delete the cache with dev tools and check it.|
|14:52|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Ayumu Takai`<br>なるほど、devtoolsでみてみると、キャッシュストレージにあるのは、<https://vivliostyle-pub-develop.vercel.app/> だけです。そして、section-1.htmlがエラーにあります。<br><br>なにか解決策はありそうでしょうか？<br>https://vivliostyle.slack.com/files/UJS3RCS86/F02LYJBNHML/____________________________2021-11-12_23.51.04.png|
|14:52|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: <br>Well, looking at devtools, only <https://vivliostyle-pub-develop.vercel.app/> is in cache storage. And section-1.html is in the error.<br><br>Is there any solution?|
|15:06|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|markdown編集後、2秒待ったときにコンソールログに"updateCache : ファイル名"のような表示は出ますか?<br><br>この表示が出ないなら、キャッシュストレージに書き出す前段階で不具合が出ていると思います。|
|15:06|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Does the console log show something like "updateCache: filename" when I wait 2 seconds after editing markdown?<br><br>If this message does not appear, it means that there is a problem before writing to the cache storage.|
|15:26|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|Markdownは編集していません。既成のファイルをVivliostyle Pubで表示させようとしたところ、ある時から急に404エラーがでてプレビューできなくなったという経緯です。ともあれ、以下を試してみますね。<br><br><blockquote>markdown編集後、2秒待ったときにコンソールログに"updateCache : ファイル名"のような表示は出ますか?</blockquote>|
|15:26|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Markdown has not been edited. When I tried to display an off-the-shelf file in Vivliostyle Pub, I suddenly got a 404 error and couldn't preview it. Anyway, I'll try the following.<br><br>&amp; gt; markdown Does the console log show something like "updateCache: filename" when you wait 2 seconds after editing?|
|15:30|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|発表スライドを作ろうと新しいリポジトリを用意したら同じような現象(404)が発生しました。<br>こちらで検証してみます。|
|15:30|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: A similar phenomenon (404) occurred when I prepared a new repository to make a presentation slide.<br>I will verify it here.|
|15:34|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|vivliostyle.config.jsにthemeの指定があると駄目な可能性が高いです。<br>手元のプロジェクトではtheme: @vivilostyle/theme-slide, を削除したらプレビューが表示されました。|
|15:34|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: There is a high possibility that it will be useless if the theme is specified in vivliostyle.config.js.<br>In my project, I deleted theme: @ vivolostyle / theme-slide, and the preview was displayed.|
|15:35|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|試してみましたが、updateCacheのようなメッセージは表示されないようです。<br>動画を撮影してみました。<br><br>言われて気がつきましたが、“Save document” を押しても、プレビュー画面がリロードされませんね。ですので、Issueのコメントでも、自分でコマンド+Rでリロードしていました。<br>https://vivliostyle.slack.com/files/UJS3RCS86/F02M2HALF6H/_____________2021-11-13_0.29.09.mov|
|15:35|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I've tried it, but it doesn't seem to show a message like updateCache.<br>I tried to shoot a video.<br><br>I noticed that when I pressed "Save document", the preview screen did not reload. So, even in the comment of Issue, I reloaded it by command + R by myself.|
|15:35|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|<blockquote>vivliostyle.config.jsにthemeの指定があると駄目な可能性が高いです。</blockquote>なるほど、さっそく試してみますが、もしそうだとするとwebフォントがロードできませんね……。|
|15:35|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: &amp; gt; It is highly possible that it is useless if the theme is specified in vivliostyle.config.js.<br>I see, I'll give it a try, but if that's the case, the web font won't load ...|
|15:37|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|ですよね。<br>今から突貫工事でなんとかできれば良いのですが。<br>テーマの指定はどのようにされてますか?|
|15:37|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: That's right.<br>I wish I could do something with the rush work from now on.<br>How is the theme specified?|
|15:43|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|<blockquote>vivliostyle.config.jsにthemeの指定があると駄目な可能性が高いです。</blockquote>Themeの設定をコメントアウトしたら、無事にプレビューできるようになりました。<br><br><blockquote>テーマの指定はどのようにされてますか?</blockquote>publicで公開していますので、どうかご確認ください。<br><br><https://github.com/ogwata-book2/my-newbook><br>https://vivliostyle.slack.com/files/UJS3RCS86/F02MJ6N8HJM/____________________________2021-11-13_0.40.02.png<br><blockquote>ogwata-book2/my-newbook</blockquote>|
|15:43|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: &amp; gt; It is highly possible that it is useless if the theme is specified in vivliostyle.config.js.<br>After commenting out the Theme settings, I can now preview them safely.<br><br>&amp; gt; How is the theme specified?<br>It is open to the public, so please check it.<br><br><https://github.com/ogwata-book2/my-newbook>|
|15:46|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|これならたぶんテーマのリストに追加できると思います。|
|15:46|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: You can probably add it to your list of themes.|
|15:50|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|とりあえずこんな感じになりましたが、私ではサーバにデプロイできないので `@takanakahiko` さんにお願いしないとですね。<br><br>とりあえずプルリクエスト投げておきます。|
|15:50|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: For the time being, it looks like this, but I can't deploy it to the server, so I have to ask Mr.<br><br>I will throw a pull request for the time being.|
|15:50|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|<blockquote>これならたぶんテーマのリストに追加できると思います。</blockquote>ただ、そのテーマを編集はできませんよね。<br>じつは、`/css/style.css` をいろいろ編集して、Googleフォント等の各種Webフォントを追加しようとしていたのです。どうも困りましたね。この分だとVivliostyle Pubのデモはあきらめるしかないかも。|
|15:50|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: &amp; gt; You can probably add this to your list of themes.<br>However, you can't edit the theme.<br>Actually, I was trying to edit `/css/style.css` in various ways to add various web fonts such as Google fonts. I was in trouble. At this rate, I may have to give up the Vivliostyle Pub demo.|
|15:51|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|GitHub側で編集する形になってしまいますね。<br>https://vivliostyle.slack.com/files/U01D90BR491/F02LQV7PJ15/____________________________2021-11-13_0.49.13.png|
|15:51|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: It will be edited on the GitHub side.|
|15:52|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|あ、GitHubで編集できるなら、全然OKです！|
|15:52|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Oh, if you can edit it on GitHub, it's OK!|
|15:53|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|GitHub側で更新したCSSをPubではどのタイミングで反映できるのか検証してみます。|
|15:53|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Let's verify when the CSS updated on GitHub side can be reflected in Pub.|
|17:25|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|テーマのリロードは反映されたりされなかったりと不可解な挙動をしています。<br><br><br>1. Pubでテーマを選択する<br>2. GitHub上でテーマ(CSSファイル)を編集してコミットする<br>3. 直後にGitHub上でrawファイルとして表示する<br>という手順を踏むと、3.の段階で編集が反映されていないことがあります。<br>暫く待ってからrawファイルを表示すると反映されています。<br>rawファイルが更新されるまでは、pubでテーマをリロードしても当然変更は反映されません。<br><br>GitHub側の問題のようなので、別の方法を模索してみます。|
|17:25|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: The reloading of the theme behaves incomprehensible as it may or may not be reflected.<br><br>On the GitHub side<br><br>1. Select a theme in Pub<br>2. Edit the theme (CSS file) on GitHub and commit<br>3. Immediately after, display it as a raw file on GitHub<br>If you follow the procedure, the edit may not be reflected at the stage of 3.<br>It is reflected when the raw file is displayed after waiting for a while.<br>Until the raw file is updated, reloading the theme in pub will not take effect, of course.<br><br>It seems to be a problem on the GitHub side, so I will try to find another way.|
|21:46|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|最低限WebFontのデモが出来るところまで作ってみました。<br><br>vivliostyle-pubリポジトリのdemo/webfontブランチをローカルで試してみてもらえないでしょうか。<br><br>変更点や注意点<br>• ファイルリストにリポジトリのルートディレクトリにあるファイル全て表示します<br>• サブディレクトリには対応していません<br>• Actionsから選択できるテーマは「ローカルテーマ」のみです<br>• 「ローカルテーマ」はリポジトリのルートディレクトリにあるstyle.css決め打ちで使用します(css/style.cssを移動してください)<br>• プレビューの更新時にWebフォントをダウンロードするので遅いです<br>https://vivliostyle.slack.com/files/U01D90BR491/F02MWSS7BCG/_____________-_2021-11-13_06_44_29.webm|
|21:46|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I tried to make at least a web font demo.<br><br>Could you give it a try on the demo / webfont branch of the vivliostyle-pub repository?<br><br>Changes and precautions<br>• Show all files in the root directory of the repository in the file list<br>• Does not support subdirectories<br>• The only theme that can be selected from Actions is "Local Theme"<br>• Use "local theme" with style.css in the root directory of the repository (move css / style.css)<br>• It's slow because it downloads web fonts when the preview is updated<br>|
