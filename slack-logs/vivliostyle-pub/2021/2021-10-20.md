# 2021-10-20

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|02:20|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Ayumu Takai`<br>ありがとうございます。`@shinyu` さんからはDMで、Pubの<https://raw.githubusercontent.com/youchan/viola-project/master/main.css|デフォルトのスタイルシート>が原因とした上で、以下のようなようなコメントをもらっています。<br><br><blockquote>Pubのプロトタイプデモが作られたのが、VFMよりも前だったので、VFMで生成されるHTMLにまったく合っていないという状態になっています。<br>Pubのデフォルトとしては、スタイルシート無しで、Vivliostyle.js のデフォルトそのままのほうがよさそうです。</blockquote>高井さん、村上さんのコメントを踏まえ、現在のデフォルトのスタイルシートを廃止し、Vivliostyle Viewerのデフォルトスタイルシートを使うよう、Issueを作成しようと思います。<br><br>文案はこのチャンネルに投稿するので確認をお願いします。|
|02:20|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: <br>Thank you very much. In DM, from Pub <https://raw.githubusercontent.com/youchan/viola-project/master/main.css | default stylesheet>, the following comment I have received.<br><br>The prototype demo of &amp; gt; Pub was created before VFM, so it doesn't fit the HTML generated by VFM at all.<br>As the default for &amp; gt; Pub, it seems better to keep the default of Vivliostyle.js without a stylesheet.<br>Based on the comments of Mr. Takai and Mr. Murakami, I will abolish the current default style sheet and create an issue to use the default style sheet of Vivliostyle Viewer.<br><br>Please check the draft as it will be posted on this channel.|
|03:08|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|<blockquote>Vivliostyle Viewerのデフォルトスタイルシートを使うよう</blockquote>Vivliostyle.jsのUAデフォルトスタイルシートは、Vivliostyle.js core の中に組み込まれているものなので常に使われます。ほかのスタイルシート指定が何もない状態を、当面はPubのデフォルトとするのがよいと思います。<br>（「当面は」としたのは、より適切なPub用のデフォルトの検討は必要かもしれないから）<br><br>スタイルシート指定なし（デフォルトスタイルのみ）の場合、ページサイズの指定もデフォルトの auto になるので、表示エリアの大きさがページサイズになります。これでは本を作るのには向かないでしょうから、ページサイズの指定はできたほうがよいでしょう。Vivliostyle Viewerの設定のページサイズの指定を生かすとよいかと思います。Vivliostyle Viewerの設定で指定されたスタイルシートはURLパラメータの `&amp;userStyle=…` に反映されます。これを iframe.contentWindow.location.hash で見ることができるので、PDF出力のときのページサイズで同じページサイズ設定を使うのに利用できると思います。|
|03:08|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: &amp; gt; Use Vivliostyle Viewer default stylesheets<br>The Vivliostyle.js UA default stylesheet is built into the Vivliostyle.js core and is always used. For the time being, I think it's best to make Pub the default when there are no other stylesheet specifications.<br>(I say "for the time being" because it may be necessary to consider a more appropriate default for Pub)<br><br>If no style sheet is specified (default style only), the page size is also specified as the default auto, so the size of the display area is the page size. This would not be suitable for making a book, so it would be nice to be able to specify the page size. I think it would be good to make use of the page size specification in the Vivliostyle Viewer settings. The stylesheet specified in the Vivliostyle Viewer settings is reflected in the URL parameter `&amp; amp; userStyle =…`. You can see this in the iframe.contentWindow.location.hash, so I think it can be used to use the same page size setting for the page size when outputting PDF.|
|03:17|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@shinyu` さん、ありがとうございます。<br><br><blockquote>スタイルシート指定なし（デフォルトスタイルのみ）の場合、ページサイズの指定もデフォルトの auto になるので、表示エリアの大きさがページサイズになります。</blockquote>なるほど、当初はVivliostyle.jsのデフォルトスタイルシートをそのまま使うようにすればよいと考えていましたが、それでは問題があるということですね。<br><br>つまり、「現在のデフォルトのスタイルシートを、ページサイズの指定だけのものに差し替える」という対応がよいということでしょうか？|
|03:17|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  San, thank you.<br><br>&amp; gt; If no style sheet is specified (default style only), the page size is also specified as the default auto, so the size of the display area is the page size.<br>Well, at first I thought I should just use the default stylesheet of Vivliostyle.js, but that's a problem.<br><br>In other words, is it a good idea to replace the current default stylesheet with one that only specifies the page size?|
|04:27|![](https://avatars.slack-edge.com/2020-10-24/1474758134528_58d03798bcb64d811fc4_72.jpg)|Ayumu Takai|今、デフォルトで使われているViolaテーマですが、以下のように個人?のテーマとしてホスティングされています。<br>{<br>    name: 'Viola',<br>    css:<br>      '<https://raw.githubusercontent.com/youchan/viola-project/master/main.css>',<br>  },<br>デフォルトテーマはvivliostyle関連のリポジトリからホスティングしたほうが良いように思います。|
|04:27|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: The Viola theme, which is currently used by default, is hosted as a personal theme as shown below.<br>{<br>    name:'Viola',<br>    css:<br>      '<https://raw.githubusercontent.com/youchan/viola-project/master/main.css>',<br>  },<br>I think the default theme should be hosted from a vivliostyle related repository.|
|04:27|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|`@Ayumu Takai` `@shinyu`<br><br>Issueの原案です。<br>なにか問題がないか、ご確認ください。<br><br>-------------<br># 現在のデフォルトのスタイルシートを、ページサイズの指定だけのものに差し替える<br><br>## 問題の所在<br><br>現在、Vivliostyle Pubが使っている[デフォルトのスタイルシート](<https://raw.githubusercontent.com/youchan/viola-project/master/main.css)には>、以下のような問題が指摘されています。<br><br>1. H1の行頭で、カウンタ「0.」が表示される<br> 2. コードブロックで全体を包括する矩形ブロックが確保されず、以下のような問題がある<br>    - 1行目がわずかにインデントされる<br>    - 行間に空白が生じ、行端でブロックが終わってしまう<br><br>1は複数のコンテンツからなるグループ誌を念頭においた機能ですが、適切なスタイルシートでの指定が必要です。それをしないと「0.」が表示されてしまうことから問題が発生します。<br><br>2についてはコードブロックは通常pre要素でブロックの領域全体について指定をするところ、そのpre要素に対してはスタイルが定義されておらず、code要素で背景色、角丸などが定義されていることが原因です。code要素はインライン要素なので、インラインにだけスタイルが適用されてしまうのです。<br><br>いずれも、現在のデフォルトのスタイルシートが、Vivliostyle Pubの原型であるオンラインエディタ[Viola](<https://vivliostyle.org/ja/blog/2018/11/22/introduction-of-viola/)に由来することが原因です>。当たり前ですが、Violaが作られたのはVFMよりも前なので、Vivliostyle PubがVFMによって生成するHTMLに合っていないのです。<br><br>## あるべき対策<br><br>Vivliostyle Pubのデフォルトとしてはスタイルシートの指定が無い状態とし、結果としてVivliostyle Viewerのデフォルトをそのままを使うのがよさそうです。<br><br>ただし、スタイルシート指定なし（デフォルトスタイルのみ）の場合、ページサイズの指定もデフォルトの`auto`になるので、表示エリアの大きさがページサイズになります。これでは本を作るのには向かないでしょうから、ページサイズの指定はできたほうがよいでしょう。Vivliostyle Viewerの設定のページサイズの指定を生かすとよいかと思います。<br><br>結論として、現在のデフォルトのスタイルシートを、ページサイズの指定だけのものに差し替えるという対応がよいでしょう。<br><br>なお、Vivliostyle Viewerの設定で指定されたスタイルシートはURLパラメータの`&amp;userStyle=…`に反映されます。これを`iframe.contentWindow.location.hash`で見ることができるので、PDF出力のときのページサイズで同じページサイズ設定を使うのにも利用できると思います。<br><br>関連して、今デフォルトで使われているViolaテーマですが、以下のように個人のテーマとしてホスティングされています。<br><br><pre>{<br>    name: 'Viola',<br>    css:<br>      '<https://raw.githubusercontent.com/youchan/viola-project/master/main.css>',<br>  },</pre><br><br>デフォルトテーマはvivliostyle関連のリポジトリからホスティングしたほうが良いでしょう。<br><br>## 参考<br><br>- [Slack: `#vivliostyle-pub`](<https://vivliostyle.slack.com/archives/CR14JBXCJ/p1634659438001800>)<br>- [hs9587/date_calender](<https://github.com/hs9587/date_calender/tree/20191027-0>)<br><blockquote>`@takanakahiko` `@Ayumu Takai`<br><br>提携先にPubを試用していただいたところ、以下のようなフィードバックがありました。<br><br>--------<br>小形さま、村上さま<br> 先ほどはミーティングあり難うございました<br> そこで話の出た、ソースコードのスタイルの事、送ります<br><br> 「```」バッククォート三つで囲うソースコード記法の事です。<br><br> ビブリオさんにて「Violaチュートリアル」のスタイルでこのようになります<br> Vivlio.date_calendar.pre_style.1.png<br> Vivlio.date_calendar.pre_style.2.png<br><br> 意図してるのは GitHubでのブラウザ表示です<br> Vivlio.date_calendar.pre_style.github.png<br><br> 1. グレイの箱になって欲しいのが続いていません、<br> 行間に余白が入ります<br> 2. そのせいか右端、文字が終わるとグレイ領域が終わります、<br> 左端行頭にはグレイの幅があるのに<br> 右端はグレイが文字終わりで切れてておかしいです。<br> 3 .行頭字下げ、なぜか最初が字下げされています<br> 段落扱いされているということでしょうか。<br> ページが変わって、Vivlio.date_calendar.pre_style.2.png<br> の最初も字下げになっています。<br> このソースコードのブロックは続いているはずなのに、<br> 段落最初の字下げ扱いになっているのでしょうか。<br><br> ちなみにこの部分、マークダウンのソースは下記のようになります。<br><https://github.com/hs9587/date_calender/blob/20191027-0/README.md><br> いかがでしょうか、</blockquote>|
|04:27|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  <br><br>This is the original draft of Issue.<br>Please check if there are any problems.<br><br>-------------<br># Replace the current default stylesheet with one that only specifies the page size<br><br>## Where is the problem?<br><br>Currently, the [default stylesheet] (<https://raw.githubusercontent.com/youchan/viola-project/master/main.css) used by Vivliostyle Pub> points out the following problems. I have.<br><br>1. At the beginning of the line of H1, the counter "0." is displayed.<br> 2. The code block does not secure a rectangular block that covers the whole, and there are the following problems.<br>    --The first line is slightly indented<br>    --Blanks occur between lines and the block ends at the end of the line<br><br>1 is a function with multiple content group magazines in mind, but it needs to be specified in an appropriate style sheet. If you don't do that, you'll end up with a "0."<br><br>Regarding 2, the code block usually specifies the entire area of the block with the pre element, but the style is not defined for that pre element, and the background color, rounded corners, etc. are defined in the code element. Is the cause. Since the code element is an inline element, the style is applied only inline.<br><br>In both cases, the current default stylesheet is now in the online editor [Viola] (<https://vivliostyle.org/ja/blog/2018/11/22/introduction-of-viola/), which is the prototype of Vivliostyle Pub. It is caused by the origin>. Obviously, Viola was created before VFM, so it doesn't fit the HTML that Vivliostyle Pub produces with VFM.<br><br>## Measures that should be taken<br><br>As the default of Vivliostyle Pub, it seems good to leave the style sheet not specified, and as a result, use the default of Vivliostyle Viewer as it is.<br><br>However, if the style sheet is not specified (default style only), the page size is also specified as the default `auto`, so the size of the display area is the page size. This would not be suitable for making a book, so it would be nice to be able to specify the page size. I think it would be good to make use of the page size specification in the Vivliostyle Viewer settings.<br><br>In conclusion, it's a good idea to replace the current default stylesheet with one that only specifies the page size.<br><br>The style sheet specified in the Vivliostyle Viewer settings is reflected in the URL parameter `&amp; amp; userStyle =…`. You can see this in `iframe.contentWindow.location.hash`, so I think you can use it to use the same page size setting for the page size when outputting PDF.<br><br>## Reference<br><br>-[Slack: &lt;# CR14JBXCJ | vivliostyle-pub&gt;] (<https://vivliostyle.slack.com/archives/CR14JBXCJ/p1634659438001800>)<br>-[hs9587 / date_calender] (<https://github.com/hs9587/date_calender/tree/20191027-0>)|
|04:31|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|ありがとうございます。原案に追記しました。|
|04:31|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Thank you very much. Added to the draft.|
|06:15|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|<blockquote>つまり、「現在のデフォルトのスタイルシートを、ページサイズの指定だけのものに差し替える」という対応がよいということでしょうか？</blockquote>Pubのデフォルトのスタイルシートは、当面は「無し」として、ページサイズの指定は、Vivliostyle Viewerの設定メニューからするようにというのが、私の案です。|
|06:15|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: &amp; gt; In other words, is it a good idea to "replace the current default stylesheet with one that only specifies the page size"?<br><br>My idea is that Pub's default stylesheet is "None" for the time being, and the page size should be specified from the Vivliostyle Viewer settings menu.|
|06:38|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|issueにコメントしました <https://github.com/vivliostyle/vivliostyle-pub/issues/119#issuecomment-947372018><br><blockquote>Pubのデフォルトのスタイルシートは、当面は「無し」として、ページサイズの指定はVivliostyle Viewerの設定メニューからできればよいのでないかというのが私の案です。<br><br>Vivliostyle CLI では、コマンドラインあるいはconfigから指定されたページサイズをVivliostyle ViewerのURLパラメータに渡しています。ソースコードの次の部分:  <br><https://github.com/vivliostyle/vivliostyle-cli/blob/main/src/server.ts#L58-L63|https://github.com/vivliostyle/vivliostyle-cli/blob/main/src/server.ts#L58-L63>  <br>これにより、preview コマンドのコマンドラインで指定したものが、Viewerの設定メニューに反映されます。<br><br>ユーザーがViewerの設定メニューでページサイズを変更すると、それがURLのパラメータに反映されます。Pubのプレビューは、`&lt;iframe&gt;` でVivliostyle Viewerを表示しているので、Pubのプログラムのほうでは `iframe.contentWindow.location.hash` を調べると、ユーザーが設定メニューから設定したスタイルを得ることができるので、PDF生成のときにそれを使うようにすれば、Viewerの設定メニューでの設定をPDF出力にも反映させることが可能になるはずです、。</blockquote>|
|06:38|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Commented on the issue <https://github.com/vivliostyle/vivliostyle-pub/issues/119#issuecomment-947372018>|
|06:50|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|プレビューペインの幅についても指摘されました。<br>それもissueにしてください。小形さんお願いします。|
|07:15|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|みなさん<br><br>下記の日程でVivliostyle Pub開発者会議をオンラインで開催します。開発メンバーによるミーティングですが、公開での開催ですので、興味のある方はぜひ参加ください。とくに`@spring-raining` さん、平日ですが、もしよろしければアドバイスをいただければと思います。<br><br>• 10月25日　15:00〜16:00<br>• 参加URL：<https://meet.google.com/prs-dmrf-xtu><br>• 参加者：`@takanakahiko` `@Ayumu Takai` `@shinyu` `@ogwata` <br>• 目的：<https://github.com/vivliostyle/vivliostyle-pub/issues/89|オープンベータまでのTo Doを考える（開発） #89> を材料に、短期・中期の開発目標と日程を共有する<br><blockquote>Real-time meetings by Google. Using your browser, share your video, desktop, and presentations with teammates and customers.</blockquote><br><blockquote>☐ *ベータ公開までに対応が必要な課題*<br>    ☐ <https://github.com/vivliostyle/vivliostyle-pub/issues/119|デフォルトのスタイルシートの指定を無しにする><br>    ☐ 「Save document」ボタンによる更新がMDファイルだけで、HTMLファイルは対象外になる<br>    ☐ リンクエラーがでる問題への対処<br>        ☑︎ <https://github.com/vivliostyle/vivliostyle-pub/issues/95|#95><br>        ☐ <https://github.com/vivliostyle/vivliostyle-pub/issues/81|PDF文書へのリンクがある文書で、そのリンクをクリックすると「404 This page could not be found.」になる><br>        ☐ スタイルシートの画像リンクがエラーになる<br>    ☐ 機能の実装（優先順位は後で検討）<br>        ☑︎ デフォルト以外のブランチを選択する機能<br>        ☐ ファイル／ディレクトリ操作機能（関連 <https://github.com/vivliostyle/vivliostyle-cli/issues/202|cli-#202>）<br>        ☐ 新規ファイル作成機能<br>        ☐ 画像ファイルの挿入（画像ファイルの指定。関連 <https://github.com/vivliostyle/vivliostyle-pub/issues/116|#116>）<br>        ☐ 任意の形式のファイルをアップロードし、そのリンクが作成できる（関連 <https://github.com/vivliostyle/vivliostyle-pub/issues/116|#116>）<br>        ☐ <https://github.com/vivliostyle/community/wiki/Vivliostyle-Pub-v1-Req#vivliostyle-pub-%E4%B8%8A%E3%81%A7%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E5%88%A9%E7%94%A8|Vivliostyle Pub 上でのスタイルテーマの利用><br>            ☐ <https://github.com/vivliostyle/vivliostyle-pub/issues/103|npm上に公開されている Vivliostyle Theme の指定><br>            ☐ 自分で用意したスタイルシートの指定<br>        ☐ <https://github.com/vivliostyle/vivliostyle-pub/issues/91|PDFの出力><br>☐ *公開後、順次対応をしていく課題*<br>    ☐ ファイル操作（関連 <https://github.com/vivliostyle/vivliostyle-cli/issues/202|cli-#202>）<br>        ☐ ファイルの削除機能<br>        ☐ ファイルの別名保存<br>        ☐ ディレクトリの変更<br>        ☐ 複数文書における順番の変更<br>    ☐ <https://github.com/vivliostyle/community/wiki/Vivliostyle-Pub-v1-Req#%E8%A1%A8%E7%B4%99%E7%94%BB%E5%83%8F-cover|表紙画像 (cover)>→小形がIssue書く<br>    ☐ <https://github.com/vivliostyle/community/wiki/Vivliostyle-Pub-v1-Req#%E7%9B%AE%E6%AC%A1-toc|目次 (toc)><br>    ☐ <https://github.com/vivliostyle/community/wiki/Vivliostyle-Pub-v1-Req#%E5%A5%A5%E4%BB%98-colophon|奥付 (colophon)><br>    ☐ PDFx/1aの出力<br>    ☐ EPUB出力<br>    ☐ フォントについて<br>        ☐ フォントの種類を増やす<br>            ☐ 約物が重複した際、ツメるように（<https://tama-san.com/yakucalt-font/|YakuCalt>）<br>        ☐ Webフォントが指定できる</blockquote>|
|07:15|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Everyone<br><br>The Vivliostyle Pub Developers Conference will be held online on the dates below. Although it is a meeting by development members, it is open to the public, so if you are interested, please join us. Especially on weekdays, I would appreciate your advice.<br><br>• October 25th, 15: 00-16: 00<br>• Participation URL: <https://meet.google.com/prs-dmrf-xtu><br>• participant:    <br>• Purpose: <https://github.com/vivliostyle/vivliostyle-pub/issues/89 | Thinking about To Do until open beta (development) # 89>, sharing short-term and medium-term development goals and schedules do|
|07:17|![](https://avatars.slack-edge.com/2019-11-22/845042642576_070441337abaca9fb7b3_72.png)|ogwata|位置づけは「ベータ公開までに対応が必要な課題」「公開後、順次対応をしていく課題」のうち、後者でよいですか？|
|07:17|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Is it okay to position the latter of the "issues that need to be addressed before the beta release" and "issues that will be addressed sequentially after the release"?|
|08:15|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|今のところ大丈夫です！ 別件が入るかもしれないためその点ご了承ください🙏|
|08:15|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: All right for now! Please note that there may be other cases: pray:|
