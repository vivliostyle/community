# 2022-02-28

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|07:13|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|`@Ayumu Takai` `@takanakahiko`<br><https://github.com/vivliostyle/vivliostyle-pub/issues/147><br>Vivliostyle Pubでの保存がまったく出来なくなってます。何が原因でしょう？<br><blockquote>Pubでのファイルの保存や作成でエラー発生するようになり、PubからGitHubへのコミットが出来なくなっている状態です。<br><br><https://vivliostyle-pub-develop.vercel.app/|https://vivliostyle-pub-develop.vercel.app/>  <br>および  <br><https://vivliostyle-pub-develop-proto.vercel.app/|https://vivliostyle-pub-develop-proto.vercel.app/>  <br>の両方で、  <br>いくつかのGitHubリポジトリでのPubでの編集やファイル作成を試してみましたが、いずれもエラーになります（develop版とdevelop-proto版とでエラーが違うことについては後述 ）。  <br>ユーザーから「PUBで文書が保存できない」と報告を受けて、私の方でもテストして確認したので、特定ユーザーアカウントだけでの問題でもないようです。<br><br>以下、こちらでテストした結果です：<br><br>まず、  <br><https://vivliostyle-pub-develop.vercel.app/|https://vivliostyle-pub-develop.vercel.app/>  <br>でGitHubリポジトリ <https://github.com/MurakamiShinyu/pubtest2|https://github.com/MurakamiShinyu/pubtest2> のファイル README.md を編集して Save Document をクリックすると、<br><br><https://user-images.githubusercontent.com/3324737/155936836-0201ae90-f118-48d4-9d6b-02d6a9a628c8.png|スクリーンショット 2022-02-28 15 16 07><br><br>このように、「保存に失敗しました status code 400」が発生します。<br><br><https://vivliostyle-pub-develop-proto.vercel.app/|https://vivliostyle-pub-develop-proto.vercel.app/>  <br>のほうで、同様のテストをしようとしたところ、まずエディターでの編集で文字を入力しはじめたところで、  <br>「ファイルが保存されていません。変更を破棄しますか？」  <br>というalertが出ました。文字を入力しはじめたところでこれが出るのは異常です。<br><br><https://user-images.githubusercontent.com/3324737/155937834-be75f03b-7b41-4881-84b9-47ab40d05be5.png|スクリーンショット 2022-02-28 15 22 08><br><br>ここで「キャンセル」をクリックして、文字入力を続けて、それから Save Document をクリックすると、<br><br><https://user-images.githubusercontent.com/3324737/155938339-cd17a494-1c72-41fb-b757-da15c7df65cc.png|スクリーンショット 2022-02-28 15 23 32><br><br>このように、「保存に失敗しました status code 500」が発生します。<br><br>また、ファイル作成を試みたところ、次のようにエラーになりました。<br><br><https://user-images.githubusercontent.com/3324737/155939243-1357a638-dece-423b-bb17-bb073faffa40.png|スクリーンショット 2022-02-28 16 06 51><br><br><blockquote>ファイル(…)が作成できませんでした:Request failed due to following response errors: - Nullability mismatch on variable $additions and argument additions ([FileAddition] / [FileAddition!]) - Nullability mismatch on variable $deletions and argument deletions ([FileDeletion] / [FileDeletion!]) - Type mismatch on variable $headOid and argument expectedHeadOid (String! / GitObjectID!)</blockquote>このエラー内容は、develop版でもdevelop-proto版でも同じです。また、このときDevToolsのコンソールには特に何も出力されません。</blockquote>|
|07:13|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧:  <br><https://github.com/vivliostyle/vivliostyle-pub/issues/147><br>I can't save in Vivliostyle Pub at all. What is the cause?|
|07:18|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|私のほうではここのところ一切作業できていないのですが可能性としてはAPIのレート制限に掛っているのかもしれません。<br>とは言え、1時間あたり5000回を超えるとは考えにくいのですが。<br><br>すみませんが、この後仕事で外出しなければならないので対応は今夜になります。|
|07:18|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I haven't been able to work at all so far, but it may be due to API rate limiting.<br>That said, it's unlikely that it will exceed 12500 times per hour.<br><br>I'm sorry, but I'll have to go out for work after this, so I'll be back tonight.|
|07:23|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|ありがとうございます。よろしくお願いします。|
|07:23|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: thank you. Thank you.|
|09:45|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|GraphQLのAPIを実行する際の型指定が合っていなかったことが原因でした。<br>PRを投げたのでレビューを通していただいてマージされれば直ると思います。<br><br>なぜ今になって動かなくなったのかはわかりません。|
|09:45|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: The cause was that the type specification when executing the GraphQL API did not match.<br>I threw a PR, so I think it will be fixed if it is merged through the review.<br><br>I don't know why it stopped working now.|
|09:49|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|ありがとうございます。緊急なので、いますぐマージしてよいでしょうか？|
|09:49|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: thank you. Is it urgent, can I merge it now?|
|09:50|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|お願い致します。|
|09:50|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: Thank you.|
|09:52|![](https://avatars.slack-edge.com/2021-11-13/2734732574129_8d1b9fea40457c8d0a44_72.png)|Ayumu Takai|マージされた <https://vivliostyle-pub-develop.vercel.app/> で保存できるところまでは動作確認できました。<br><br>お騒がせ致しまして申し訳ありません。|
|09:52|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I was able to confirm the operation up to the point where it can be saved with the merged <https://vivliostyle-pub-develop.vercel.app/>.<br><br>We apologize for the inconvenience.|
