# 2020-04-03

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|00:24|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|`@spring-raining` violaã§githubãƒ­ã‚°ã‚¤ãƒ³ãŒã§ããªããªã£ã¦ã‚‹ã¿ãŸã„ã§ã™ã€‚|
|00:24|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: Â It seems that github login is not possible with viola.|
|00:24|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|`504 Gateway Time-out`|
|00:24|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã€Œ504ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€|
|00:25|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚|
|00:25|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: It will be.|
|01:00|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|ä»Šã®æ‰€Violaã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦åˆ©ç”¨ã§ããªã„çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚åŸå› ã‚’èª¿æŸ»ã—ãŸã„ã®ã§ã™ãŒã€ãªã‹ãªã‹ä»Šã¯ãã®ãŸã‚ã®æ™‚é–“ãŒã¨ã‚Œãªã„ã®ãŒç¾çŠ¶ã§ã™â€¦&gt;&lt;|
|01:00|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: For now, Viola is logged in and unavailable. I want to investigate the cause, but it is difficult to take the time to do so right now ... &amp; gt; &amp; lt;|
|04:22|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|ãªã‚‹ã»ã©!äº†è§£ã§ã™!<br>ã¯ã‚„ãvivliostyle-pubã§ç½®ãã‹ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ãŒã‚“ã°ã‚Šã¾ã—ã‚‡ã†!!|
|04:22|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: I understand!<br>Let's do our best to replace it with vivliostyle-pub soon!|
|11:51|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Continue vivliostyle-print thread in this development channel `@Johannes Wilm`<br><https://vivliostyle.slack.com/archives/CAECW4S93/p1585912789034300><br><blockquote>`@shinyu` <https://github.com/vivliostyle/vivliostyle-print> has been updated. I will publish to npm once I have access rights. If it costs money to give me those access rights, it may just be better/easier to continue to publish as vivliostyle-print</blockquote>|
|11:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã“ã®é–‹ç™ºãƒãƒ£ãƒãƒ«ã§vivliostyle-printã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ç¶™ç¶šã™ã‚‹<br><https://vivliostyle.slack.com/archives/CAECW4S93/p1585912789034300>|
|11:51|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|ok|
|11:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: OK|
|11:52|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|I invited `@Johannes Wilm` to npm org `@vivliostyle`|
|11:52|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: npm org `@ vivliostyle`ã«æ‹›å¾…ã—ã¾ã—ãŸ|
|12:21|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Hmm, I received an invite, clicked on the link, signed in to npmjs... and then nothing happened. Clciking the link a second time doesn't seem to work. Publishing to @vivliostyle/print doesn't seem to work either.|
|12:21|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã†ãƒ¼ã‚“ã€æ‹›å¾…çŠ¶ã‚’å—ã‘å–ã£ã¦ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€npmjsã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ãŸã¨ã“ã‚ã€ä½•ã‚‚èµ·ã“ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒªãƒ³ã‚¯ã‚’ã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚æ©Ÿèƒ½ã—ãªã„ã‚ˆã†ã§ã™ã€‚ @ vivliostyle / printã¸ã®å…¬é–‹ã‚‚æ©Ÿèƒ½ã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚|
|12:32|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|It looks like I am in the vivliostyle organization on npmjs. But I would still need to pay. I don't really see how that makes much sense for us|
|12:32|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ç§ã¯npmjsã®vivliostyleçµ„ç¹”ã«ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€ç§ã¯ã¾ã æ”¯æ‰•ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚ŒãŒç§ãŸã¡ã«ã¨ã£ã¦ã©ã®ã‚ˆã†ã«æ„å‘³ã‚’æˆã™ã‹ã¯æœ¬å½“ã«ã‚ã‹ã‚Šã¾ã›ã‚“|
|12:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Hey you might need to add `publishConfig` to your package.json|
|12:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã­ãˆã€package.jsonã« `publishConfig`ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“|
|12:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope><br><blockquote>NPM has recently introduced @scopes / organizations for the modules. Is there a good way to migrate existing modules to the organization? Are there any tools for automating it for a large number of</blockquote>|
|12:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: <https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope><br>ğŸ‡¯ğŸ‡µ: <https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope>|
|12:56|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|without these config, it will be private by default|
|12:56|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã“ã‚Œã‚‰ã®è¨­å®šãŒãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã«ãªã‚Šã¾ã™|
|12:57|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I see. thank!|
|12:57|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ãã†ã§ã™ã‹ã€‚æ„Ÿè¬ï¼|
|12:58|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|You cannot publish a private package to free npm org and I guess that's the reason you were asked for some money|
|12:58|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I have published it. I will now set a message to users of vivliostyle-print so they update their package|
|12:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã‚ãªãŸã¯ç„¡æ–™ã®npm orgã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€ãã—ã¦ãã‚ŒãŒã‚ãªãŸãŒã„ãã¤ã‹ã®ãŠé‡‘ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸç†ç”±ã ã¨æ€ã„ã¾ã™|
|12:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: å…¬é–‹ã—ã¾ã—ãŸã€‚ vivliostyle-printã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®šã—ã¦ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¾ã™|
|12:59|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Nice!|
|12:59|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã„ã„ã­ï¼|
|13:01|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|pok, I added a deprecation notice <https://www.npmjs.com/package/vivliostyle-print><br><blockquote>Allows page-layouting using the vivliostyle for printing within a website without destroying the original layout</blockquote>|
|13:01|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: pokã€ç§ã¯éæ¨å¥¨ã®é€šçŸ¥ã‚’è¿½åŠ ã—ã¾ã—ãŸ<https://www.npmjs.com/package/vivliostyle-print>|
|13:01|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Should we also do this for the old vivliostyle package?|
|13:01|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: å¤ã„vivliostyleãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚‚ã“ã‚Œã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ|
|13:02|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I used this tool to add the note <https://www.npmjs.com/package/@tiaanduplessis/pkg-rename><br><blockquote>CLI to rename a npm package</blockquote>|
|13:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¢ã‚’è¿½åŠ ã—ã¾ã—ãŸ<https://www.npmjs.com/package/@tiaanduplessis/pkg-rename>|
|13:03|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Yes we also have to deprecate vivliostyle and vivliostyle-savepdf in npm|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã¯ã„ã€npmã§vivliostyleã¨vivliostyle-savepdfã‚‚å»ƒæ­¢ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™|
|13:03|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|correct.|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: æ­£ã—ã„ã€‚|
|13:03|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|ok, it looks like the new print package is working|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã¯ã„ã€æ–°ã—ã„å°åˆ·ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™|
|13:04|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|but notice that I had to use a workaround because the module package exported by @vivliostyle/core could not be read|
|13:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã—ã‹ã—ã€@ vivliostyle / coreã«ã‚ˆã£ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿å–ã‚‹ã“ã¨ãŒã§ããªã‹ã£ãŸãŸã‚ã€å›é¿ç­–ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚|
|13:04|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Instead it does<br>```export {printHTML} from "@vivliostyle/core/lib/cjs/vivliostyle.js"```|
|13:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ä»£ã‚ã‚Šã«<br>`` `{printHTML}ã‚’" @ vivliostyle / core / lib / cjs / vivliostyle.js "ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™` ``|
|13:06|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|It then converts the cjs version to several different outputs, including one version in esm.|
|13:06|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: æ¬¡ã«ã€esmã®1ã¤ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å«ã‚€ã€cjsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã„ãã¤ã‹ã®ç•°ãªã‚‹å‡ºåŠ›ã«å¤‰æ›ã—ã¾ã™ã€‚|
|13:06|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|It should be exported with default scope in next version (core)|
|13:06|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™|
|13:08|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I tried doing<br>```export {printHTML} from "@vivliostyle/core"```|
|13:08|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã‚„ã£ã¦ã¿ãŸ<br>`ã€Œ{@ vivliostyle / core"ã‹ã‚‰{printHTML}ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã€ `|
|13:08|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|but no success|
|13:08|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã—ã‹ã—æˆåŠŸã—ã¾ã›ã‚“|
|13:12|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|in ESM?|
|13:12|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: in ESM?<br>ğŸ‡¯ğŸ‡µ: ESMã§ï¼Ÿ|
|13:13|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|yes, when I did that, it used the esm version of @vivliostyle/core, and that didn't work. I|
|13:13|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã¯ã„ã€ç§ãŒãã‚Œã‚’ã—ãŸã¨ãã€ãã‚Œã¯@ vivliostyle / coreã®esmãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€ãã—ã¦ãã‚Œã¯ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚ç§|
|13:36|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|```Error: 'printHTML' is not exported by node_modules/@vivliostyle/core/lib/vivliostyle.js, imported by src/index.js```<br>|
|13:36|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: `` `ã‚¨ãƒ©ãƒ¼ï¼š 'printHTML'ã¯node_modules/@vivliostyle/core/lib/vivliostyle.jsã«ã‚ˆã£ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œãšã€src / index.jsã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã™` `<br>|
|13:36|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|That's weird. rollup look at UMD version of core when they compile esm for print,|
|13:37|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: esmã‚’ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨ã€å¥‡å¦™ãªã“ã¨ã«ã€ESMãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ãªãã€ã‚³ã‚¢ã®UMDãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚|
|13:38|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|```nodeResolve({<br>                mainFields: ['module', 'browser', 'main']<br>}),```<br>rollup config is correctly configured though.|
|13:38|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: `` `nodeResolveï¼ˆ{<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mainFieldsï¼š['ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«'ã€ 'ãƒ–ãƒ©ã‚¦ã‚¶'ã€ 'ãƒ¡ã‚¤ãƒ³']<br>}ï¼‰ã€ `` `<br>ãŸã ã—ã€ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—æ§‹æˆã¯æ­£ã—ãæ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚|
|13:44|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|<blockquote>That's weird. when rollup compile esm for print, they look at UMD version of core, not ESM version</blockquote>Actually, by default it takes the esm version (module in package.json). That's why I need to change it manually to use the cjs version instead. It then takes the cjs version, recompiles it to esm, and uses that.|
|13:44|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ï¼†gt;ãã‚Œã¯å¤‰ã ã€‚ esmã‚’ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã—ã¦å°åˆ·ç”¨ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨ã€ESMãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ãªãã€ã‚³ã‚¢ã®UMDãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br><br>å®Ÿéš›ã«ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§esmãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆpackage.jsonã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€ä»£ã‚ã‚Šã«cjsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯æ‰‹å‹•ã§å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ¬¡ã«ã€cjsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã—ã¦esmã«å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚|
|13:45|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|I misinterpreted. it's actually cjs problem.|
|13:45|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ç§ã¯èª¤è§£ã—ã¾ã—ãŸã€‚ãã‚Œã¯å®Ÿéš›ã«ã¯cjsã®å•é¡Œã§ã™ã€‚|
|13:49|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Just replacing mainFields in cjs compilation config with ["main", "browser"] would fix this issue.|
|13:49|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: cjsã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨­å®šã®mainFieldsã‚’mainFieldsï¼š["main"ã€ "browser"]ã«ç½®ãæ›ãˆã‚‹ã ã‘ã§ã€ã“ã®å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¾ã™ã€‚|
|13:50|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|line 35|
|13:50|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: 35è¡Œç›®|
|13:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|It seems that the UMD version of core cannot be imported as CJS|
|13:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã‚³ã‚¢ã®UMDãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’CJSã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ããªã„ã‚ˆã†ã§ã™|
|14:54|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600><br><blockquote>*<https://github.com/vivliostyle/vivliostyle-print/compare/f05489c4c3ae...f0f54b212335|1 new commit> pushed to <https://github.com/vivliostyle/vivliostyle-print/tree/master|`master`>*<br><https://github.com/vivliostyle/vivliostyle-print/commit/f0f54b21233519a198ed7281711ed6635d8aee15|`f0f54b21`> - fix: avoid importing umd</blockquote>|
|14:54|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: <https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600><br>ğŸ‡¯ğŸ‡µ: <https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600>|
|14:56|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|`@uetchy` I deleted the "module" line in @vivliostyle/core and then I could compile vivliostyle-print without any problems|
|14:56|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: Â @ vivliostyle / coreã®ã€Œmoduleã€è¡Œã‚’å‰Šé™¤ã—ãŸã¨ã“ã‚ã€vivliostyle-printã‚’å•é¡Œãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã¾ã—ãŸã€‚|
|14:57|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|So that makes me think that the problem appears when rollup tries to use the esm version. When no esm version is available, it automatically takes the cjs version and recompiles it to esm. I don't think the umd version is used at all by rollup (I didn't even know it existed)|
|14:57|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã—ãŸãŒã£ã¦ã€ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ãŒesmãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä½¿ç”¨å¯èƒ½ãªesmãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãªã„å ´åˆã€è‡ªå‹•çš„ã«cjsãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå–å¾—ã•ã‚Œã€ãã‚ŒãŒesmã«å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚ umdãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã§ã¾ã£ãŸãä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã¨æ€ã„ã¾ã™ï¼ˆå­˜åœ¨ã™ã‚‹ã“ã¨ã•ãˆçŸ¥ã‚Šã¾ã›ã‚“ã§ã—ãŸï¼‰|
|14:58|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|This line:<br>```"module": "lib/esm/vivliostyle.js",```|
|14:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã“ã®è¡Œï¼š<br>`` `"ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« "ï¼š" lib / esm / vivliostyle.js "ã€` ``|
|15:02|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|The actual problem was in rollup.config.js's cjs compilation section nodeResolve resolves modules by looking "browser" in package.json first. and "browser" in core's package.json refers UMD module. so it fails to compile cjs module for vivliostyle-print.|
|15:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: å®Ÿéš›ã®å•é¡Œã¯ã€rollup.config.jsã®cjsã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ã‚Šã¾ã—ãŸã€‚nodeResolveã¯ã€æœ€åˆã«package.jsonã®ã€Œãƒ–ãƒ©ã‚¦ã‚¶ã€ã‚’æ¤œç´¢ã—ã¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è§£æ±ºã—ã¾ã™ã€‚ã‚³ã‚¢ã®package.jsonã®ã€Œãƒ–ãƒ©ã‚¦ã‚¶ã€ã¯UMDãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡ã—ã¾ã™ã€‚ãã®ãŸã‚ã€vivliostyle-printã®cjsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã¾ã›ã‚“ã€‚|
|15:04|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Reordering them to look up "main" first gives fix to this since "main" refers CJS module.|
|15:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: æœ€åˆã«ã€Œãƒ¡ã‚¤ãƒ³ã€ã‚’æ¤œç´¢ã™ã‚‹ã‚ˆã†ã«ãã‚Œã‚‰ã‚’ä¸¦ã¹æ›¿ãˆã‚‹ã¨ã€ã€Œãƒ¡ã‚¤ãƒ³ã€ãŒCJSãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ä¿®æ­£ã§ãã¾ã™ã€‚|
|15:05|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I see. I removed them entirely now. Normally one shouldn't have to list those|
|15:05|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ãã†ã§ã™ã‹ã€‚å®Œå…¨ã«å‰Šé™¤ã—ã¾ã—ãŸã€‚é€šå¸¸ã€ãã‚Œã‚‰ã‚’ãƒªã‚¹ãƒˆã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“|
|15:10|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Indeed. Removing mainFields options from both nodeResolve functions would be fine as well.|
|15:10|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ç¢ºã‹ã«ã€‚ä¸¡æ–¹ã®nodeResolveé–¢æ•°ã‹ã‚‰mainFieldsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚|
|15:10|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I just ddi that. I probably added them because the old vivliostyle required them. It seems to be all fixed now though. Thanks!|
|15:10|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ãã‚Œã ã‘ã§ã™ã€‚å¤ã„vivliostyleã§å¿…è¦ã ã£ãŸã®ã§ã€ãŠãã‚‰ãè¿½åŠ ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ç¾åœ¨ã¯ã™ã¹ã¦ä¿®æ­£ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã‚ã‚ŠãŒã¨ã†ï¼|
|15:11|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I have been looking around, but I can actually not find any documentation on what packaging format is expected of the `browser`  field|
|15:12|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ç§ã¯è¦‹å›ã—ã¦ã„ã¾ã™ãŒã€ `browser`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å½¢å¼ãŒæœŸå¾…ã•ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®Ÿéš›ã«ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“|
|15:14|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://docs.npmjs.com/files/package.json#browser>|
|15:14|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: <https://docs.npmjs.com/files/package.json#browser><br>ğŸ‡¯ğŸ‡µ: <https://docs.npmjs.com/files/package.json#browser>|
|15:16|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Yes, I saw that. But it doesn't say whether it's umd or what it is. if you pack your site JS using for example webpack, it used to pick the UMD version by default. I think ity might be the esm version now.|
|15:16|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ã¯ã„ã€è¦‹ã¾ã—ãŸã€‚ã—ã‹ã—ã€ãã‚ŒãŒumdãªã®ã‹ã€ãã‚ŒãŒä½•ã§ã‚ã‚‹ã®ã‹ã¯æ˜ã‚‰ã‹ã«ã—ã¦ã„ã¾ã›ã‚“ã€‚ãŸã¨ãˆã°webpackã‚’ä½¿ç”¨ã—ã¦ã‚µã‚¤ãƒˆã®JSã‚’ãƒ‘ãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§UMDãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ ityã¯ä»Šã€esmãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚|
|15:19|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|I forgot why I choose UMD for "browser" though CJS is clearly fruitless for browser env.|
|15:19|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: CJSã¯æ˜ã‚‰ã‹ã«ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ç’°å¢ƒã«ã¨ã£ã¦ç„¡ç›Šã§ã™ãŒã€ã€Œãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã€ã«UMDã‚’é¸æŠã™ã‚‹ç†ç”±ã‚’å¿˜ã‚Œã¾ã—ãŸã€‚|
|15:19|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|And you are right. It has to be replaced with esm now.|
|15:19|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: ãã—ã¦ã€ã‚ãªãŸã¯æ­£ã—ã„ã§ã™ã€‚ä»Šã¯esmã«ç½®ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚|
|15:22|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://github.com/vivliostyle/vivliostyle.js/issues/635><br><blockquote>[vivliostyle/vivliostyle.js] #635 Change "browser" field in package.json to refer ESModule</blockquote>|
|15:22|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¬ğŸ‡§: <https://github.com/vivliostyle/vivliostyle.js/issues/635><br>ğŸ‡¯ğŸ‡µ: <https://github.com/vivliostyle/vivliostyle.js/issues/635>|
