# 2020-04-03

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|00:24|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|`@spring-raining` violaでgithubログインができなくなってるみたいです。|
|00:24|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧:  It seems that github login is not possible with viola.|
|00:24|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|`504 Gateway Time-out`|
|00:24|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 「504ゲートウェイタイムアウト」|
|00:25|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|になってしまいます。|
|00:25|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: It will be.|
|01:00|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|今の所Violaはログインして利用できない状態になっています。原因を調査したいのですが、なかなか今はそのための時間がとれないのが現状です…&gt;&lt;|
|01:00|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: For now, Viola is logged in and unavailable. I want to investigate the cause, but it is difficult to take the time to do so right now ... &amp; gt; &amp; lt;|
|04:22|![](https://secure.gravatar.com/avatar/b54abc5e7463fe6470c379e97e3f2477.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|youchan|なるほど!了解です!<br>はやくvivliostyle-pubで置きかえられるようがんばりましょう!!|
|04:22|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: I understand!<br>Let's do our best to replace it with vivliostyle-pub soon!|
|11:51|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Continue vivliostyle-print thread in this development channel `@Johannes Wilm`<br><https://vivliostyle.slack.com/archives/CAECW4S93/p1585912789034300><br><blockquote>`@shinyu` <https://github.com/vivliostyle/vivliostyle-print> has been updated. I will publish to npm once I have access rights. If it costs money to give me those access rights, it may just be better/easier to continue to publish as vivliostyle-print</blockquote>|
|11:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: この開発チャネルでvivliostyle-printスレッドを継続する<br><https://vivliostyle.slack.com/archives/CAECW4S93/p1585912789034300>|
|11:51|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|ok|
|11:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: OK|
|11:52|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|I invited `@Johannes Wilm` to npm org `@vivliostyle`|
|11:52|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: npm org `@ vivliostyle`に招待しました|
|12:21|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Hmm, I received an invite, clicked on the link, signed in to npmjs... and then nothing happened. Clciking the link a second time doesn't seem to work. Publishing to @vivliostyle/print doesn't seem to work either.|
|12:21|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: うーん、招待状を受け取ってリンクをクリックし、npmjsにサインインしたところ、何も起こりませんでした。リンクをもう一度クリックしても機能しないようです。 @ vivliostyle / printへの公開も機能していないようです。|
|12:32|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|It looks like I am in the vivliostyle organization on npmjs. But I would still need to pay. I don't really see how that makes much sense for us|
|12:32|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 私はnpmjsのvivliostyle組織にいるようです。しかし、私はまだ支払う必要があります。それが私たちにとってどのように意味を成すかは本当にわかりません|
|12:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Hey you might need to add `publishConfig` to your package.json|
|12:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: ねえ、package.jsonに `publishConfig`を追加する必要があるかもしれません|
|12:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope><br><blockquote>NPM has recently introduced @scopes / organizations for the modules. Is there a good way to migrate existing modules to the organization? Are there any tools for automating it for a large number of</blockquote>|
|12:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: <https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope><br>🇯🇵: <https://stackoverflow.com/questions/43007471/how-to-migrate-npm-package-to-an-organization-scope>|
|12:56|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|without these config, it will be private by default|
|12:56|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: これらの設定がない場合、デフォルトでプライベートになります|
|12:57|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I see. thank!|
|12:57|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: そうですか。感謝！|
|12:58|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|You cannot publish a private package to free npm org and I guess that's the reason you were asked for some money|
|12:58|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I have published it. I will now set a message to users of vivliostyle-print so they update their package|
|12:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: あなたは無料のnpm orgにプライベートパッケージを公開することはできません、そしてそれがあなたがいくつかのお金を求められた理由だと思います|
|12:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 公開しました。 vivliostyle-printのユーザーにメッセージを設定して、パッケージを更新します|
|12:59|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Nice!|
|12:59|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: いいね！|
|13:01|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|pok, I added a deprecation notice <https://www.npmjs.com/package/vivliostyle-print><br><blockquote>Allows page-layouting using the vivliostyle for printing within a website without destroying the original layout</blockquote>|
|13:01|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: pok、私は非推奨の通知を追加しました<https://www.npmjs.com/package/vivliostyle-print>|
|13:01|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Should we also do this for the old vivliostyle package?|
|13:01|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 古いvivliostyleパッケージでもこれを行う必要がありますか？|
|13:02|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I used this tool to add the note <https://www.npmjs.com/package/@tiaanduplessis/pkg-rename><br><blockquote>CLI to rename a npm package</blockquote>|
|13:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: このツールを使用してメモを追加しました<https://www.npmjs.com/package/@tiaanduplessis/pkg-rename>|
|13:03|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Yes we also have to deprecate vivliostyle and vivliostyle-savepdf in npm|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: はい、npmでvivliostyleとvivliostyle-savepdfも廃止する必要があります|
|13:03|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|correct.|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 正しい。|
|13:03|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|ok, it looks like the new print package is working|
|13:03|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: はい、新しい印刷パッケージが機能しているようです|
|13:04|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|but notice that I had to use a workaround because the module package exported by @vivliostyle/core could not be read|
|13:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: しかし、@ vivliostyle / coreによってエクスポートされたモジュールパッケージを読み取ることができなかったため、回避策を使用する必要があったことに注意してください。|
|13:04|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Instead it does<br>```export {printHTML} from "@vivliostyle/core/lib/cjs/vivliostyle.js"```|
|13:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 代わりに<br>`` `{printHTML}を" @ vivliostyle / core / lib / cjs / vivliostyle.js "からエクスポートします` ``|
|13:06|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|It then converts the cjs version to several different outputs, including one version in esm.|
|13:06|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 次に、esmの1つのバージョンを含む、cjsバージョンをいくつかの異なる出力に変換します。|
|13:06|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|It should be exported with default scope in next version (core)|
|13:06|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 次のバージョンではデフォルトのスコープでエクスポートする必要があります|
|13:08|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I tried doing<br>```export {printHTML} from "@vivliostyle/core"```|
|13:08|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: やってみた<br>`「{@ vivliostyle / core"から{printHTML}をエクスポートする」 `|
|13:08|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|but no success|
|13:08|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: しかし成功しません|
|13:12|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|in ESM?|
|13:12|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: in ESM?<br>🇯🇵: ESMで？|
|13:13|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|yes, when I did that, it used the esm version of @vivliostyle/core, and that didn't work. I|
|13:13|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: はい、私がそれをしたとき、それは@ vivliostyle / coreのesmバージョンを使用しました、そしてそれはうまくいきませんでした。私|
|13:36|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|```Error: 'printHTML' is not exported by node_modules/@vivliostyle/core/lib/vivliostyle.js, imported by src/index.js```<br>|
|13:36|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: `` `エラー： 'printHTML'はnode_modules/@vivliostyle/core/lib/vivliostyle.jsによってエクスポートされず、src / index.jsによってインポートされます` `<br>|
|13:36|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|That's weird. rollup look at UMD version of core when they compile esm for print,|
|13:37|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: esmをロールアップコンパイルすると、奇妙なことに、ESMバージョンではなく、コアのUMDバージョンが表示されます。|
|13:38|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|```nodeResolve({<br>                mainFields: ['module', 'browser', 'main']<br>}),```<br>rollup config is correctly configured though.|
|13:38|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: `` `nodeResolve（{<br>                mainFields：['モジュール'、 'ブラウザ'、 'メイン']<br>}）、 `` `<br>ただし、ロールアップ構成は正しく構成されています。|
|13:44|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|<blockquote>That's weird. when rollup compile esm for print, they look at UMD version of core, not ESM version</blockquote>Actually, by default it takes the esm version (module in package.json). That's why I need to change it manually to use the cjs version instead. It then takes the cjs version, recompiles it to esm, and uses that.|
|13:44|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: ＆gt;それは変だ。 esmをロールアップして印刷用にコンパイルすると、ESMバージョンではなく、コアのUMDバージョンが表示されます。<br><br>実際には、デフォルトでesmバージョン（package.jsonのモジュール）を使用します。そのため、代わりにcjsバージョンを使用するには手動で変更する必要があります。次に、cjsバージョンを取得してesmに再コンパイルし、それを使用します。|
|13:45|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|I misinterpreted. it's actually cjs problem.|
|13:45|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 私は誤解しました。それは実際にはcjsの問題です。|
|13:49|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Just replacing mainFields in cjs compilation config with ["main", "browser"] would fix this issue.|
|13:49|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: cjsコンパイル設定のmainFieldsをmainFields：["main"、 "browser"]に置き換えるだけで、この問題が修正されます。|
|13:50|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|line 35|
|13:50|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 35行目|
|13:55|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|It seems that the UMD version of core cannot be imported as CJS|
|13:55|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: コアのUMDバージョンをCJSとしてインポートできないようです|
|14:54|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600><br><blockquote>*<https://github.com/vivliostyle/vivliostyle-print/compare/f05489c4c3ae...f0f54b212335|1 new commit> pushed to <https://github.com/vivliostyle/vivliostyle-print/tree/master|`master`>*<br><https://github.com/vivliostyle/vivliostyle-print/commit/f0f54b21233519a198ed7281711ed6635d8aee15|`f0f54b21`> - fix: avoid importing umd</blockquote>|
|14:54|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: <https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600><br>🇯🇵: <https://vivliostyle.slack.com/archives/CAKE04A83/p1585925615021600>|
|14:56|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|`@uetchy` I deleted the "module" line in @vivliostyle/core and then I could compile vivliostyle-print without any problems|
|14:56|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵:  @ vivliostyle / coreの「module」行を削除したところ、vivliostyle-printを問題なくコンパイルできました。|
|14:57|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|So that makes me think that the problem appears when rollup tries to use the esm version. When no esm version is available, it automatically takes the cjs version and recompiles it to esm. I don't think the umd version is used at all by rollup (I didn't even know it existed)|
|14:57|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: したがって、ロールアップがesmバージョンを使用しようとすると問題が発生すると思います。使用可能なesmバージョンがない場合、自動的にcjsバージョンが取得され、それがesmに再コンパイルされます。 umdバージョンはロールアップでまったく使用されていないと思います（存在することさえ知りませんでした）|
|14:58|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|This line:<br>```"module": "lib/esm/vivliostyle.js",```|
|14:58|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: この行：<br>`` `"モジュール "：" lib / esm / vivliostyle.js "、` ``|
|15:02|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|The actual problem was in rollup.config.js's cjs compilation section nodeResolve resolves modules by looking "browser" in package.json first. and "browser" in core's package.json refers UMD module. so it fails to compile cjs module for vivliostyle-print.|
|15:02|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 実際の問題は、rollup.config.jsのcjsコンパイルセクションにありました。nodeResolveは、最初にpackage.jsonの「ブラウザ」を検索してモジュールを解決します。コアのpackage.jsonの「ブラウザ」はUMDモジュールを指します。そのため、vivliostyle-printのcjsモジュールをコンパイルできません。|
|15:04|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Reordering them to look up "main" first gives fix to this since "main" refers CJS module.|
|15:04|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 最初に「メイン」を検索するようにそれらを並べ替えると、「メイン」がCJSモジュールを参照するため、これを修正できます。|
|15:05|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I see. I removed them entirely now. Normally one shouldn't have to list those|
|15:05|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: そうですか。完全に削除しました。通常、それらをリストする必要はありません|
|15:10|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|Indeed. Removing mainFields options from both nodeResolve functions would be fine as well.|
|15:10|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 確かに。両方のnodeResolve関数からmainFieldsオプションを削除しても問題ありません。|
|15:10|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I just ddi that. I probably added them because the old vivliostyle required them. It seems to be all fixed now though. Thanks!|
|15:10|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: それだけです。古いvivliostyleで必要だったので、おそらく追加しました。しかし、現在はすべて修正されているようです。ありがとう！|
|15:11|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|I have been looking around, but I can actually not find any documentation on what packaging format is expected of the `browser`  field|
|15:12|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: 私は見回していますが、 `browser`フィールドにどのパッケージ形式が期待されるかについてのドキュメントは実際には見つかりません|
|15:14|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://docs.npmjs.com/files/package.json#browser>|
|15:14|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: <https://docs.npmjs.com/files/package.json#browser><br>🇯🇵: <https://docs.npmjs.com/files/package.json#browser>|
|15:16|![](https://secure.gravatar.com/avatar/4bfb46cf7e0d60e07f9d685589e68267.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|Johannes Wilm|Yes, I saw that. But it doesn't say whether it's umd or what it is. if you pack your site JS using for example webpack, it used to pick the UMD version by default. I think ity might be the esm version now.|
|15:16|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: はい、見ました。しかし、それがumdなのか、それが何であるのかは明らかにしていません。たとえばwebpackを使用してサイトのJSをパックすると、デフォルトでUMDバージョンが選択されていました。 ityは今、esmバージョンかもしれません。|
|15:19|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|I forgot why I choose UMD for "browser" though CJS is clearly fruitless for browser env.|
|15:19|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: CJSは明らかにブラウザー環境にとって無益ですが、「ブラウザー」にUMDを選択する理由を忘れました。|
|15:19|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|And you are right. It has to be replaced with esm now.|
|15:19|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇯🇵: そして、あなたは正しいです。今はesmに置き換える必要があります。|
|15:22|![](https://avatars.slack-edge.com/2020-01-22/916403977808_18dc4c6c299ded1b6018_72.png)|uetchy|<https://github.com/vivliostyle/vivliostyle.js/issues/635><br><blockquote>[vivliostyle/vivliostyle.js] #635 Change "browser" field in package.json to refer ESModule</blockquote>|
|15:22|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|🇬🇧: <https://github.com/vivliostyle/vivliostyle.js/issues/635><br>🇯🇵: <https://github.com/vivliostyle/vivliostyle.js/issues/635>|
