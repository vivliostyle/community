# 2025-06-23

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|06:38|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|<https://github.com/vivliostyle/vivliostyle.js/issues/1524><br>ページセレクタの書き方で `@page: left` （コロンの後に空白がある誤り。正しくは `@page :left` ）がVivliostyle.jsで許容されている問題をissueにしました。<br>Vivliostyle以外の実装、たとえばGoogle Chromeでも `@page :left` などはサポートされている）では `@page: left` は許容されません（そのテストをしたスクリーンショットもissueに載せました）。<br><br>以前、`@lwohtsu` さんから、 `@page :left`  と書いてもVSCodeのコード整形により `@page: left` に書き換えられてしまうと聞いた記憶があります。そこで、こちらでもVSCodeで試してみたのですが、再現しません。ただし  `@page:left`  のようにスペースを `:` の前後どちらにも入れないで書いた場合には `@page: left` に書き換えられてしまうことが分かりました。`@page` のあとに必ずスペースを入れて書くようにするなら、問題は起きないのではないかと思います。 `@lwohtsu` さん、再確認お願いできないでしょうか？　（VSCodeで使用しているコード整形の設定の違いなどで変わるかもしれないので）<br><blockquote>Vivliostyle.js currently accepts the syntax `@page: left` (with a space after the colon) for page selectors, but this is incorrect according to the CSS Paged Media specification. The correct syntax is `@page :left` (with no space after the colon).<br><br>Spec: <https://drafts.csswg.org/css-page-3/#syntax-page-selector|https://drafts.csswg.org/css-page-3/#syntax-page-selector><br><br>> ```<br>> @page = @page <page-selector-list>? { <declaration-rule-list> }<br>> <page-selector-list> = <page-selector>#<br>> <page-selector> = [ <ident-token>? <pseudo-page>* ]!<br>> <pseudo-page> = : [ left | right | first | blank ]<br>> …<br>> <br>> ```<br>> <br>> • No whitespace is allowed between the productions in `<page-selector>` or `<pseudo-page>` (similar to the rule for `<compound-selector>`).<br><br>Good and bad examples:<br><br>• ①Good: <https://gist.githack.com/MurakamiShinyu/2ca3e0c717c42fc3b604284dca6ce1d7/raw/page-space-colon.html|page-space-colon.html>  <br>@page :first {  <br>  @top-center {  <br>    content: "First Page";  <br>  }  <br>}  <br>@page :left {  <br>  @top-left {  <br>    content: "Left Page";  <br>  }  <br>}  <br>@page :right {  <br>  @top-right {  <br>    content: "Right Page";  <br>  }  <br>}<br>• ②Bad (incorrect syntax, but currently accepted by Vivliostyle.js): <https://gist.githack.com/MurakamiShinyu/2ca3e0c717c42fc3b604284dca6ce1d7/raw/page-colon-space.html|page-colon-space.html>  <br>@page: first {  <br>  @top-center {  <br>    content: "First Page";  <br>  }  <br>}  <br>@page: left {  <br>  @top-left {  <br>    content: "Left Page";  <br>  }  <br>}  <br>@page: right {  <br>  @top-right {  <br>    content: "Right Page";  <br>  }  <br>}<br><br>*Screenshot in Vivliostyle Viewer:*<br><br>①Good and ②Bad (incorrect syntax, but currently accepted by Vivliostyle.js) have the same result.<br><br><https://private-user-images.githubusercontent.com/3324737/457748292-c3a71949-73e6-44a9-a818-a11fee7d8304.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODI5Mi1jM2E3MTk0OS03M2U2LTQ0YTktYTgxOC1hMTFmZWU3ZDgzMDQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDEyNmU2MWE1NDE2MDJhZjFjNTZkMjQ4YmM0YWRhOWZhMjJmYjAxZTI2YjZmYjY2MzljOTcxMmQ0MzY2ZThlMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.t4s2E6t9pva9ozfc0a8Oxf7M7x8wnNS8-d3-C64nHtg|[Image](https://private-user-images.githubusercontent.com/3324737/457748292-c3a71949-73e6-44a9-a818-a11fee7d8304.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODI5Mi1jM2E3MTk0OS03M2U2LTQ0YTktYTgxOC1hMTFmZWU3ZDgzMDQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDEyNmU2MWE1NDE2MDJhZjFjNTZkMjQ4YmM0YWRhOWZhMjJmYjAxZTI2YjZmYjY2MzljOTcxMmQ0MzY2ZThlMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.t4s2E6t9pva9ozfc0a8Oxf7M7x8wnNS8-d3-C64nHtg)><br><br>*Screenshots in Google Chrome's Print Preview (not using Vivliostyle):*<br><br>①Good<br><br><https://private-user-images.githubusercontent.com/3324737/457748331-89db2e81-5e03-4b07-a149-3f1252b8bfe1.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODMzMS04OWRiMmU4MS01ZTAzLTRiMDctYTE0OS0zZjEyNTJiOGJmZTEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmMwZWYyZGY1ODc2YjI5NDhjODcyYWMzMTNiYjJhMTNlYjFiYjcxYzM3ZmEzZmRjYjc4ZWYzYzIwNWEzZjQ5ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.yJuFKxI4IXfVy0VDxia_IKPTQ8GnlKJ_AuW7GSDfZgo|[Image](https://private-user-images.githubusercontent.com/3324737/457748331-89db2e81-5e03-4b07-a149-3f1252b8bfe1.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODMzMS04OWRiMmU4MS01ZTAzLTRiMDctYTE0OS0zZjEyNTJiOGJmZTEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmMwZWYyZGY1ODc2YjI5NDhjODcyYWMzMTNiYjJhMTNlYjFiYjcxYzM3ZmEzZmRjYjc4ZWYzYzIwNWEzZjQ5ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.yJuFKxI4IXfVy0VDxia_IKPTQ8GnlKJ_AuW7GSDfZgo)><br><br>②Bad: Page headers are not shown because the page rules have incorrect syntax.<br><br><https://private-user-images.githubusercontent.com/3324737/457748392-c50dd63a-d81a-4ab1-8233-652b8c57037c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODM5Mi1jNTBkZDYzYS1kODFhLTRhYjEtODIzMy02NTJiOGM1NzAzN2MucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Yjc3NDUzY2MzZTM2YzBlNjhkODJjZGEyNTE0OTA5NGI3MmViOTAzN2FmYzY1NTYzMTQ4ZTkyMzZmYTc3NmQzMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.VH75lC3q0ywCLNRW1CDZsSMh2QDOms5gfPjRtsuSMVM|[Image](https://private-user-images.githubusercontent.com/3324737/457748392-c50dd63a-d81a-4ab1-8233-652b8c57037c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTA2NjEwMjYsIm5iZiI6MTc1MDY2MDcyNiwicGF0aCI6Ii8zMzI0NzM3LzQ1Nzc0ODM5Mi1jNTBkZDYzYS1kODFhLTRhYjEtODIzMy02NTJiOGM1NzAzN2MucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDYyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA2MjNUMDYzODQ2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Yjc3NDUzY2MzZTM2YzBlNjhkODJjZGEyNTE0OTA5NGI3MmViOTAzN2FmYzY1NTYzMTQ4ZTkyMzZmYTc3NmQzMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.VH75lC3q0ywCLNRW1CDZsSMh2QDOms5gfPjRtsuSMVM)></blockquote>|
|10:08|![](https://secure.gravatar.com/avatar/6a1342affe7c337c61db338b633abef3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|lwohtsu|他の社員の環境までは調べられなかったのですが、私のVSCodeにはPrettier拡張機能が入っています（書籍執筆時も確かPrettierありだったように記憶していますが、バージョンなどは不明です）。<br>今試してみたところ、村上さんの報告どおりに動作しました。<br>```「@page:tobira」→「@page: tobira」<br>「@page :tobira」→「@page :tobira」```<br>|
|10:34|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|私のVSCodeではPrettier拡張機能を有効にした場合と無効にした場合の両方をテストして、どちらでも同じ結果でした。<br>このことから`@page :left` と入力していれば、`@page: left` に書き換わる問題は存在しないといえます。<br>将来Vivliostyle.jsのCSSパーサーの修正によって、`@page: left` では動作しなくなる可能性もあるので、御社内でのスタイルシートで`@page: left` のように書かれていたら、なるべく修正お願いします。<br><br>なお名前付きページとページ擬似クラスを一緒に使うときは `@page tobira:left` のように書きます。これを  `@page tobira: left` のように書くのは誤りですが今のVivliostyle.jsでは有効になってしまいます。 `@page tobira :left` と書くのも誤りでこちらのほうは正しく無効になります。|
