# 2025-08-06

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|01:17|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|長いHTMLで目次を作ると、ページ番号に使うtarget-counterと、attr(href url)がずれてしまいます。<br>ズレるサンプルをお送りいたします。このサンプルでは、target-counterは正しいのですが、アンカージャンプするページがずれてしまっています。<br>style-print.cssは./cssに入れて実行してください。<br>```content: target-counter(attr(href url), page);```<br>https://vivliostyle.slack.com/files/UAE8V83GA/F09961RKZ0C/book-print.html<br>https://vivliostyle.slack.com/files/UAE8V83GA/F09961RGL3E/___8__________________sf_________.pdf<br>https://vivliostyle.slack.com/files/UAE8V83GA/F099SG3TE8Y/style-print.css|
|05:42|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|バグ報告ありがとうございます。<br>調べたところ、長くないHTMLでもこの問題が起きました。次のテストサンプルなど：<br><https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/test/files/leader/toc-leader.html><br><br>Vivliostyle CLI v9.3.0 (core v2.33.0 / Chromium 138) からこの問題が起きていて、その前の v9.2.0 (core v2.32.1 / Chromium 136) までは問題ありませんでした。<br>Chromiumの更新が関係するようです。対策できないか調べます。<br><blockquote><pre><!DOCTYPE html><br><html lang="en"><br>  <head><br>    <meta charset="UTF-8" /><br>    <title>Test leader() in Table of Contents</title><br>    <style><br>      @page {<br>        @bottom-center {<br>          writing-mode: horizontal-tb;<br>          content: counter(page);<br>        }<br>      }<br>      nav li a::after {<br>        content: leader(dotted) target-counter(attr(href), page);<br>      }<br>      nav li a {<br>        text-decoration: none;<br>      }<br>      nav > ol {<br>        list-style: upper-roman;<br>      }<br>      section {<br>        break-before: page;<br>      }<br>    </style><br>  </head><br>  <body><br>    <nav><br>      <h2>Table of Contents</h2><br>      <!-- TOC items are copied from https://github.com/vivliostyle/vivliostyle_doc/tree/gh-pages/en/events/vivliostyle-css-paged-media-20210410 --><br>      <ol><br>        <li><br>          <a href="#js-core">CSS typesetting engine: Vivliostyle.js Core</a><br>          <ol><br>            <li><br>              <a href="#vivliostyle-idea"<br>                >The idea of Vivliostyle.js, since 2014</a<br>              ><br>            </li><br>            <li><br>              <a href="#css-specs"<br>                >Which CSS specifications are required for CSS typesetting?</a<br>              ><br>            </li><br>            <li><br>              <a href="#dev-css-paged-media"<br>                >Redeveloping CSS Paged Media support</a<br>              ><br>            </li><br>          </ol><br>        </li><br>        <li><br>          <a href="#use-css-paged-media"<br>            >Let's get familiar with CSS Paged Media!</a<br>          ><br>          <ol><br>            <li><br>              <a href="#named-strings">Named strings—for running headers</a><br>            </li><br>            <li><a href="#named-pages">Named pages—page type selector</a></li><br>            <li><a href="#nth-page">Nth page selector: nth()</a></li><br>          </ol><br>        </li><br>        <li><br>          <a href="#specs-supported"<br>            >Summary of supported CSS specs for paged media</a<br>          ><br>          <ol><br>            <li><a href="#css-page">CSS Paged Media Level 3</a></li><br>            <li><br>              <a href="#css-gcpm"<br>                >CSS Generated Content for Paged Media (GCPM)</a<br>              ><br>            </li><br>            <li><a href="#css-break">CSS Fragmentation Level 3</a></li><br>            <li><a href="#css-page-floats">CSS Page Floats</a></li><br>            <li><br>              <a href="#documents"<br>                >For more info, visit Vivliostyle Documents→Supported CSS<br>                Features</a<br>              ><br>            </li><br>          </ol><br>        </li><br>      </ol><br>    </nav><br>    <section id="js-core" class="level1"><br>      <h1>CSS typesetting engine: Vivliostyle.js Core</h1><br>      <section id="vivliostyle-idea" class="level2"><br>        <h2>The idea of Vivliostyle.js, since 2014</h2><br>      </section><br>      <section id="css-specs" class="level2"><br>        <h2>Which CSS specs are required for CSS typesetting?</h2><br>      </section><br>      <section id="dev-css-paged-media" class="level2"><br>        <h2>Redeveloping CSS Paged Media support</h2><br>      </section><br>    </section><br>    <section id="use-css-paged-media" class="level1"><br>      <h1>Let's get familiar with CSS Paged Media!</h1><br>      <section id="named-strings" class="level2"><br>        <h2>Named strings—for running headers</h2><br>      </section><br>      <section id="named-pages" class="level2"><br>        <h2>Named pages—page type selector</h2><br>      </section><br>      <section id="nth-page" class="level2"><br>        <h2>Nth page selector: nth()</h2><br>      </section><br>    </section><br>    <section id="specs-supported" class="level1"><br>      <h1>Summary of supported CSS specs for paged media</h1><br>      <section id="css-page" class="level2"><br>        <h2>CSS Paged Media Level 3</h2><br>      </section><br>      <section id="css-gcpm" class="level2"><br>        <h2>CSS Generated Content for Paged Media (GCPM)</h2><br>      </section><br>      <section id="css-break" class="level2"><br>        <h2>CSS Fragmentation Level 3</h2><br>      </section><br>      <section id="css-page-floats" class="level2"><br>        <h2>CSS Page Floats</h2><br>      </section><br>      <section id="documents" class="level2"><br>        <h2><br>          For more info, visit Vivliostyle Documents→Supported CSS Features<br>        </h2><br>      </section><br>    </section><br>  </body><br></html><br></pre></blockquote>|
|05:53|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|ご返答ありがとうございます。とりあえずこちらはバージョン落として作り直します。|
|07:28|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|9.2.0で正常な位置にアンカージャンプできることを確認しました。|
|07:29|![](https://secure.gravatar.com/avatar/071ca54af656223d6d39098e0598e777.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png)|藤井太洋|しかしこのバージョンだとタイムアウトしてしまうことが多くなります。Chromium、徐々に性能が向上しているのでしょうね。|
|08:04|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Issue登録しました。<br><https://github.com/vivliostyle/vivliostyle.js/issues/1541><br>Vivliostyle.jsを介さないChromeだけでのPDF出力では問題なく内部リンクが機能するので、Vivliostyle.jsで加えている処理と最新Chrome (Chromium)とでうまくいかなくなった問題だと思います。それを調べます。<br><blockquote>Test sample HTML:<br><br><https://gist.githack.com/MurakamiShinyu/3302320b2b9a424f26f5be730435a2e3/raw/navtest.html|navtest.html><br><br><!DOCTYPE html><br><html lang="en"><br><head><br>  <meta charset="UTF-8"><br>  <title>Navigation Test</title><br>  <style><br>    section {<br>      break-before: page;<br>    }<br>  </style><br></head><br><body><br>  <h1>Navigation Test</h1><br>  <nav><br>    <h2>Table of Contents</h2><br>    <ul><br>      <li><a href="#section1">Section 1</a></li><br>      <li><a href="#section2">Section 2</a></li><br>      <li><a href="#section3">Section 3</a></li><br>    </ul><br>  </nav><br>  <section id="section1"><br>    <h3>Section 1</h3><br>    <p>This is the content of Section 1.</p><br>  </section><br>  <section id="section2"><br>    <h3>Section 2</h3><br>    <p>This is the content of Section 2.</p><br>  </section><br>  <section id="section3"><br>    <h3>Section 3</h3><br>    <p>This is the content of Section 3.</p><br>  </section><br></body><br></html><br><br>Generate PDF using Vivliostyle CLI:<br><br>vivliostyle build navtest.html -o navtest.pdf<br><br>Or save PDF from Google Chrome with Vivliostyle Viewer:<br><br><https://vivliostyle.org/viewer/#src=https://gist.githack.com/MurakamiShinyu/3302320b2b9a424f26f5be730435a2e3/raw/navtest.html|https://vivliostyle.org/viewer/#src=https://gist.githack.com/MurakamiShinyu/3302320b2b9a424f26f5be730435a2e3/raw/navtest.html><br><br>Generated PDF: <https://gist.githack.com/MurakamiShinyu/3302320b2b9a424f26f5be730435a2e3/raw/navtest.pdf|navtest.pdf><br><br>The internal links in the generated PDF do not work correctly. Clicking on a link in the Table of Contents does not navigate to the corresponding section as expected, e.g., clicking on "Section 1" results in navigation to the Section 3, and clicking on "Section 2" results in navigation to Section 1.<br><br>This problem did not occur until Vivliostyle CLI v9.2.0 (core v2.32.1 / Chromium 136), and it started from Vivliostyle CLI v9.3.0 (core v2.33.0 / Chromium 138). It seems to be related to Chromium's update from version 136 to 138.</blockquote>|
