# 2025-12-24

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|02:26|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|CLI v10で、docker imageのversionタグが付かなくなって<br>```<http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>: not found```<br>となっています。Issue:<br><https://github.com/vivliostyle/vivliostyle-cli/issues/690><br><br>`@spring-raining` 対応お願いできますか？<br><blockquote>This happens when calling with `--preflight press-ready `  <br>Like this:.<br><br><pre>npx vivliostyle build --preflight press-ready --language de docs/print.html -o print.pdf<br></pre><br><br>Looking at the <https://github.com/vivliostyle/vivliostyle-cli/pkgs/container/cli|container list>, the version numbers look to be not corsponding with releases.<br><br>Cause of the issue might be that the image isn't build as part of the release workflow.<br><br><pre>INFO Start building<br>INFO Launching PDF build environment<br>INFO Rendering browser is not installed yet. Downloading now.<br><br>Downloading chrome 143.0.7499.42 - 167.4 MB [====================] 100% 0.0s <br><br>INFO Building pages<br>INFO Building PDF<br>INFO Processing PDF<br>INFO Running press-ready<br><br>INFO Launching docker container<br><br>Unable to find image '<http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>' locally<br>docker: Error response from daemon: failed to resolve reference "<http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>": <http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>: not found<br><br>Run 'docker run --help' for more information<br><br>╲▁▁  Processing PDF<br>ERROR Error: An error occurred on the running container. Please see logs above.<br>    at runContainer (file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/chunk-G34B36B2.js:148:11)<br>    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)<br>    at async pressReadyWithContainer (file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/chunk-G34B36B2.js:223:3)<br>    at async _PostProcess.save (file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/chunk-G34B36B2.js:282:9)<br>    at async buildPDF (file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/chunk-G34B36B2.js:587:3)<br>    at async build (file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/chunk-G34B36B2.js:719:22)<br>    at async file:///Users/cmahnke/Blogs/kleiderbuegel/node_modules/@vivliostyle/cli/dist/commands/build.js:181:3<br><br>If you think this is a bug, please report at <https://github.com/vivliostyle/vivliostyle-cli/issues><br>(base) MacBookPro:kleiderbuegel cmahnke$ docker pull <http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2><br>Error response from daemon: failed to resolve reference "<http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>": <http://ghcr.io/vivliostyle/cli:10.0.2|ghcr.io/vivliostyle/cli:10.0.2>: not found<br></pre></blockquote>|
|07:37|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|AI (VSCode Copilot, Claude Opus 4.5)でプルリクエスト作ってもらった<br><https://github.com/vivliostyle/vivliostyle-cli/pull/699><br><blockquote>## Summary<br><br>This PR fixes issue <https://github.com/vivliostyle/vivliostyle-cli/issues/690|#690> where Docker images are not being tagged with version numbers (e.g., `10.0.2`, `10.1.0`) since the v10.0.0 release.<br><br>## Problem<br><br>The `release` job in the release workflow was using the default `GITHUB_TOKEN` to push tags. Due to GitHub's recursive workflow prevention policy, *pushes made with `GITHUB_TOKEN` do not trigger other workflows*.<br><br>As a result, when version tags (e.g., `v10.0.0`) were pushed, the `cd-workflow.yml` was not triggered, and Docker images were only built with the `main` tag (from the branch push), not with version-specific tags.<br><br>## Solution<br><br>This PR updates the `release` job to:<br><br>1. Generate a GitHub App token (`vivliostyle-bot`)<br>2. Use that token for checkout and git operations<br>3. Push tags using the GitHub App token, which properly triggers the `cd-workflow`<br><br>## Changes<br><br>• Added `actions/create-github-app-token` step to the `release` job<br>• Updated `actions/checkout` to use the app token<br>• Added `git remote set-url` to use the app token for push operations<br><br>## Testing<br><br>After merging this PR, the next release should properly trigger `cd-workflow.yml` when the version tag is pushed, resulting in Docker images tagged with version numbers.<br><br>Fixes <https://github.com/vivliostyle/vivliostyle-cli/issues/690|#690></blockquote>|
|09:38|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|`@spring-raining` Vivliostyle CLIのDocker機能が使えない状態になっているのはまずいので、なるべく早くこの修正を含むパッチリリースするか、バージョンのタグ無しになってる現バージョン `10.1.0` のタグを手動でつけておくとよいと思います。|
