# 2025-04-24

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|02:15|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|CSSで行の折り返しをいい感じにするのに text-wrap: balance や pretty が役に立ちます。Chromiumで実装されたおかげでVivliostyleでCSS組版に使えます。<br>しかし、float（Vivliostyleではfootnoteも）があるとそれが機能しない不具合があります。<br><https://github.com/vivliostyle/vivliostyle.js/issues/1490><br>Chromiumにもバグ報告しました。早く修正されますように！ <https://issues.chromium.org/issues/412580396><br><blockquote>CSS `text-wrap-style` property (`balance` and `pretty` values) works in Vivliostyle.js because Chromium supports it. However unfortunately Chromium has an issue that it does not work when there are float boxes, which I found and reported:<br><br>• <https://issues.chromium.org/issues/412580396|https://issues.chromium.org/issues/412580396><br><br>This Chromium issue affects Vivliostyle.js's layout, not only with normal floats but also with page floats and footnotes.<br><br>Test samples:<br><br>• <https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-floats.html|text-wrap-style-floats.html><br>• <https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-page-bottom-float.html|text-wrap-style-page-bottom-float.html><br>• <https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-footnote.html|text-wrap-style-footnote.html><br><br>Test with Vivliostyle Viewer (v2.31.2):<br><br>• <https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-floats.html|https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-floats.html><br>• <https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-footnote.html|https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-footnote.html><br>• <https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-footnote.html|https://vivliostyle.github.io/viewer/v2.31.2/#src=https://gist.githack.com/MurakamiShinyu/faf3ae494c147b01d6e5a1b36ca82d85/raw/text-wrap-style-footnote.html><br><br>Result screenshots:<br><br><https://private-user-images.githubusercontent.com/3324737/436341691-c56ec045-e68c-40e7-ad66-5b04ae3e4b58.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTY5MS1jNTZlYzA0NS1lNjhjLTQwZTctYWQ2Ni01YjA0YWUzZTRiNTgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTY1NTc3NmY2OGRhNDgzYzg2YmU1NzVmZDA5Yjc0YTI4YTI0YmJhOThlOGJkYmQ2N2EzNWEyMWZiNTAwNzM3YyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.-7wnFj9Y6iRZoNlq77_F3QdZzM7iU7UNs-z9GD-VF4U|[Image](https://private-user-images.githubusercontent.com/3324737/436341691-c56ec045-e68c-40e7-ad66-5b04ae3e4b58.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTY5MS1jNTZlYzA0NS1lNjhjLTQwZTctYWQ2Ni01YjA0YWUzZTRiNTgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTY1NTc3NmY2OGRhNDgzYzg2YmU1NzVmZDA5Yjc0YTI4YTI0YmJhOThlOGJkYmQ2N2EzNWEyMWZiNTAwNzM3YyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.-7wnFj9Y6iRZoNlq77_F3QdZzM7iU7UNs-z9GD-VF4U)><br><br><https://private-user-images.githubusercontent.com/3324737/436341722-c72e9be6-8ff6-4828-bfd1-0c0a29316867.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTcyMi1jNzJlOWJlNi04ZmY2LTQ4MjgtYmZkMS0wYzBhMjkzMTY4NjcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDg1ZjU5ZTNiNjZlOGIxZDA0MDljODhiZGRhNjFhNzZiZGY5OTA1Y2ZkZWNmOGI2YzM5Y2JkZWUwOWIzZGQ1OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.2e_hGxfxEqbvzqfr516FtFmlCDgBW6AmE0k3FKUKb34|[Image](https://private-user-images.githubusercontent.com/3324737/436341722-c72e9be6-8ff6-4828-bfd1-0c0a29316867.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTcyMi1jNzJlOWJlNi04ZmY2LTQ4MjgtYmZkMS0wYzBhMjkzMTY4NjcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDg1ZjU5ZTNiNjZlOGIxZDA0MDljODhiZGRhNjFhNzZiZGY5OTA1Y2ZkZWNmOGI2YzM5Y2JkZWUwOWIzZGQ1OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.2e_hGxfxEqbvzqfr516FtFmlCDgBW6AmE0k3FKUKb34)><br><br><https://private-user-images.githubusercontent.com/3324737/436341752-b5488c6d-1c7a-4865-b363-6da23040ef7b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTc1Mi1iNTQ4OGM2ZC0xYzdhLTQ4NjUtYjM2My02ZGEyMzA0MGVmN2IucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzM2MDU4YTVlNTM1YzFmZGMxZDgxYzQ2YzJjZTE5ZTkzMzliNmVkMDg0NWVkMWMyNzA5NDNhYWRiZTQ3ODE4OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.z6lNLlfKxWZswhF1xp4LSTfHahn5HeRc3Rb0eo5GX-M|[Image](https://private-user-images.githubusercontent.com/3324737/436341752-b5488c6d-1c7a-4865-b363-6da23040ef7b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0NjEyNDMsIm5iZiI6MTc0NTQ2MDk0MywicGF0aCI6Ii8zMzI0NzM3LzQzNjM0MTc1Mi1iNTQ4OGM2ZC0xYzdhLTQ4NjUtYjM2My02ZGEyMzA0MGVmN2IucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDQyNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTA0MjRUMDIxNTQzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzM2MDU4YTVlNTM1YzFmZGMxZDgxYzQ2YzJjZTE5ZTkzMzliNmVkMDg0NWVkMWMyNzA5NDNhYWRiZTQ3ODE4OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.z6lNLlfKxWZswhF1xp4LSTfHahn5HeRc3Rb0eo5GX-M)><br><br>If text-wrap-style works correctly, all text in "-- balance --" blocks are balanced as<br><br><pre>The quick brown<br>fox jumps over<br>the lazy dog.<br></pre><br><br>and all text in "-- pretty --" blocks are pretty, avoiding single word in last line, as<br><br><pre>The quick brown<br>fox jumps over the<br>lazy dog.<br></pre><br><br>but in the actual results, there are problems in pages with floats or footnotes.</blockquote>|
