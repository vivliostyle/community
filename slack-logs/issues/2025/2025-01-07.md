# 2025-01-07

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|10:36|![](https://avatars.slack-edge.com/2025-01-07/8259650351492_36f03f38a7adb2efcbe4_72.png)|PocoPota|おそらく不具合と思われる報告です。<br>見出しに自動的に番号が振られる際, 添付画像のようにH3以下の番号が正常に振られていない状態となっています。本来なら2.1 / 2.1.1 などとなるはずです。<br><br>この不具合はテーマのバージョンが2.0.0の時に発生し, 以前の1.0.1では見られませんでした。<br><br>不具合の原因となっている部分は`thema-base/css/partial/section.css`の`--vs-section--root-counter-reset`が定義されている下の部分(22行目～29行目)だと思われます。その部分のコードを全部消す, または`vs-counter-sec-h1`, `vs-counter-sec-h2`...の部分だけを消すと番号は正常に振られるようになります。<br><br>以下のプルリクの`packages/@vivliostyle/theme-base/css/partial/section.css`の変更の部分が該当部分です。<br><br><https://github.com/vivliostyle/themes/commit/d3c9c5bebe02e2b8b67c608b98da13e4ea505c5c#diff-6b70c01e69010cbdc012dbeabf954fa4d0e8b5baaa995eb8992e33509e0d56c6R19|https://github.com/vivliostyle/themes/commit/d3c9c5bebe02e2b8b67c608b98da13e4ea505c5c#diff-6b70c01e69010cbdc012dbea[…]5baaa995eb8992e33509e0d56c6R19><br><br>コードの全体像が掴めていないのでそこが真の原因かどうかは分かりませんが。なお`thema-academic`を利用したときに発生することは確認済みですが、他のテーマは未確認です。<br>https://vivliostyle.slack.com/files/U087G7Y3FAR/F087KGYL7EF/________________________.png<br>https://vivliostyle.slack.com/files/U087G7Y3FAR/F087541TJ4X/___________________________.png|
