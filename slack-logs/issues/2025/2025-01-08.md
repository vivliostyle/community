# 2025-01-08

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|01:43|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|ご報告ありがとうございます。修正するべきissueとして登録しました <https://github.com/vivliostyle/themes/issues/138><br><blockquote>From <https://vivliostyle.slack.com/archives/CJAP6GBKQ/p1736246169734479|https://vivliostyle.slack.com/archives/CJAP6GBKQ/p1736246169734479><br><br>> 見出しに自動的に番号が振られる際, 添付画像のようにH3以下の番号が正常に振られていない状態となっています。本来なら2.1 / 2.1.1 などとなるはずです。  <br>> この不具合はテーマのバージョンが2.0.0の時に発生し, 以前の1.0.1では見られませんでした。  <br>> 不具合の原因となっている部分はthema-base/css/partial/section.cssの--vs-section--root-counter-resetが定義されている下の部分(22行目～29行目)だと思われます。その部分のコードを全部消す, またはvs-counter-sec-h1, vs-counter-sec-h2...の部分だけを消すと番号は正常に振られるようになります。  <br>> 以下のプルリクのpackages/@vivliostyle/theme-base/css/partial/section.cssの変更の部分が該当部分です。  <br>> <https://github.com/vivliostyle/themes/commit/d3c9c5bebe02e2b8b67c608b98da13e4ea505c5c#diff-6b70c01e69010cbdc012dbeabf954fa4d0e8b5baaa995eb8992e33509e0d56c6R19|https://github.com/vivliostyle/themes/commit/d3c9c5bebe02e2b8b67c608b98da13e4ea505c5c#diff-6b70c01e69010cbdc012dbea[…]5baaa995eb8992e33509e0d56c6R19>  <br>> コードの全体像が掴めていないのでそこが真の原因かどうかは分かりませんが。なおthema-academicを利用したときに発生することは確認済みですが、他のテーマは未確認です。<br><br><https://private-user-images.githubusercontent.com/1771005/400973448-67f6e385-471a-4055-ab7c-9de4ee26d7a6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzYzMDA5MDEsIm5iZiI6MTczNjMwMDYwMSwicGF0aCI6Ii8xNzcxMDA1LzQwMDk3MzQ0OC02N2Y2ZTM4NS00NzFhLTQwNTUtYWI3Yy05ZGU0ZWUyNmQ3YTYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDEwOCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMDhUMDE0MzIxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OGY2ZDYzNmRlZjkyMWRjOWU0NWYyNGNhNTQ4OTgzMmNmNzkzNWZlZDMyZGI3NzQxMzQwYjczNjQ4Njk1MDhhZiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.hz_WAqq_9IksdKCU5k1kVsjmPLxJMkQ2b7XdtRql18M|image>  <br><https://private-user-images.githubusercontent.com/1771005/400973460-0b17ffb1-1160-4cda-8739-30f91f78d951.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzYzMDA5MDEsIm5iZiI6MTczNjMwMDYwMSwicGF0aCI6Ii8xNzcxMDA1LzQwMDk3MzQ2MC0wYjE3ZmZiMS0xMTYwLTRjZGEtODczOS0zMGY5MWY3OGQ5NTEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDEwOCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMDhUMDE0MzIxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2U5MDU4ZmYwY2EyZDViYTgwYWFjZWY5YmMzOWQwYzMyYjQyOTExMjFkOTM5MDNiMDExNzI4ZDI0ZDQzZWFkZiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.gXGx8pYtQ3suoQLkrsAucLxsFVpSiyb2KitRZzivBTw|image></blockquote>|
