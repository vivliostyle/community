# 2025-01-09

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|02:19|![](https://avatars.slack-edge.com/2023-11-11/6180804843906_ec36242e3b721d6c30e9_72.png)|Koutaro Mukai|`rgb()`と`calc()` を組み合わせると正しく動作しないようです。<br>```&lt;style&gt;<br>@page {<br>    size: A5;<br>}<br>h1 {<br>    color: rgb(calc(255 - 25) 0 0);<br>}<br>&lt;/style&gt;<br><br># h1<br><br><blockquote>vivliostyle --version</blockquote>cli: 8.17.1<br>core: 2.30.7```<br>https://vivliostyle.slack.com/files/U04UP57BE7M/F088JM1EQSC/image.png|
|02:22|![](https://avatars.slack-edge.com/2023-11-11/6180804843906_ec36242e3b721d6c30e9_72.png)|Koutaro Mukai|デバッガで見ると`calc()`の結果の単位がpxになっていました。css-cascade.ts:4829の`CalcFilterVisitor#visitFunc` で単位を与えているところまではわかりました。単位を外せば正しく`rgb(230 0 0)` になりますが、単になくせばいいものかはわかりません。<br>https://vivliostyle.slack.com/files/U04UP57BE7M/F087T769U77/image__2_.png<br>https://vivliostyle.slack.com/files/U04UP57BE7M/F087VV82N5R/image__3_.png|
|15:42|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|ありがとうございます。Issue登録しました:<br><https://github.com/vivliostyle/vivliostyle.js/issues/1442><br><br>直します！<br><blockquote>From <https://vivliostyle.slack.com/archives/CJAP6GBKQ/p1736389187114189|https://vivliostyle.slack.com/archives/CJAP6GBKQ/p1736389187114189><br><br>(thanks <https://github.com/u1f992|@u1f992>)<br><br>> `rgb()` と `calc()` を組み合わせると正しく動作しないようです。<br>> <br>> ```<br>> <style><br>> @page {<br>>    size: A5;<br>> }<br>> h1 {<br>>    color: rgb(calc(255 - 25) 0 0);<br>> }<br>> </style><br>> <br>> # h1<br>> <br>>> vivliostyle --version<br>> cli: 8.17.1<br>> core: 2.30.7<br>> <br>> ```<br><br><https://private-user-images.githubusercontent.com/3324737/401601717-66bdb435-f541-4e31-b8d4-844e58853ace.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY0Mzc2NzQsIm5iZiI6MTczNjQzNzM3NCwicGF0aCI6Ii8zMzI0NzM3LzQwMTYwMTcxNy02NmJkYjQzNS1mNTQxLTRlMzEtYjhkNC04NDRlNTg4NTNhY2UucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDEwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMDlUMTU0MjU0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZWY0YWMxYzE5ZGY2MzU2ZGQ3M2Q4NGEzYTI4ZWRmOGUxYjg1ZmFiODBmZjI4YzhmZDc3M2EzMTIxNDg4MTQ2ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.H3TtDAnd9Vo_c6j5sPKYRUYApPeMCITFiT6IXPTa6Jk|image><br><br>---<br><br>> デバッガで見ると`calc()`の結果の単位がpxになっていました。css-cascade.ts:4829の`CalcFilterVisitor#visitFunc` で単位を与えているところまではわかりました。単位を外せば正しく`rgb(230 0 0)` になりますが、単になくせばいいものかはわかりません。<br><br><https://private-user-images.githubusercontent.com/3324737/401602253-e6a6a309-2397-4547-8238-c74cec0f3f3e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY0Mzc2NzQsIm5iZiI6MTczNjQzNzM3NCwicGF0aCI6Ii8zMzI0NzM3LzQwMTYwMjI1My1lNmE2YTMwOS0yMzk3LTQ1NDctODIzOC1jNzRjZWMwZjNmM2UucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDEwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMDlUMTU0MjU0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2M0ODQyNTUzODBiNTI0NjAxMmI3ZTA4YjRiOGJlNTNhNTVmODY5YTE0MTRlM2Q5YmNhN2ZhNjA0Yzg5ZmYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.kEizdaoM-g-_ly-jlr9IbUiV1YDUq427sPRkVg_wXxE|image (2)>  <br><https://private-user-images.githubusercontent.com/3324737/401602289-d41f02bc-d772-42a2-88b2-c001cc4443e6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY0Mzc2NzQsIm5iZiI6MTczNjQzNzM3NCwicGF0aCI6Ii8zMzI0NzM3LzQwMTYwMjI4OS1kNDFmMDJiYy1kNzcyLTQyYTItODhiMi1jMDAxY2M0NDQzZTYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDEwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMDlUMTU0MjU0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZGNjMjQ0YjBiYTVmM2ZiNjhhNTE4YjMwZWQyZmQ5N2FjNjY2OGRmNjIzN2NmOGJlZDM5OGVjOGZhODhkYmZjZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.GSjZdPeGjbKjtxVEHs2KYPRsb2O55xrtGQG0-dwjcIQ|image (3)></blockquote>|
