# 2023-11-29

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|01:30|![](https://secure.gravatar.com/avatar/698cc14290c3976fdd9f0a23494b87c1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png)|田嶋　淳|Vivliostyleの問題なのかChromeの問題なのか切り分けはできていませんが不具合の報告です。以前からVivliostyle Viewerをローカル環境で内部サーバとして起動してEPUBのPDF出力用として使っていますが、最近Chromeから出力したPDFに白紙ページが入るようになってしまいました。環境は以下です。<br>-----------------------------------------------------------------<br>vivliostyle-viewer-2.25.2<br><br>macOS13.6.1<br>Chrome 119.0.6045.159<br>-----------------------------------------------------------------<br>ブラウザ画面上ではきちんと見えています。また、Safariで出力すれば問題は出ないようです。macOS13の問題かと思い、macOS12の環境でも見てみましたが同様の状況でした。vivliostyle-viewer-2.25.8でも発現します。公開可能な状態にしたEPUBファイルと白紙ページのPDFもアップロードしておきます。<br>https://vivliostyle.slack.com/files/UJPCPH1UL/F067JC3R954/vivliostyletest.epub<br>https://vivliostyle.slack.com/files/UJPCPH1UL/F067TESL49J/vivliostyletest_macos13_chrome.pdf|
|01:53|![](https://secure.gravatar.com/avatar/1ac180f0868137292905c311b5fff781.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png)|spring-raining|EPUBのopfファイルを見ると<br>```&lt;spine page-progression-direction="rtl"&gt;<br><br>&lt;itemref linear="yes" idref="p-cover" properties="page-spread-left" /&gt;<br>&lt;itemref linear="yes" idref="p-titlepage" properties="page-spread-left" /&gt;<br>...```<br>となっており、p-coverとp-titlepageに `properties="page-spread-left"` と設定されているため、両方見開き左ページに配置しようとして白紙のページが挿入されているように見えます|
|02:10|![](https://secure.gravatar.com/avatar/698cc14290c3976fdd9f0a23494b87c1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png)|田嶋　淳|本扉周りのそのあたりの記述は本のレイアウトとしてはごく普通ですね（カバーと本扉が見開きで表示されてしまうのは困る）。今回の問題は16ページあたりから続く連続白紙ページです。|
|03:09|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|こちらでもテストしてみてるのですが、再現しません。このvivliostyletest.epubを展開したものをvivliostyle-viewerで表示しても連続する白紙ページは出ません。<br><br>何か条件があるのでしょうか？　指定しているスタイルなど？|
|03:15|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|Vivliostyle CLIではEPUBファイルを直接指定してbuild（PDF出力）やpreviewができますが、それをためすとどうなりますか？　（こちらでは連続する白紙ページは出ません）<br><br>```vivliostyle build vivliostyletest.epub```<br>```vivliostyle preview vivliostyletest.epub```|
|03:33|![](https://secure.gravatar.com/avatar/698cc14290c3976fdd9f0a23494b87c1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png)|田嶋　淳|こちらでやっているのはサンプルページ <https://vivliostyle.org/samples/> の“Make Books with Vivliostyle, Vol. 2”の31ページからのヤツで、見開き表示、画像表示最適化、ノンブル表示などのためにかなり大量の追加指定をしていたりはするのでそのあたりがもしかしたら影響しているかもしれません。一応ソースコード内の追加指定部分を以下に示しておきます。<br>------------------------------------------------------------------------------------------------------------------------------------<br>"&amp;renderAllPages=true&amp;userStyle=data:,/*%3Cviewer%3E*/%0Aimg,%20svg%20%7B%20max-inline-size:%20100%25%20!important;%20max-block-size:%20100vb%20!important;%20object-fit:%20contain%20!important;%20%7D%0A/*%3C/viewer%3E*/%0A\@page%20:left%20%7B%0Amargin-right:%2010mm;%0A\@bottom-left%20%7B%0Acontent:%20counter(page);%0Amargin-left:%205pt;%0Amargin-bottom:%206mm;%0Awriting-mode:%20horizontal-tb;%0Afont-weight:%20normal;%0Afont-family:%20serif-ja,%20serif;%0A%7D%0A%7D%0A\@page%20:right%20%7B%0Amargin-left:%2010mm;%0A\@bottom-right%20%7B%0Acontent:%20counter(page);%0Amargin-right:%205pt;%0Amargin-bottom:%206mm;%0Awriting-mode:%20horizontal-tb;%0Afont-weight:%20normal;%0Afont-family:%20serif-ja,%20serif;%0A%7D%0A%7D%0A\@page%20:first%20%7B%0A\@bottom-left%20%7B%0Acontent:%20%27%27;%0A%7D%0A\@top-left%20%7B%0Acontent:%20%27%27;%0A%7D%0A%7D&amp;spread=true"<br>------------------------------------------------------------------------------------------------------------------------------------<br><blockquote>Vivliostyle — open source, web browser based CSS typesetting engine project</blockquote>|
|05:11|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|そのパラメータの指定を試しましたが再現しないです。|
