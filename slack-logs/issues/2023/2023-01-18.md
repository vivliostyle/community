# 2023-01-18

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|11:13|![](https://secure.gravatar.com/avatar/6a1342affe7c337c61db338b633abef3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|lwohtsu|`@shinyu`<br>ãŠç–²ã‚Œæ§˜ã§ã™ã€‚æœ€æ–°ç‰ˆï¼ˆ@vivliostyle/cli@6.1.0ï¼‰ã®PDFå‡ºåŠ›ã§ãƒˆãƒ©ãƒ–ãƒ«ãŒå‡ºã‚‹ã‚ˆã†ã§ã™ï¼ˆWin11ç’°å¢ƒï¼‰ã€‚<br><br>1. ã¨ã‚ã‚‹ä»•äº‹ã§A5ç‰ˆã®ä»®çµ„ã¿ï¼ˆåˆ¤å‹ã¨æ–‡å­—ã‚µã‚¤ã‚ºæŒ‡å®šç¨‹åº¦ã®ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ï¼‰ã‚’ä½œã‚ã†ã¨ã—ãŸã¨ã“ã‚ã€ãªãœã‹A4ã‚µã‚¤ã‚ºã®å·¦ä¸Šã«A5ç‰ˆãŒé…ç½®ã•ã‚ŒãŸã‚ˆã†ãªçŠ¶æ…‹ã§å‡ºåŠ›ã•ã‚Œã¾ã—ãŸï¼ˆvs6.1.0-a.pngï¼‰ã€‚ç”»åƒã¯Chromiumã®å°åˆ·ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™ãŒã€ã€Œvivliostyle buildã€ã§ã‚‚åŒã˜çµæœã«ãªã‚Šã¾ã™ã€‚<br>2. CSSçµ„ç‰ˆæœ¬ã®ã‚µãƒ³ãƒ—ãƒ«ï¼ˆsample1.mdã‚„sample1.htmlã€A5ç‰ˆï¼‰ã§è©¦ã—ãŸã¨ã“ã‚ã€ã€Œvivliostyle buildã€ã ã¨ã‚¨ãƒ©ãƒ¼çµ‚äº†ã—ã¦PDFãŒä½œã‚Œã¾ã›ã‚“ã§ã—ãŸï¼ˆvs6.1.0-b.pngï¼‰ã€‚ã¾ãŸã€Chromiumã®å°åˆ·ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ã€Œout of memoryã€ã«ãªã‚Šã¾ã™ï¼ˆvs6.1.0-c.pngï¼‰ã€‚<br>3. CSSçµ„ç‰ˆæœ¬è‡ªä½“ã¯ãªãœã‹å•é¡ŒãªãPDFãŒæ›¸ãå‡ºã›ã¾ã—ãŸï¼ˆvs6.1.0-d.pngï¼‰ã€‚ã“ã‚Œã¯A5ç‰ˆã§ã™ãŒã€èƒŒæ™¯ç”»åƒã®éƒ½åˆã§å››æ–¹3mmãšã¤åºƒã’ãŸ154Ã—216mmã¨ã„ã†å¤‰å‰‡ã‚µã‚¤ã‚ºã§ã™ã€‚CSSãŒä¸€ç•ªè¤‡é›‘ãªã®ã§ã€ã‚€ã—ã‚å¤±æ•—ã—ãã†ãªæ°—ã‚‚ã™ã‚‹ã®ã§ã™ãŒâ€¦â€¦ã€‚<br>https://vivliostyle.slack.com/files/UJ1U19SU9/F04KGQZ4NRJ/vs6.1.0-a.png<br>https://vivliostyle.slack.com/files/UJ1U19SU9/F04KE7TCE11/vs6.1.0-b.png<br>https://vivliostyle.slack.com/files/UJ1U19SU9/F04KT0K2F7T/vs6.1.0-c.png<br>https://vivliostyle.slack.com/files/UJ1U19SU9/F04KT1T56MP/vs6.1.0-d.png|
|11:13|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: `@shinyu`<br>thank you for your hard work. There seems to be a problem with PDF output of the latest version (@vivliostyle/cli@6.1.0) (Win11 environment).<br><br>1. When I tried to create a temporary layout of A5 size (a fairly simple one with a format and character size specified) for a certain job, for some reason it was output as if the A5 size was placed on the upper left of the A4 size. (vs6.1.0-a.png). The image is a Chromium print preview, but the "vivliostyle build" gives the same result.<br>2. When I tried with CSS typesetting book samples (sample1.md, sample1.html, A5 version), "vivliostyle build" ended with an error and could not create PDF (vs6.1.0-b.png). I also get "out of memory" when trying to use Chromium's print preview (vs6.1.0-c.png).<br>3. For some reason, the CSS typesetting book itself could be exported to PDF without any problems (vs6.1.0-d.png). This is an A5 version, but for the convenience of the background image, it is an irregular size of 154 x 216 mm, which is expanded by 3 mm on each side. CSS is the most complicated, so I feel like I'm going to fail, but...|
|13:44|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|2ã¯ã“ã¡ã‚‰ã§å†ç¾ã—ã¾ã—ãŸ(Winã¨Macã®ã©ã¡ã‚‰ã§ã‚‚)ã€‚æ¥µç´°ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å¯èƒ½ã«ã—ãŸã“ã¨ã§å•é¡ŒãŒèµ·ãã¦ã¾ã—ãŸã€‚<br><https://github.com/vivliostyle/vivliostyle.js/pull/1079><br>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ã€URLã« `&amp;pixelRatio=4` ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯8ã¨ã—ã¦ã„ã‚‹ã®ã‚’4ã«ä¸‹ã’ã‚‹ï¼‰ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®å°åˆ·ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ï¼ˆbuildã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ã¯ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼‰ã€€ã©ã†ã—ã¦ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã“ã®å•é¡ŒãŒèµ·ãã‚‹ã®ã‹èª¿ã¹ã¾ã™ã€‚<br><br>1ã«ã¤ã„ã¦ã€ãƒ†ã‚¹ãƒˆã—ãŸã„ã®ã§ã‚µãƒ³ãƒ—ãƒ«ã‚’ãã ã•ã„ã€‚<br><blockquote>Enables very thin border width by emulating high pixel ratio.<br><br>â€¢ fixes <https://github.com/vivliostyle/vivliostyle.js/issues/419|#419><br>â€¢ also improves on <https://github.com/vivliostyle/vivliostyle.js/issues/1076|#1076><br><br>*About `pixelRatio` viewer option*<br><br>The output pixel ratio is configurable by setting `pixelRatio=<number>` in <https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/viewer/src/models/viewer-options.ts|Vivliostyle Viewer options>, or in the <https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/src/vivliostyle/core-viewer.ts#L73|CoreViewerOptions>. The default setting is `pixelRatio=8`, which means that the minimum border width is 1/8 px = 0.125px (about 0.09pt, or 0.033mm).<br><br>The pixelRatio value can be any number (max value is 16 -- updated in <https://github.com/vivliostyle/vivliostyle.js/pull/1085|#1085>) but recommended values are 1, 2, 4, *8* (default), or 16. Note:<br><br>â€¢ Values other than powers of 2 may cause layout problems.<br>â€¢ Large value may cause problem in browser.<br>â€¢ If 0 is specified, the pixel ratio emulation is turned off. Note that this is not same as `pixelRatio=1` when your display device pixel ratio is not 1, i.e., with HiDPI display such as "Retina" display whose device pixel ratio is 2.<br><br>*Limitation*<br><br>This high pixel ratio emulation on PDF output works only with Chromium (Chrome) browser (except Microsoft Edge -- updated in <https://github.com/vivliostyle/vivliostyle.js/pull/1085|#1085>), because it uses the `zoom` non-standard CSS property that Firefox does not support and negative page margins in the page rule that both Firefox and Safari do not support.</blockquote>|
|13:44|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: 2 was reproduced here (on both Win and Mac). There was a problem with enabling ultra-thin borders.<br><https://github.com/vivliostyle/vivliostyle.js/pull/1079><br>In the preview, adding `&amp;pixelRatio=4` to the URL (lowering the default of 8 to 4) enabled printing from the browser. (This parameter cannot be specified from the build command) Investigate why this problem occurs in this sample.<br><br>Regarding 1, I would like to test it, so please give me a sample.|
|15:19|![](https://secure.gravatar.com/avatar/6a1342affe7c337c61db338b633abef3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|lwohtsu|ãŠç–²ã‚Œæ§˜ã§ã™ã€‚ãŠæ‰‹æ•°ãŠã‹ã‘ã—ã¾ã™ã€‚<br>1ã®åŸç¨¿ã¯è‘—è€…ã•ã‚“ã‹ã‚‰ã®é ã‹ã‚Šç‰©ãªã®ã§ã€CSSã®ã¿ãŠé€ã‚Šã—ã¾ã™ã€‚<br><br>åŸç¨¿ã‚’ãŠé€ã‚Šã§ããªã„ã®ã§ä»Šè¿½åŠ ã§èª¿ã¹ã¦ã¿ãŸã®ã§ã™ãŒã€åŸç¨¿ã«ã‚ˆã£ã¦ç—‡çŠ¶ãŒå‡ºã‚‹ã‚‚ã®ã¨å‡ºãªã„ã‚‚ã®ãŒã‚ã‚Šã€é•ã„ã‚’æ¢ã—ãŸã¨ã“ã‚ã€ã©ã†ã‚‚*ã‚³ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆ3ã¤ã§ç”Ÿæˆã™ã‚‹preã€codeï¼‰ãŒè¦ç´ ç«¯ã§æŠ˜ã‚Šè¿”ã•ã‚Œãšã€ç‰ˆé¢ã‹ã‚‰ã¯ã¿å‡ºã—ãŸã¨ã*ã«ç¾è±¡ãŒå‡ºã‚‹ã‚ˆã†ã§ã™ã€‚<br>é›‘ãªä»®çµ„ã¿ç”¨ã«çŸ­æ™‚é–“ã§ä½œã£ãŸã‚‚ã®ãªã®ã§ã€ã€Œwhite-space: pre-wrap;ã€ãªã©ã‚’å…¥ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚<br><br>ã²ã¨ã¾ãšpreã«å¯¾ã—ã¦ã€Œwhite-space: pre-wrap;ã€ã‚’å…¥ã‚Œã‚‹ã¨ã€1ã®ç—‡çŠ¶ã¯è§£æ±ºã§ããŸï¼ˆA5ã§å‡ºåŠ›ã•ã‚Œã‚‹ï¼‰ã®ã§ã™ãŒã€ãã‚Œã§ã‚ˆã„ã®ã‹ã©ã†ã‹ã¯é›£ã—ã„ã¨ã“ã‚ã§ã™ã€‚<br>https://vivliostyle.slack.com/files/UJ1U19SU9/F04KFE0N03V/main.css|
|15:19|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: thank you for your hard work. I'm sorry for troubling you.<br>Since the manuscript of 1 was entrusted by the author, I will only send CSS.<br><br>I can't send the manuscript, so I've been looking into it now, but some manuscripts have symptoms and others don't. It seems that the phenomenon occurs* when it is not wrapped at the edge of the element and it protrudes from the printing surface.<br>I didn't put "white-space: pre-wrap;" because it was made in a short time for rough temporary assembly.<br><br>For the time being, if you put "white-space: pre-wrap;" for pre, the symptom 1 could be solved (output in A5), but it is difficult to say whether it is good.|
|15:20|![](https://secure.gravatar.com/avatar/6a1342affe7c337c61db338b633abef3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png)|lwohtsu|Ã—ç‰ˆé¢ã‹ã‚‰ã¯ã¿å‡ºã—ãŸ<br>â—‹åˆ¤å‹ï¼ˆç”¨ç´™ï¼‰ã‹ã‚‰ã¯ã¿å‡ºã—ãŸ|
|15:20|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: Ã— Protruding from the plate<br>â—‹ Protruded from the format (paper)|
|15:53|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|2ã®Chromiumã‹ã‚‰ã®å°åˆ·ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å•é¡Œã¯ã€ã¨ã¦ã‚‚å˜ç´”ãªHTML+CSSã§ç™ºç”Ÿã™ã‚‹ã®ãŒåˆ†ã‹ã‚Šã€issueã«ã—ã¾ã—ãŸ:<br><https://github.com/vivliostyle/vivliostyle.js/issues/1095><br><blockquote>*Describe the bug*<br><br>The following simple HTML+CSS crashes printing from Vivliostyle Viewer (or CLI).<br><br><pre><style><br>  @page {<br>    size: a5;<br>  }<br>  h1 {<br>    margin-top: 40mm;<br>  }<br></style><br><h1>Hello</h1></pre><br><br>*To Reproduce*  <br>Steps to reproduce the behavior:<br><br>1. Go to <https://vivliostyle.org/viewer/#src=data:,%3Ch1%3EHello%3C/h1%3E&style=data:,/*%3Cviewer%3E*/%0A@page%20%7B%20size:%20a5;%20%7D%0A/*%3C/viewer%3E*/%0Ah1%20%7B%0A%20%20margin-top:%2040mm;%0A%7D|https://vivliostyle.org/viewer/#src=data:,%3Ch1%3EHello%3C/h1%3E&style=data:,/*%3Cviewer%3E*/%0A@page%20%7B%20size:%20a5;%20%7D%0A/*%3C/viewer%3E*/%0Ah1%20%7B%0A%20%20margin-top:%2040mm;%0A%7D><br>2. Click the Print button<br>3. waiting the print preview ...<br>4. See error<br><br>*Screenshots*  <br><https://user-images.githubusercontent.com/3324737/213217877-957da77f-04e1-4df3-a411-82f2904a0336.png|Screenshot 2023-01-19 at 0 27 49><br><br>This problem does not happen with the previous version v2.20.0:  <br><https://vivliostyle.github.io/viewer/v2.20.0/#src=data:,%3Ch1%3EHello%3C/h1%3E&style=data:,/*%3Cviewer%3E*/%0A@page%20%7B%20size:%20a5;%20%7D%0A/*%3C/viewer%3E*/%0Ah1%20%7B%0A%20%20margin-top:%2040mm;%0A%7D|https://vivliostyle.github.io/viewer/v2.20.0/#src=data:,%3Ch1%3EHello%3C/h1%3E&style=data:,/*%3Cviewer%3E*/%0A@page%20%7B%20size:%20a5;%20%7D%0A/*%3C/viewer%3E*/%0Ah1%20%7B%0A%20%20margin-top:%2040mm;%0A%7D></blockquote>|
|15:53|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: The problem of crashing printing from Chromium in 2 was found to occur with very simple HTML + CSS, so I made an issue:<br><https://github.com/vivliostyle/vivliostyle.js/issues/1095>|
|16:08|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|1ã®å•é¡Œã¯ã€ãƒšãƒ¼ã‚¸ã‹ã‚‰æ¨ªã«ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã™ã‚‹ã¨Chromiumã¯å°åˆ·ã®ã¨ãæ¨ªã«ã¯ã¿å‡ºã—ã¦ã„ã‚‹ã‚‚ã®ã‚’å…¨éƒ¨åã‚ã‚ˆã†ã¨ã—ã¦ã€ãã®çµæœç¸®å°ã•ã‚Œã¦å°åˆ·ã•ã‚Œã‚‹ã“ã¨ãŒåŸå› ã§ã™ã€‚æ¨ªã«ã¯ã¿å‡ºã—ã¦ã„ã‚‹éƒ¨åˆ†ã¯ bleed box ã§ã® overflow: hidden ã«ã‚ˆã‚Šå°åˆ·ã•ã‚Œãªã„ã®ã§ã™ãŒã€ãã‚Œã§ã‚‚ã“ã®å•é¡ŒãŒèµ·ãã¾ã™ã€‚ã“ã‚Œã‚‚ã‚ã¨ã§issueã«ã—ã¦ã€Vivliostyle.jsã§å¯¾ç­–ã§ããªã„ã‹ä»Šå¾Œã®èª²é¡Œã¨ã—ã¾ã™ã€‚|
|16:08|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|ğŸ‡ºğŸ‡¸: Problem 1 is that when you overflow the page horizontally, Chromium will try to fit everything that is overhanging when printing, resulting in a shrunk print. The overflow: hidden on the bleed box prevents it from printing, but the problem still occurs. This will also be an issue later, and it will be a future issue to see if Vivliostyle.js can be used as a countermeasure.|
