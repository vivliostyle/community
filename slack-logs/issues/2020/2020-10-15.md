# 2020-10-15

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|01:51|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|I summarized Vivliostyle issues and workarounds on CSS Paged Media support for Health-Sprints (`@Simon Worthington`).<br>I share it here to help other users as well.<br><https://github.com/Health-Sprints/obp/issues/4><br><blockquote>Regarding the questions from <https://github.com/mrchristian|@mrchristian>:<br><br><blockquote>a. Can we use a folder of multiple files HTML/XHTML or do we need to have one big file for maintaining things like consecutive numbering on image captions.  <br>b. Should we be using Adaptive Layout CSS or Paged Media CSS</blockquote>I think the multiple files HTML/XHTML (see <https://github.com/Health-Sprints/obp/issues/3|#3> ) and Paged Media CSS will be better, because the content documents of EPUB and WebBook can be shared and Paged Media CSS is easier than Adaptive Layout CSS.<br><br>However, there are issues on Vivliostyle's CSS Paged Media implementation and we have to find some workarounds or quick fixes to the vivliostyle.js core.<br><br>Major issues are:<br><br>â€¢ Support named strings for running headers and footers  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/545|vivliostyle/vivliostyle.js#545><br>â€¢ Support for running elements?  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/424|vivliostyle/vivliostyle.js#424><br>â€¢ Support `@page :blank`  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/428|vivliostyle/vivliostyle.js#428><br>â€¢ Support for named pages?  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/425|vivliostyle/vivliostyle.js#425><br>â€¢ break-before:left/right at beginning of a document does not work properly  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/666|vivliostyle/vivliostyle.js#666><br>â€¢ First-page pseudo-class :first should work on each document in a multi-document publication  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/667|vivliostyle/vivliostyle.js#667><br><br>*Running headers with chapter title*<br><br>`env(pub-title)` and `env(doc-title)` can be used for running headers.  <br>See <https://github.com/vivliostyle/vivliostyle.js/pull/512|vivliostyle/vivliostyle.js#512>.<br><br>*A workaround to hide page header/footer on chapter title pages*<br><br>This workaround is made possible with the following bug fix:<br><br>â€¢ negative z-index on `@page` (or page-margin box) causes page (margin-box) content to disappear  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/665|vivliostyle/vivliostyle.js#665><br><br>See the test HTML for this issue: <https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/test/files/z-index-at-page.html|https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/test/files/z-index-at-page.html><br><br>After this bug fix update (currenly available in the Canary version in <https://vivliostyle.github.io/|https://vivliostyle.github.io/> ), the z-index property with a negative integer value on the page-margin boxes can be used to hide them with a page size box with background color.<br><br>Test with the Canary version of Vivliostyle Viewer:  <br><https://vivliostyle.now.sh/#src=https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/test/files/z-index-at-page.html|https://vivliostyle.now.sh/#src=https://github.com/vivliostyle/vivliostyle.js/blob/master/packages/core/test/files/z-index-at-page.html><br><br>*Another workaround*<br><br>Another workaround is to make the chapter title page a separate HTML document and specify a different stylesheet than for the chapter body pages. This stylesheet will have `content: none` on each margin box in the `@page {â€¦}` rule, and `body { break-before: right; }` for creating a blank page before the chapter title page (This solves the next question).<br><br>*How to make a blank page (without page header/footer) before the chapter title page*<br><br>"Another workaround" above can be also a workaround of this issue.<br><br>*Better solution will beâ€¦*<br><br>Fixing the Vivliostyle.js core, especially the following issues, will be the best:<br><br>â€¢ Support `@page :blank`  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/428|vivliostyle/vivliostyle.js#428><br>â€¢ First-page pseudo-class :first should work on each document in a multi-document publication  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/667|vivliostyle/vivliostyle.js#667><br>â€¢ break-before:left/right at beginning of a document does not work properly  <br>    <https://github.com/vivliostyle/vivliostyle.js/issues/666|vivliostyle/vivliostyle.js#666><br><br>Before fixing all of these, a partial fix of the last one may help:<br><br><blockquote>â€¢ the blank page generated by the break-before: left/right on the body element of the Nth document in a multi-document publication (like EPUB) has page-margin box content defined for the Nth document. (not for the (N-1)th document).</blockquote>A partial fix of this bug:<br><br>â€¢ Change the behavior to not output anything on the blank page generated by break-before (left/right/recto/verso) at beginning of a document.<br><br>This change will be a small fix and the behavior will be better than making wrong output. This partial fix will help until all fixes are complete.</blockquote>|
|01:51|![](https://avatars.slack-edge.com/2019-08-21/732685848020_f3f20736795184660348_72.png)|Kiara Translation|ğŸ‡¯ğŸ‡µ: Health-Sprintsã®CSSãƒšãƒ¼ã‚¸ãƒ¡ãƒ‡ã‚£ã‚¢ã‚µãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹Vivliostyleã®å•é¡Œã¨å›é¿ç­–ã‚’è¦ç´„ã—ã¾ã—ãŸï¼ˆï¼‰ã€‚<br>ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚å½¹ç«‹ã¤ã‚ˆã†ã«ã€ã“ã“ã§å…±æœ‰ã—ã¾ã™ã€‚<br><https://github.com/Health-Sprints/obp/issues/4>|
|01:52|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|<blockquote>ğŸ‡¯ğŸ‡µ: Health-Sprintsã®CSSãƒšãƒ¼ã‚¸ãƒ¡ãƒ‡ã‚£ã‚¢ã‚µãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹Vivliostyleã®å•é¡Œã¨å›é¿ç­–ã‚’è¦ç´„ã—ã¾ã—ãŸï¼ˆï¼‰ã€‚<br>ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚å½¹ç«‹ã¤ã‚ˆã†ã«ã€ã“ã“ã§å…±æœ‰ã—ã¾ã™ã€‚<br><https://github.com/Health-Sprints/obp/issues/4></blockquote>|
