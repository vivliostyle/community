# 2022-09-06

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|06:27|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|親要素への属性の移動・コピーをすべて廃止する案を書きました：<br><https://github.com/vivliostyle/vfm/issues/151#issuecomment-1237660873><br>自動section囲みと属性の扱いではこれが一番シンプルでよいかもしれません。pandocのsection-divsやこれまでのvfmとの互換性はなくなりますが、どうでしょう？<br><blockquote>*親要素への属性の移動・コピーをすべて廃止する案*<br><br>もともと、自動生成の親要素にid属性を移動したりclass属性をコピーする理由は、そうしないとCSSで自動生成されたsectionのスタイルを指定することができないためだった。しかし、CSSで <https://developer.mozilla.org/docs/Web/CSS/:has|`:has()` 擬似クラス>が使えるようになると、その必要はなくなる。<br><br>`:has()` 擬似クラスはChrome 105から利用可能。Vivliostyle.jsでももうすぐ実装予定：<br><br>• <https://github.com/vivliostyle/vivliostyle.js/issues/828|vivliostyle/vivliostyle.js#828><br><br>たとえば、次のようなHTMLで<br><br><pre>&lt;section&gt;<br>  &lt;h2 id="ID1" class="A"&gt;Aaaa&lt;/h2&gt;<br>  &lt;p&gt;Aaaa aaa aaaaa.&lt;/p&gt;<br>&lt;/section&gt;<br>&lt;section&gt;<br>  &lt;h2 id="ID2" class="B"&gt;Bbbbb&lt;/h2&gt;<br>  &lt;p&gt;Bbbbbb bbb bbbb.&lt;/p&gt;<br>&lt;/section&gt;</pre><br><br>このようにsection要素に属性がない場合であっても、次のように `:has()` を使うと各sectionのスタイルの指定ができる：<br><br><pre>section:has(&gt; #ID1) {<br>  …<br>}<br>section:has(&gt; .B) {<br>  …<br>}</pre><br><br>section要素にどうしてもidやclassやその他の属性を指定したい場合は、HTMLブロックで明示的にsection要素を書くとよい。その提案：<br><br>• <https://github.com/vivliostyle/vfm/issues/152|#152></blockquote>|
|06:27|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I wrote a proposal to do away with all moving/copying attributes to parent elements:<br><https://github.com/vivliostyle/vfm/issues/151#issuecomment-1237660873><br>This may be the simplest way to handle automatic section enclosing and attributes. It's no longer compatible with pandoc's section-divs and previous versions of vfm, but what do you think?|
|06:35|![](https://avatars.slack-edge.com/2018-04-27/354445776386_e258f5ed5ba887b08668_72.jpg)|shinyu|自動section囲みにする見出しを制限するオプションの案を書きました：<br><https://github.com/vivliostyle/vfm/issues/155><br>デフォルトではh1を除外してh2の見出しから自動section囲みにするのがよさそう。これまでとの互換性はなくなりますがどうでしょう？<br><blockquote>From <https://github.com/vivliostyle/vfm/issues/153#issuecomment-1237592049|#153 (comment)>:<br><br>vfmでは文書内の最初の見出しが、文書のタイトル（HTMLのtitle要素）になる。それなのに、その最初の見出しは自動的にsectionで囲まれる。つまり最初のsectionの見出しとなる。<br><br>最初の見出しでもsection囲みにするのはpandocのsection-divsの仕様を踏襲したためだが、見直すべきかもしれない。  <br>最初の見出し（通常h1要素）はHTMLのbody要素の直下に生成され、その次の見出し（通常h2要素）からsection囲みになるほうが、HTML文書構造として自然ではないか。<br><br>次の提案は、明示的にbody要素のあとに見出しを書けばそのようなHTML出力になるようにするというもの：<br><br>• <https://github.com/vivliostyle/vfm/issues/154|#154><br><br>しかし、HTML block（`&lt;body&gt;` 開始タグを直接書く）やFenced block（`::: body` と書く）で明示的にbody要素を書かなくてはならないというのも、あまり便利ではない。<br><br>自動section囲みにする見出しを制限するオプションがあるとよいかもしれない。  <br>例えば、 `--section-headings=h2-h4` という指定で h2, h3, h4 だけを自動section囲みにする。値allですべて（現在と同じ）、値noneでsection囲みなし。デフォルトは h2-h6 が適切だろう。</blockquote>|
|06:35|![](https://avatars.slack-edge.com/2021-08-02/2324149410423_2aa7423c4133ecb9f168_72.png)|Kiara : Translation 100+ Languages|🇬🇧: I've written an optional suggestion to limit the headings that are auto-sectioned:<br><https://github.com/vivliostyle/vfm/issues/155><br>By default, it seems good to exclude h1 and make automatic section enclosure from h2 heading. Compatibility with the past will be lost, but what about it?|
